<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 ggplot2によるグラフ作成 | エコノミストのためのR</title>
  <meta name="description" content="5 ggplot2によるグラフ作成 | エコノミストのためのR" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="5 ggplot2によるグラフ作成 | エコノミストのためのR" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="naohat23/econ-code-bookdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 ggplot2によるグラフ作成 | エコノミストのためのR" />
  
  
  

<meta name="author" content="服部直樹" />


<meta name="date" content="2023-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="04_tidyverse.html"/>
<link rel="next" href="06_eda.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://econ-code.verse.jp/index.html">エコノミストのためのR</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> はじめに</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#なぜrを使うのか"><i class="fa fa-check"></i><b>1.1</b> なぜRを使うのか？</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#本書でできること"><i class="fa fa-check"></i><b>1.2</b> 本書でできること</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#目次"><i class="fa fa-check"></i><b>1.3</b> 目次</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第1章-はじめに"><i class="fa fa-check"></i>第1章 はじめに</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第2章-rの設定"><i class="fa fa-check"></i>第2章 Rの設定</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第3章-rの基本的な使用方法"><i class="fa fa-check"></i>第3章 Rの基本的な使用方法</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第4章-tidyverseによるデータ操作"><i class="fa fa-check"></i>第4章 tidyverseによるデータ操作</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第5章-ggplot2によるグラフ作成"><i class="fa fa-check"></i>第5章 ggplot2によるグラフ作成</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第6章-探索的データ分析eda"><i class="fa fa-check"></i>第6章 探索的データ分析（EDA）</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第7章-線形回帰"><i class="fa fa-check"></i>第7章 線形回帰</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第8章-時系列データ操作"><i class="fa fa-check"></i>第8章 時系列データ操作</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#第9章-時系列分析"><i class="fa fa-check"></i>第9章 時系列分析</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#付録-寄与度の計算方法"><i class="fa fa-check"></i>付録 寄与度の計算方法</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#パネルデータ分析"><i class="fa fa-check"></i>パネルデータ分析</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#参考文献ウェブサイト"><i class="fa fa-check"></i><b>1.4</b> 参考文献・ウェブサイト</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#rプログラミング"><i class="fa fa-check"></i>Rプログラミング</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#統計学計量経済学"><i class="fa fa-check"></i>統計学・計量経済学</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#時系列データ分析"><i class="fa fa-check"></i>時系列データ分析</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#変更履歴"><i class="fa fa-check"></i><b>1.5</b> 変更履歴</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年12月13日-マイナーアップデート"><i class="fa fa-check"></i>2023年12月13日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年10月9日-マイナーアップデート"><i class="fa fa-check"></i>2023年10月9日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年9月27日-マイナーアップデート"><i class="fa fa-check"></i>2023年9月27日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年9月22日-メジャーアップデート"><i class="fa fa-check"></i>2023年9月22日 メジャーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年6月18日-メジャーアップデート"><i class="fa fa-check"></i>2023年6月18日 メジャーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年6月18日-マイナーアップデート"><i class="fa fa-check"></i>2023年6月18日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年4月6日-マイナーアップデート"><i class="fa fa-check"></i>2023年4月6日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年3月18日-マイナーアップデート"><i class="fa fa-check"></i>2023年3月18日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年2月6日-マイナーアップデート"><i class="fa fa-check"></i>2023年2月6日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年10月22日-マイナーアップデート"><i class="fa fa-check"></i>2022年10月22日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年9月7日-マイナーアップデート"><i class="fa fa-check"></i>2022年9月7日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年7月17日-マイナーアップデート"><i class="fa fa-check"></i>2022年7月17日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年7月9日-マイナーアップデート"><i class="fa fa-check"></i>2022年7月9日 マイナーアップデート</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#年6月26日-ローンチ"><i class="fa fa-check"></i>2022年6月26日 ローンチ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="02_setting.html"><a href="02_setting.html"><i class="fa fa-check"></i><b>2</b> Rの設定</a>
<ul>
<li class="chapter" data-level="2.1" data-path="02_setting.html"><a href="02_setting.html#設定全般"><i class="fa fa-check"></i><b>2.1</b> 設定全般</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="02_setting.html"><a href="02_setting.html#rのインストール"><i class="fa fa-check"></i><b>2.1.1</b> Rのインストール</a></li>
<li class="chapter" data-level="2.1.2" data-path="02_setting.html"><a href="02_setting.html#rのバージョン確認"><i class="fa fa-check"></i><b>2.1.2</b> Rのバージョン確認</a></li>
<li class="chapter" data-level="2.1.3" data-path="02_setting.html"><a href="02_setting.html#セッション情報の確認"><i class="fa fa-check"></i><b>2.1.3</b> セッション情報の確認</a></li>
<li class="chapter" data-level="2.1.4" data-path="02_setting.html"><a href="02_setting.html#オブジェクトを全削除"><i class="fa fa-check"></i><b>2.1.4</b> オブジェクトを全削除</a></li>
<li class="chapter" data-level="2.1.5" data-path="02_setting.html"><a href="02_setting.html#警告の非表示"><i class="fa fa-check"></i><b>2.1.5</b> 警告の非表示</a></li>
<li class="chapter" data-level="2.1.6" data-path="02_setting.html"><a href="02_setting.html#関数が出力する警告やメッセージの非表示"><i class="fa fa-check"></i><b>2.1.6</b> 関数が出力する警告やメッセージの非表示</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="02_setting.html"><a href="02_setting.html#通信関連の設定"><i class="fa fa-check"></i><b>2.2</b> 通信関連の設定</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="02_setting.html"><a href="02_setting.html#プロキシ設定"><i class="fa fa-check"></i><b>2.2.1</b> プロキシ設定</a></li>
<li class="chapter" data-level="2.2.2" data-path="02_setting.html"><a href="02_setting.html#ssl設定"><i class="fa fa-check"></i><b>2.2.2</b> SSL設定</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="02_setting.html"><a href="02_setting.html#パッケージ"><i class="fa fa-check"></i><b>2.3</b> パッケージ</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="02_setting.html"><a href="02_setting.html#使用するパッケージ一覧"><i class="fa fa-check"></i><b>2.3.1</b> 使用するパッケージ一覧</a></li>
<li class="chapter" data-level="2.3.2" data-path="02_setting.html"><a href="02_setting.html#インストールとインポート"><i class="fa fa-check"></i><b>2.3.2</b> インストールとインポート</a></li>
<li class="chapter" data-level="2.3.3" data-path="02_setting.html"><a href="02_setting.html#インストール時のエラー"><i class="fa fa-check"></i><b>2.3.3</b> インストール時のエラー</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="02_setting.html"><a href="02_setting.html#グラフの設定"><i class="fa fa-check"></i><b>2.4</b> グラフの設定</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="02_setting.html"><a href="02_setting.html#グラフのテーマ設定"><i class="fa fa-check"></i><b>2.4.1</b> グラフのテーマ設定</a></li>
<li class="chapter" data-level="2.4.2" data-path="02_setting.html"><a href="02_setting.html#グラフのフォント設定"><i class="fa fa-check"></i><b>2.4.2</b> グラフのフォント設定</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="02_setting.html"><a href="02_setting.html#サンプルデータセット"><i class="fa fa-check"></i><b>2.5</b> サンプルデータセット</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="02_setting.html"><a href="02_setting.html#rのサンプルデータセット"><i class="fa fa-check"></i><b>2.5.1</b> Rのサンプルデータセット</a></li>
<li class="chapter" data-level="2.5.2" data-path="02_setting.html"><a href="02_setting.html#外部データセット"><i class="fa fa-check"></i><b>2.5.2</b> 外部データセット</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="02_setting.html"><a href="02_setting.html#r起動時に実行する設定"><i class="fa fa-check"></i><b>2.6</b> R起動時に実行する設定</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="03_introduction.html"><a href="03_introduction.html"><i class="fa fa-check"></i><b>3</b> Rの基本的な使用方法</a>
<ul>
<li class="chapter" data-level="3.1" data-path="03_introduction.html"><a href="03_introduction.html#第3章の準備"><i class="fa fa-check"></i><b>3.1</b> 第3章の準備</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="03_introduction.html"><a href="03_introduction.html#パッケージのインポート"><i class="fa fa-check"></i><b>3.1.1</b> パッケージのインポート</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="03_introduction.html"><a href="03_introduction.html#主要ショートカットキー"><i class="fa fa-check"></i><b>3.2</b> 主要ショートカットキー</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="03_introduction.html"><a href="03_introduction.html#編集"><i class="fa fa-check"></i><b>3.2.1</b> 編集</a></li>
<li class="chapter" data-level="3.2.2" data-path="03_introduction.html"><a href="03_introduction.html#実行"><i class="fa fa-check"></i><b>3.2.2</b> 実行</a></li>
<li class="chapter" data-level="3.2.3" data-path="03_introduction.html"><a href="03_introduction.html#その他"><i class="fa fa-check"></i><b>3.2.3</b> その他</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="03_introduction.html"><a href="03_introduction.html#基本操作"><i class="fa fa-check"></i><b>3.3</b> 基本操作</a></li>
<li class="chapter" data-level="3.4" data-path="03_introduction.html"><a href="03_introduction.html#演算"><i class="fa fa-check"></i><b>3.4</b> 演算</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="03_introduction.html"><a href="03_introduction.html#四則計算"><i class="fa fa-check"></i><b>3.4.1</b> 四則計算</a></li>
<li class="chapter" data-level="3.4.2" data-path="03_introduction.html"><a href="03_introduction.html#数値計算"><i class="fa fa-check"></i><b>3.4.2</b> 数値計算</a></li>
<li class="chapter" data-level="3.4.3" data-path="03_introduction.html"><a href="03_introduction.html#一致大小関係"><i class="fa fa-check"></i><b>3.4.3</b> 一致・大小関係</a></li>
<li class="chapter" data-level="3.4.4" data-path="03_introduction.html"><a href="03_introduction.html#包含集合関係"><i class="fa fa-check"></i><b>3.4.4</b> 包含・集合関係</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="03_introduction.html"><a href="03_introduction.html#ベクトル"><i class="fa fa-check"></i><b>3.5</b> ベクトル</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="03_introduction.html"><a href="03_introduction.html#ベクトルの作成"><i class="fa fa-check"></i><b>3.5.1</b> ベクトルの作成</a></li>
<li class="chapter" data-level="3.5.2" data-path="03_introduction.html"><a href="03_introduction.html#ベクトル要素へのアクセス"><i class="fa fa-check"></i><b>3.5.2</b> ベクトル要素へのアクセス</a></li>
<li class="chapter" data-level="3.5.3" data-path="03_introduction.html"><a href="03_introduction.html#規則性があるベクトルの作成"><i class="fa fa-check"></i><b>3.5.3</b> 規則性があるベクトルの作成</a></li>
<li class="chapter" data-level="3.5.4" data-path="03_introduction.html"><a href="03_introduction.html#ベクトルの演算"><i class="fa fa-check"></i><b>3.5.4</b> ベクトルの演算</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="03_introduction.html"><a href="03_introduction.html#行列"><i class="fa fa-check"></i><b>3.6</b> 行列</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="03_introduction.html"><a href="03_introduction.html#行列の作成"><i class="fa fa-check"></i><b>3.6.1</b> 行列の作成</a></li>
<li class="chapter" data-level="3.6.2" data-path="03_introduction.html"><a href="03_introduction.html#行列の要素へのアクセス"><i class="fa fa-check"></i><b>3.6.2</b> 行列の要素へのアクセス</a></li>
<li class="chapter" data-level="3.6.3" data-path="03_introduction.html"><a href="03_introduction.html#行列の演算"><i class="fa fa-check"></i><b>3.6.3</b> 行列の演算</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="03_introduction.html"><a href="03_introduction.html#データフレーム"><i class="fa fa-check"></i><b>3.7</b> データフレーム</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="03_introduction.html"><a href="03_introduction.html#データフレームの作成"><i class="fa fa-check"></i><b>3.7.1</b> データフレームの作成</a></li>
<li class="chapter" data-level="3.7.2" data-path="03_introduction.html"><a href="03_introduction.html#データフレームの要素へのアクセス"><i class="fa fa-check"></i><b>3.7.2</b> データフレームの要素へのアクセス</a></li>
<li class="chapter" data-level="3.7.3" data-path="03_introduction.html"><a href="03_introduction.html#その他のデータフレームの機能"><i class="fa fa-check"></i><b>3.7.3</b> その他のデータフレームの機能</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="03_introduction.html"><a href="03_introduction.html#リスト"><i class="fa fa-check"></i><b>3.8</b> リスト</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="03_introduction.html"><a href="03_introduction.html#リストの作成"><i class="fa fa-check"></i><b>3.8.1</b> リストの作成</a></li>
<li class="chapter" data-level="3.8.2" data-path="03_introduction.html"><a href="03_introduction.html#リストの要素へのアクセス"><i class="fa fa-check"></i><b>3.8.2</b> リストの要素へのアクセス</a></li>
<li class="chapter" data-level="3.8.3" data-path="03_introduction.html"><a href="03_introduction.html#リストに要素を追加"><i class="fa fa-check"></i><b>3.8.3</b> リストに要素を追加</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="03_introduction.html"><a href="03_introduction.html#文字列操作"><i class="fa fa-check"></i><b>3.9</b> 文字列操作</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="03_introduction.html"><a href="03_introduction.html#文字列の連結"><i class="fa fa-check"></i><b>3.9.1</b> 文字列の連結</a></li>
<li class="chapter" data-level="3.9.2" data-path="03_introduction.html"><a href="03_introduction.html#文字列の切り出し"><i class="fa fa-check"></i><b>3.9.2</b> 文字列の切り出し</a></li>
<li class="chapter" data-level="3.9.3" data-path="03_introduction.html"><a href="03_introduction.html#文字列の検出"><i class="fa fa-check"></i><b>3.9.3</b> 文字列の検出</a></li>
<li class="chapter" data-level="3.9.4" data-path="03_introduction.html"><a href="03_introduction.html#文字列の置換"><i class="fa fa-check"></i><b>3.9.4</b> 文字列の置換</a></li>
<li class="chapter" data-level="3.9.5" data-path="03_introduction.html"><a href="03_introduction.html#文字列の変換"><i class="fa fa-check"></i><b>3.9.5</b> 文字列の変換</a></li>
<li class="chapter" data-level="3.9.6" data-path="03_introduction.html"><a href="03_introduction.html#文字列のパディング"><i class="fa fa-check"></i><b>3.9.6</b> 文字列のパディング</a></li>
<li class="chapter" data-level="3.9.7" data-path="03_introduction.html"><a href="03_introduction.html#文字列によるプログラム実行"><i class="fa fa-check"></i><b>3.9.7</b> 文字列によるプログラム実行</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="03_introduction.html"><a href="03_introduction.html#制御構文"><i class="fa fa-check"></i><b>3.10</b> 制御構文</a>
<ul>
<li class="chapter" data-level="3.10.1" data-path="03_introduction.html"><a href="03_introduction.html#ifelse文"><i class="fa fa-check"></i><b>3.10.1</b> if/else文</a></li>
<li class="chapter" data-level="3.10.2" data-path="03_introduction.html"><a href="03_introduction.html#forループ"><i class="fa fa-check"></i><b>3.10.2</b> forループ</a></li>
<li class="chapter" data-level="3.10.3" data-path="03_introduction.html"><a href="03_introduction.html#whileループ"><i class="fa fa-check"></i><b>3.10.3</b> whileループ</a></li>
<li class="chapter" data-level="3.10.4" data-path="03_introduction.html"><a href="03_introduction.html#breakによる繰り返しの終了"><i class="fa fa-check"></i><b>3.10.4</b> breakによる繰り返しの終了</a></li>
<li class="chapter" data-level="3.10.5" data-path="03_introduction.html"><a href="03_introduction.html#nextによる処理のスキップ"><i class="fa fa-check"></i><b>3.10.5</b> nextによる処理のスキップ</a></li>
<li class="chapter" data-level="3.10.6" data-path="03_introduction.html"><a href="03_introduction.html#tryによるエラー処理"><i class="fa fa-check"></i><b>3.10.6</b> tryによるエラー処理</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="03_introduction.html"><a href="03_introduction.html#ファイル操作"><i class="fa fa-check"></i><b>3.11</b> ファイル操作</a>
<ul>
<li class="chapter" data-level="3.11.1" data-path="03_introduction.html"><a href="03_introduction.html#ディレクトリ関連"><i class="fa fa-check"></i><b>3.11.1</b> ディレクトリ関連</a></li>
<li class="chapter" data-level="3.11.2" data-path="03_introduction.html"><a href="03_introduction.html#ファイル関連"><i class="fa fa-check"></i><b>3.11.2</b> ファイル関連</a></li>
<li class="chapter" data-level="3.11.3" data-path="03_introduction.html"><a href="03_introduction.html#ファイルのダウンロード"><i class="fa fa-check"></i><b>3.11.3</b> ファイルのダウンロード</a></li>
</ul></li>
<li class="chapter" data-level="3.12" data-path="03_introduction.html"><a href="03_introduction.html#データの読み込み"><i class="fa fa-check"></i><b>3.12</b> データの読み込み</a>
<ul>
<li class="chapter" data-level="3.12.1" data-path="03_introduction.html"><a href="03_introduction.html#csvデータ"><i class="fa fa-check"></i><b>3.12.1</b> CSVデータ</a></li>
<li class="chapter" data-level="3.12.2" data-path="03_introduction.html"><a href="03_introduction.html#xlsxlsx形式データ"><i class="fa fa-check"></i><b>3.12.2</b> xls・xlsx形式データ</a></li>
<li class="chapter" data-level="3.12.3" data-path="03_introduction.html"><a href="03_introduction.html#xlsx形式データ"><i class="fa fa-check"></i><b>3.12.3</b> xlsx形式データ</a></li>
<li class="chapter" data-level="3.12.4" data-path="03_introduction.html"><a href="03_introduction.html#複数データの読み込み"><i class="fa fa-check"></i><b>3.12.4</b> 複数データの読み込み</a></li>
<li class="chapter" data-level="3.12.5" data-path="03_introduction.html"><a href="03_introduction.html#excelの日付値の修正"><i class="fa fa-check"></i><b>3.12.5</b> Excelの日付値の修正</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="03_introduction.html"><a href="03_introduction.html#データの書き出し"><i class="fa fa-check"></i><b>3.13</b> データの書き出し</a>
<ul>
<li class="chapter" data-level="3.13.1" data-path="03_introduction.html"><a href="03_introduction.html#csvデータの書き出し"><i class="fa fa-check"></i><b>3.13.1</b> CSVデータの書き出し</a></li>
</ul></li>
<li class="chapter" data-level="3.14" data-path="03_introduction.html"><a href="03_introduction.html#オブジェクトのセーブロード"><i class="fa fa-check"></i><b>3.14</b> オブジェクトのセーブ・ロード</a>
<ul>
<li class="chapter" data-level="3.14.1" data-path="03_introduction.html"><a href="03_introduction.html#セーブ"><i class="fa fa-check"></i><b>3.14.1</b> セーブ</a></li>
<li class="chapter" data-level="3.14.2" data-path="03_introduction.html"><a href="03_introduction.html#ロード"><i class="fa fa-check"></i><b>3.14.2</b> ロード</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="04_tidyverse.html"><a href="04_tidyverse.html"><i class="fa fa-check"></i><b>4</b> tidyverseによるデータ操作</a>
<ul>
<li class="chapter" data-level="4.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#第4章の準備"><i class="fa fa-check"></i><b>4.1</b> 第4章の準備</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#パッケージのインポート-1"><i class="fa fa-check"></i><b>4.1.1</b> パッケージのインポート</a></li>
<li class="chapter" data-level="4.1.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#外部データセットの取得"><i class="fa fa-check"></i><b>4.1.2</b> 外部データセットの取得</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#tidyverseとは"><i class="fa fa-check"></i><b>4.2</b> tidyverseとは</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#tidy-data縦型横型データ"><i class="fa fa-check"></i><b>4.2.1</b> tidy data（縦型・横型データ）</a></li>
<li class="chapter" data-level="4.2.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#tidyverseの特徴"><i class="fa fa-check"></i><b>4.2.2</b> tidyverseの特徴</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列の選択"><i class="fa fa-check"></i><b>4.3</b> 列の選択</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列名で選択"><i class="fa fa-check"></i><b>4.3.1</b> 列名で選択</a></li>
<li class="chapter" data-level="4.3.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列名ベクトルで選択"><i class="fa fa-check"></i><b>4.3.2</b> 列名ベクトルで選択</a></li>
<li class="chapter" data-level="4.3.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列を非選択削除"><i class="fa fa-check"></i><b>4.3.3</b> 列を非選択（削除）</a></li>
<li class="chapter" data-level="4.3.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#特定文字列で始まる列を選択"><i class="fa fa-check"></i><b>4.3.4</b> 特定文字列で始まる列を選択</a></li>
<li class="chapter" data-level="4.3.5" data-path="04_tidyverse.html"><a href="04_tidyverse.html#特定文字列で終わる列を選択"><i class="fa fa-check"></i><b>4.3.5</b> 特定文字列で終わる列を選択</a></li>
<li class="chapter" data-level="4.3.6" data-path="04_tidyverse.html"><a href="04_tidyverse.html#特定文字列を含む列を選択"><i class="fa fa-check"></i><b>4.3.6</b> 特定文字列を含む列を選択</a></li>
<li class="chapter" data-level="4.3.7" data-path="04_tidyverse.html"><a href="04_tidyverse.html#特定の型の列を選択"><i class="fa fa-check"></i><b>4.3.7</b> 特定の型の列を選択</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列名の変更"><i class="fa fa-check"></i><b>4.4</b> 列名の変更</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列名の変更-1"><i class="fa fa-check"></i><b>4.4.1</b> 列名の変更</a></li>
<li class="chapter" data-level="4.4.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数列名の一括変更"><i class="fa fa-check"></i><b>4.4.2</b> 複数列名の一括変更</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="04_tidyverse.html"><a href="04_tidyverse.html#行のスライスとサンプリング"><i class="fa fa-check"></i><b>4.5</b> 行のスライスとサンプリング</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#行のスライス"><i class="fa fa-check"></i><b>4.5.1</b> 行のスライス</a></li>
<li class="chapter" data-level="4.5.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#サンプリング"><i class="fa fa-check"></i><b>4.5.2</b> サンプリング</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="04_tidyverse.html"><a href="04_tidyverse.html#行のフィルタ"><i class="fa fa-check"></i><b>4.6</b> 行のフィルタ</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#条件に一致する行"><i class="fa fa-check"></i><b>4.6.1</b> 条件に一致する行</a></li>
<li class="chapter" data-level="4.6.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#条件に一致しない行not条件"><i class="fa fa-check"></i><b>4.6.2</b> 条件に一致しない行（NOT条件）</a></li>
<li class="chapter" data-level="4.6.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数条件"><i class="fa fa-check"></i><b>4.6.3</b> 複数条件</a></li>
<li class="chapter" data-level="4.6.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#andor条件を明示的に指定した複数条件"><i class="fa fa-check"></i><b>4.6.4</b> AND・OR条件を明示的に指定した複数条件</a></li>
<li class="chapter" data-level="4.6.5" data-path="04_tidyverse.html"><a href="04_tidyverse.html#in演算子によるor条件"><i class="fa fa-check"></i><b>4.6.5</b> <code>%in%</code>演算子によるOR条件</a></li>
<li class="chapter" data-level="4.6.6" data-path="04_tidyverse.html"><a href="04_tidyverse.html#or条件の否定"><i class="fa fa-check"></i><b>4.6.6</b> OR条件の否定</a></li>
<li class="chapter" data-level="4.6.7" data-path="04_tidyverse.html"><a href="04_tidyverse.html#関数による条件指定"><i class="fa fa-check"></i><b>4.6.7</b> 関数による条件指定</a></li>
<li class="chapter" data-level="4.6.8" data-path="04_tidyverse.html"><a href="04_tidyverse.html#論理値を返す関数による条件指定"><i class="fa fa-check"></i><b>4.6.8</b> 論理値を返す関数による条件指定</a></li>
<li class="chapter" data-level="4.6.9" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数列の一括条件指定"><i class="fa fa-check"></i><b>4.6.9</b> 複数列の一括条件指定</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="04_tidyverse.html"><a href="04_tidyverse.html#行の並べ替え"><i class="fa fa-check"></i><b>4.7</b> 行の並べ替え</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#昇順ソート"><i class="fa fa-check"></i><b>4.7.1</b> 昇順ソート</a></li>
<li class="chapter" data-level="4.7.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#降順ソート"><i class="fa fa-check"></i><b>4.7.2</b> 降順ソート</a></li>
<li class="chapter" data-level="4.7.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#降順ソート日付型"><i class="fa fa-check"></i><b>4.7.3</b> 降順ソート（日付型）</a></li>
<li class="chapter" data-level="4.7.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数条件によるソート"><i class="fa fa-check"></i><b>4.7.4</b> 複数条件によるソート</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="04_tidyverse.html"><a href="04_tidyverse.html#列の作成修正"><i class="fa fa-check"></i><b>4.8</b> 列の作成・修正</a>
<ul>
<li class="chapter" data-level="4.8.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#新たな列の作成"><i class="fa fa-check"></i><b>4.8.1</b> 新たな列の作成</a></li>
<li class="chapter" data-level="4.8.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#既存の列の修正"><i class="fa fa-check"></i><b>4.8.2</b> 既存の列の修正</a></li>
<li class="chapter" data-level="4.8.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#条件付き系列の作成"><i class="fa fa-check"></i><b>4.8.3</b> 条件付き系列の作成</a></li>
<li class="chapter" data-level="4.8.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数列の一括処理"><i class="fa fa-check"></i><b>4.8.4</b> 複数列の一括処理</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="04_tidyverse.html"><a href="04_tidyverse.html#グループ化"><i class="fa fa-check"></i><b>4.9</b> グループ化</a>
<ul>
<li class="chapter" data-level="4.9.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#単一の列でグループ化"><i class="fa fa-check"></i><b>4.9.1</b> 単一の列でグループ化</a></li>
<li class="chapter" data-level="4.9.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数の列でグループ化"><i class="fa fa-check"></i><b>4.9.2</b> 複数の列でグループ化</a></li>
<li class="chapter" data-level="4.9.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#グループ化フィルタ"><i class="fa fa-check"></i><b>4.9.3</b> グループ化＆フィルタ</a></li>
<li class="chapter" data-level="4.9.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#グループ化の解除"><i class="fa fa-check"></i><b>4.9.4</b> グループ化の解除</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="04_tidyverse.html"><a href="04_tidyverse.html#集計"><i class="fa fa-check"></i><b>4.10</b> 集計</a>
<ul>
<li class="chapter" data-level="4.10.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#グループ別の集計"><i class="fa fa-check"></i><b>4.10.1</b> グループ別の集計</a></li>
<li class="chapter" data-level="4.10.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#クロス集計"><i class="fa fa-check"></i><b>4.10.2</b> クロス集計</a></li>
<li class="chapter" data-level="4.10.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#複数列の一括処理-1"><i class="fa fa-check"></i><b>4.10.3</b> 複数列の一括処理</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="04_tidyverse.html"><a href="04_tidyverse.html#カウント"><i class="fa fa-check"></i><b>4.11</b> カウント</a>
<ul>
<li class="chapter" data-level="4.11.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#変数のカウント"><i class="fa fa-check"></i><b>4.11.1</b> 1変数のカウント</a></li>
<li class="chapter" data-level="4.11.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#多変数のカウント"><i class="fa fa-check"></i><b>4.11.2</b> 多変数のカウント</a></li>
<li class="chapter" data-level="4.11.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#条件付きカウント"><i class="fa fa-check"></i><b>4.11.3</b> 条件付きカウント</a></li>
<li class="chapter" data-level="4.11.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#要素の種類をカウント"><i class="fa fa-check"></i><b>4.11.4</b> 要素の種類をカウント</a></li>
</ul></li>
<li class="chapter" data-level="4.12" data-path="04_tidyverse.html"><a href="04_tidyverse.html#縦型横型の変換"><i class="fa fa-check"></i><b>4.12</b> 縦型・横型の変換</a>
<ul>
<li class="chapter" data-level="4.12.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#横型データを縦型データに変換"><i class="fa fa-check"></i><b>4.12.1</b> 横型データを縦型データに変換</a></li>
<li class="chapter" data-level="4.12.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#縦型データを横型データに変換"><i class="fa fa-check"></i><b>4.12.2</b> 縦型データを横型データに変換</a></li>
</ul></li>
<li class="chapter" data-level="4.13" data-path="04_tidyverse.html"><a href="04_tidyverse.html#データの結合"><i class="fa fa-check"></i><b>4.13</b> データの結合</a>
<ul>
<li class="chapter" data-level="4.13.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#内部結合"><i class="fa fa-check"></i><b>4.13.1</b> 内部結合</a></li>
<li class="chapter" data-level="4.13.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#左外部結合"><i class="fa fa-check"></i><b>4.13.2</b> 左外部結合</a></li>
<li class="chapter" data-level="4.13.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#右外部結合"><i class="fa fa-check"></i><b>4.13.3</b> 右外部結合</a></li>
<li class="chapter" data-level="4.13.4" data-path="04_tidyverse.html"><a href="04_tidyverse.html#完全外部結合"><i class="fa fa-check"></i><b>4.13.4</b> 完全外部結合</a></li>
</ul></li>
<li class="chapter" data-level="4.14" data-path="04_tidyverse.html"><a href="04_tidyverse.html#重複処理"><i class="fa fa-check"></i><b>4.14</b> 重複処理</a>
<ul>
<li class="chapter" data-level="4.14.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#重複行の削除"><i class="fa fa-check"></i><b>4.14.1</b> 重複行の削除</a></li>
<li class="chapter" data-level="4.14.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#重複行の抽出"><i class="fa fa-check"></i><b>4.14.2</b> 重複行の抽出</a></li>
</ul></li>
<li class="chapter" data-level="4.15" data-path="04_tidyverse.html"><a href="04_tidyverse.html#欠損値処理"><i class="fa fa-check"></i><b>4.15</b> 欠損値処理</a>
<ul>
<li class="chapter" data-level="4.15.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#naの削除"><i class="fa fa-check"></i><b>4.15.1</b> NAの削除</a></li>
<li class="chapter" data-level="4.15.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#naの置換"><i class="fa fa-check"></i><b>4.15.2</b> NAの置換</a></li>
<li class="chapter" data-level="4.15.3" data-path="04_tidyverse.html"><a href="04_tidyverse.html#naのフィル"><i class="fa fa-check"></i><b>4.15.3</b> NAのフィル</a></li>
</ul></li>
<li class="chapter" data-level="4.16" data-path="04_tidyverse.html"><a href="04_tidyverse.html#補完処理"><i class="fa fa-check"></i><b>4.16</b> 補完処理</a>
<ul>
<li class="chapter" data-level="4.16.1" data-path="04_tidyverse.html"><a href="04_tidyverse.html#組み合わせ候補の補完"><i class="fa fa-check"></i><b>4.16.1</b> 組み合わせ候補の補完</a></li>
<li class="chapter" data-level="4.16.2" data-path="04_tidyverse.html"><a href="04_tidyverse.html#時系列データの補完"><i class="fa fa-check"></i><b>4.16.2</b> 時系列データの補完</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="05_plot.html"><a href="05_plot.html"><i class="fa fa-check"></i><b>5</b> ggplot2によるグラフ作成</a>
<ul>
<li class="chapter" data-level="5.1" data-path="05_plot.html"><a href="05_plot.html#第5章の準備"><i class="fa fa-check"></i><b>5.1</b> 第5章の準備</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="05_plot.html"><a href="05_plot.html#パッケージのインポート-2"><i class="fa fa-check"></i><b>5.1.1</b> パッケージのインポート</a></li>
<li class="chapter" data-level="5.1.2" data-path="05_plot.html"><a href="05_plot.html#外部データセットの取得-1"><i class="fa fa-check"></i><b>5.1.2</b> 外部データセットの取得</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="05_plot.html"><a href="05_plot.html#ggplot2とは"><i class="fa fa-check"></i><b>5.2</b> ggplot2とは</a></li>
<li class="chapter" data-level="5.3" data-path="05_plot.html"><a href="05_plot.html#ggplot2の設定"><i class="fa fa-check"></i><b>5.3</b> ggplot2の設定</a></li>
<li class="chapter" data-level="5.4" data-path="05_plot.html"><a href="05_plot.html#gui形式の直感的なグラフ作成"><i class="fa fa-check"></i><b>5.4</b> GUI形式の直感的なグラフ作成</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="05_plot.html"><a href="05_plot.html#esquisseパッケージ"><i class="fa fa-check"></i><b>5.4.1</b> esquisseパッケージ</a></li>
<li class="chapter" data-level="5.4.2" data-path="05_plot.html"><a href="05_plot.html#ggplotguiパッケージ"><i class="fa fa-check"></i><b>5.4.2</b> ggplotguiパッケージ</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="05_plot.html"><a href="05_plot.html#次元の度数分布離散型"><i class="fa fa-check"></i><b>5.5</b> 1次元の度数分布（離散型）</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="05_plot.html"><a href="05_plot.html#度数棒グラフの基本形"><i class="fa fa-check"></i><b>5.5.1</b> 度数棒グラフの基本形</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="05_plot.html"><a href="05_plot.html#次元の度数分布連続型"><i class="fa fa-check"></i><b>5.6</b> 1次元の度数分布（連続型）</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="05_plot.html"><a href="05_plot.html#ヒストグラムの基本形"><i class="fa fa-check"></i><b>5.6.1</b> ヒストグラムの基本形</a></li>
<li class="chapter" data-level="5.6.2" data-path="05_plot.html"><a href="05_plot.html#横並びヒストグラム"><i class="fa fa-check"></i><b>5.6.2</b> 横並びヒストグラム</a></li>
<li class="chapter" data-level="5.6.3" data-path="05_plot.html"><a href="05_plot.html#積上ヒストグラム"><i class="fa fa-check"></i><b>5.6.3</b> 積上ヒストグラム</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="05_plot.html"><a href="05_plot.html#次元の密度グラフ"><i class="fa fa-check"></i><b>5.7</b> 1次元の密度グラフ</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="05_plot.html"><a href="05_plot.html#密度グラフの基本形"><i class="fa fa-check"></i><b>5.7.1</b> 密度グラフの基本形</a></li>
<li class="chapter" data-level="5.7.2" data-path="05_plot.html"><a href="05_plot.html#横並び密度グラフ"><i class="fa fa-check"></i><b>5.7.2</b> 横並び密度グラフ</a></li>
<li class="chapter" data-level="5.7.3" data-path="05_plot.html"><a href="05_plot.html#積上密度グラフ"><i class="fa fa-check"></i><b>5.7.3</b> 積上密度グラフ</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="05_plot.html"><a href="05_plot.html#次元の度数分布離散型-1"><i class="fa fa-check"></i><b>5.8</b> 2次元の度数分布（離散型）</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="05_plot.html"><a href="05_plot.html#度数バブルチャートの基本形"><i class="fa fa-check"></i><b>5.8.1</b> 度数バブルチャートの基本形</a></li>
<li class="chapter" data-level="5.8.2" data-path="05_plot.html"><a href="05_plot.html#度数ヒートマップの基本形"><i class="fa fa-check"></i><b>5.8.2</b> 度数ヒートマップの基本形</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="05_plot.html"><a href="05_plot.html#次元の度数分布連続型-1"><i class="fa fa-check"></i><b>5.9</b> 2次元の度数分布（連続型）</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="05_plot.html"><a href="05_plot.html#度数ヒートマップの基本形-1"><i class="fa fa-check"></i><b>5.9.1</b> 度数ヒートマップの基本形</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="05_plot.html"><a href="05_plot.html#次元の密度グラフ-1"><i class="fa fa-check"></i><b>5.10</b> 2次元の密度グラフ</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="05_plot.html"><a href="05_plot.html#次元密度グラフの基本形"><i class="fa fa-check"></i><b>5.10.1</b> 2次元密度グラフの基本形</a></li>
<li class="chapter" data-level="5.10.2" data-path="05_plot.html"><a href="05_plot.html#次元密度グラフの塗りつぶし版"><i class="fa fa-check"></i><b>5.10.2</b> 2次元密度グラフの塗りつぶし版</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="05_plot.html"><a href="05_plot.html#qqプロット"><i class="fa fa-check"></i><b>5.11</b> QQプロット</a></li>
<li class="chapter" data-level="5.12" data-path="05_plot.html"><a href="05_plot.html#散布図バブルチャート"><i class="fa fa-check"></i><b>5.12</b> 散布図・バブルチャート</a>
<ul>
<li class="chapter" data-level="5.12.1" data-path="05_plot.html"><a href="05_plot.html#散布図の基本形"><i class="fa fa-check"></i><b>5.12.1</b> 散布図の基本形</a></li>
<li class="chapter" data-level="5.12.2" data-path="05_plot.html"><a href="05_plot.html#バブルチャートの基本形"><i class="fa fa-check"></i><b>5.12.2</b> バブルチャートの基本形</a></li>
<li class="chapter" data-level="5.12.3" data-path="05_plot.html"><a href="05_plot.html#散布図にコネクタ線を追加"><i class="fa fa-check"></i><b>5.12.3</b> 散布図にコネクタ線を追加</a></li>
<li class="chapter" data-level="5.12.4" data-path="05_plot.html"><a href="05_plot.html#散布図に近似曲線を追加"><i class="fa fa-check"></i><b>5.12.4</b> 散布図に近似曲線を追加</a></li>
<li class="chapter" data-level="5.12.5" data-path="05_plot.html"><a href="05_plot.html#散布図にラベルを追加"><i class="fa fa-check"></i><b>5.12.5</b> 散布図にラベルを追加</a></li>
<li class="chapter" data-level="5.12.6" data-path="05_plot.html"><a href="05_plot.html#バブルチャートにラベルを追加"><i class="fa fa-check"></i><b>5.12.6</b> バブルチャートにラベルを追加</a></li>
</ul></li>
<li class="chapter" data-level="5.13" data-path="05_plot.html"><a href="05_plot.html#棒グラフ"><i class="fa fa-check"></i><b>5.13</b> 棒グラフ</a>
<ul>
<li class="chapter" data-level="5.13.1" data-path="05_plot.html"><a href="05_plot.html#縦棒グラフの基本形"><i class="fa fa-check"></i><b>5.13.1</b> 縦棒グラフの基本形</a></li>
<li class="chapter" data-level="5.13.2" data-path="05_plot.html"><a href="05_plot.html#横棒グラフ"><i class="fa fa-check"></i><b>5.13.2</b> 横棒グラフ</a></li>
<li class="chapter" data-level="5.13.3" data-path="05_plot.html"><a href="05_plot.html#縦棒グラフの順序並べ替え"><i class="fa fa-check"></i><b>5.13.3</b> 縦棒グラフの順序並べ替え</a></li>
<li class="chapter" data-level="5.13.4" data-path="05_plot.html"><a href="05_plot.html#縦棒グラフにラベルを追加"><i class="fa fa-check"></i><b>5.13.4</b> 縦棒グラフにラベルを追加</a></li>
<li class="chapter" data-level="5.13.5" data-path="05_plot.html"><a href="05_plot.html#横並び縦棒グラフ"><i class="fa fa-check"></i><b>5.13.5</b> 横並び縦棒グラフ</a></li>
<li class="chapter" data-level="5.13.6" data-path="05_plot.html"><a href="05_plot.html#積上縦棒グラフ"><i class="fa fa-check"></i><b>5.13.6</b> 積上縦棒グラフ</a></li>
<li class="chapter" data-level="5.13.7" data-path="05_plot.html"><a href="05_plot.html#積上縦棒グラフにラベルを追加"><i class="fa fa-check"></i><b>5.13.7</b> 積上縦棒グラフにラベルを追加</a></li>
<li class="chapter" data-level="5.13.8" data-path="05_plot.html"><a href="05_plot.html#積上縦棒グラフ-1"><i class="fa fa-check"></i><b>5.13.8</b> 100％積上縦棒グラフ</a></li>
<li class="chapter" data-level="5.13.9" data-path="05_plot.html"><a href="05_plot.html#積上縦棒グラフにラベルを追加-1"><i class="fa fa-check"></i><b>5.13.9</b> 100％積上縦棒グラフにラベルを追加</a></li>
</ul></li>
<li class="chapter" data-level="5.14" data-path="05_plot.html"><a href="05_plot.html#円グラフ"><i class="fa fa-check"></i><b>5.14</b> 円グラフ</a>
<ul>
<li class="chapter" data-level="5.14.1" data-path="05_plot.html"><a href="05_plot.html#円グラフの基本形"><i class="fa fa-check"></i><b>5.14.1</b> 円グラフの基本形</a></li>
</ul></li>
<li class="chapter" data-level="5.15" data-path="05_plot.html"><a href="05_plot.html#折れ線グラフ"><i class="fa fa-check"></i><b>5.15</b> 折れ線グラフ</a>
<ul>
<li class="chapter" data-level="5.15.1" data-path="05_plot.html"><a href="05_plot.html#折れ線グラフの基本形"><i class="fa fa-check"></i><b>5.15.1</b> 折れ線グラフの基本形</a></li>
<li class="chapter" data-level="5.15.2" data-path="05_plot.html"><a href="05_plot.html#折れ線グラフにマーカーを追加"><i class="fa fa-check"></i><b>5.15.2</b> 折れ線グラフにマーカーを追加</a></li>
<li class="chapter" data-level="5.15.3" data-path="05_plot.html"><a href="05_plot.html#折れ線グラフに系列ラベルを追加"><i class="fa fa-check"></i><b>5.15.3</b> 折れ線グラフに系列ラベルを追加</a></li>
</ul></li>
<li class="chapter" data-level="5.16" data-path="05_plot.html"><a href="05_plot.html#ステップグラフ"><i class="fa fa-check"></i><b>5.16</b> ステップグラフ</a>
<ul>
<li class="chapter" data-level="5.16.1" data-path="05_plot.html"><a href="05_plot.html#ステップグラフの基本形"><i class="fa fa-check"></i><b>5.16.1</b> ステップグラフの基本形</a></li>
</ul></li>
<li class="chapter" data-level="5.17" data-path="05_plot.html"><a href="05_plot.html#面グラフ"><i class="fa fa-check"></i><b>5.17</b> 面グラフ</a>
<ul>
<li class="chapter" data-level="5.17.1" data-path="05_plot.html"><a href="05_plot.html#面グラフの基本形"><i class="fa fa-check"></i><b>5.17.1</b> 面グラフの基本形</a></li>
<li class="chapter" data-level="5.17.2" data-path="05_plot.html"><a href="05_plot.html#積上面グラフ"><i class="fa fa-check"></i><b>5.17.2</b> 積上面グラフ</a></li>
<li class="chapter" data-level="5.17.3" data-path="05_plot.html"><a href="05_plot.html#リボングラフの基本形"><i class="fa fa-check"></i><b>5.17.3</b> リボングラフの基本形</a></li>
<li class="chapter" data-level="5.17.4" data-path="05_plot.html"><a href="05_plot.html#リボングラフに折れ線グラフを追加"><i class="fa fa-check"></i><b>5.17.4</b> リボングラフに折れ線グラフを追加</a></li>
</ul></li>
<li class="chapter" data-level="5.18" data-path="05_plot.html"><a href="05_plot.html#箱ひげ図ヴァイオリングラフ"><i class="fa fa-check"></i><b>5.18</b> 箱ひげ図・ヴァイオリングラフ</a>
<ul>
<li class="chapter" data-level="5.18.1" data-path="05_plot.html"><a href="05_plot.html#箱ひげ図の基本形"><i class="fa fa-check"></i><b>5.18.1</b> 箱ひげ図の基本形</a></li>
<li class="chapter" data-level="5.18.2" data-path="05_plot.html"><a href="05_plot.html#箱ひげ図に個別データを追加"><i class="fa fa-check"></i><b>5.18.2</b> 箱ひげ図に個別データを追加</a></li>
<li class="chapter" data-level="5.18.3" data-path="05_plot.html"><a href="05_plot.html#横並び箱ひげ図"><i class="fa fa-check"></i><b>5.18.3</b> 横並び箱ひげ図</a></li>
<li class="chapter" data-level="5.18.4" data-path="05_plot.html"><a href="05_plot.html#ヴァイオリングラフの基本形"><i class="fa fa-check"></i><b>5.18.4</b> ヴァイオリングラフの基本形</a></li>
<li class="chapter" data-level="5.18.5" data-path="05_plot.html"><a href="05_plot.html#ヴァイオリングラフに個別データを追加"><i class="fa fa-check"></i><b>5.18.5</b> ヴァイオリングラフに個別データを追加</a></li>
</ul></li>
<li class="chapter" data-level="5.19" data-path="05_plot.html"><a href="05_plot.html#ドットプロット"><i class="fa fa-check"></i><b>5.19</b> ドットプロット</a>
<ul>
<li class="chapter" data-level="5.19.1" data-path="05_plot.html"><a href="05_plot.html#ドットプロットの基本形"><i class="fa fa-check"></i><b>5.19.1</b> ドットプロットの基本形</a></li>
</ul></li>
<li class="chapter" data-level="5.20" data-path="05_plot.html"><a href="05_plot.html#複合グラフファセット"><i class="fa fa-check"></i><b>5.20</b> 複合グラフ（ファセット）</a>
<ul>
<li class="chapter" data-level="5.20.1" data-path="05_plot.html"><a href="05_plot.html#行方向の複合グラフ"><i class="fa fa-check"></i><b>5.20.1</b> 行方向の複合グラフ</a></li>
<li class="chapter" data-level="5.20.2" data-path="05_plot.html"><a href="05_plot.html#列方向の複合グラフ"><i class="fa fa-check"></i><b>5.20.2</b> 列方向の複合グラフ</a></li>
<li class="chapter" data-level="5.20.3" data-path="05_plot.html"><a href="05_plot.html#行列方向の複合グラフ"><i class="fa fa-check"></i><b>5.20.3</b> 行・列方向の複合グラフ</a></li>
<li class="chapter" data-level="5.20.4" data-path="05_plot.html"><a href="05_plot.html#行数列数を指定した複合グラフ"><i class="fa fa-check"></i><b>5.20.4</b> 行数・列数を指定した複合グラフ</a></li>
<li class="chapter" data-level="5.20.5" data-path="05_plot.html"><a href="05_plot.html#複合グラフの設定"><i class="fa fa-check"></i><b>5.20.5</b> 複合グラフの設定</a></li>
</ul></li>
<li class="chapter" data-level="5.21" data-path="05_plot.html"><a href="05_plot.html#地図ファセット"><i class="fa fa-check"></i><b>5.21</b> 地図ファセット</a></li>
<li class="chapter" data-level="5.22" data-path="05_plot.html"><a href="05_plot.html#補助線"><i class="fa fa-check"></i><b>5.22</b> 補助線</a></li>
<li class="chapter" data-level="5.23" data-path="05_plot.html"><a href="05_plot.html#設定色"><i class="fa fa-check"></i><b>5.23</b> 設定：色</a>
<ul>
<li class="chapter" data-level="5.23.1" data-path="05_plot.html"><a href="05_plot.html#離散型手動指定"><i class="fa fa-check"></i><b>5.23.1</b> 離散型：手動指定</a></li>
<li class="chapter" data-level="5.23.2" data-path="05_plot.html"><a href="05_plot.html#離散型brewer"><i class="fa fa-check"></i><b>5.23.2</b> 離散型：Brewer</a></li>
<li class="chapter" data-level="5.23.3" data-path="05_plot.html"><a href="05_plot.html#離散型viridis"><i class="fa fa-check"></i><b>5.23.3</b> 離散型：Viridis</a></li>
<li class="chapter" data-level="5.23.4" data-path="05_plot.html"><a href="05_plot.html#離散型ggsci"><i class="fa fa-check"></i><b>5.23.4</b> 離散型：ggsci</a></li>
<li class="chapter" data-level="5.23.5" data-path="05_plot.html"><a href="05_plot.html#連続型distiller"><i class="fa fa-check"></i><b>5.23.5</b> 連続型：distiller</a></li>
<li class="chapter" data-level="5.23.6" data-path="05_plot.html"><a href="05_plot.html#連続型viridis"><i class="fa fa-check"></i><b>5.23.6</b> 連続型：Viridis</a></li>
<li class="chapter" data-level="5.23.7" data-path="05_plot.html"><a href="05_plot.html#連続型gradient"><i class="fa fa-check"></i><b>5.23.7</b> 連続型：gradient</a></li>
</ul></li>
<li class="chapter" data-level="5.24" data-path="05_plot.html"><a href="05_plot.html#設定軸"><i class="fa fa-check"></i><b>5.24</b> 設定：軸</a>
<ul>
<li class="chapter" data-level="5.24.1" data-path="05_plot.html"><a href="05_plot.html#x軸連続型y軸連続型"><i class="fa fa-check"></i><b>5.24.1</b> X軸：連続型、Y軸：連続型</a></li>
<li class="chapter" data-level="5.24.2" data-path="05_plot.html"><a href="05_plot.html#対数目盛"><i class="fa fa-check"></i><b>5.24.2</b> 対数目盛</a></li>
<li class="chapter" data-level="5.24.3" data-path="05_plot.html"><a href="05_plot.html#x軸日付型y軸連続型"><i class="fa fa-check"></i><b>5.24.3</b> X軸：日付型、Y軸：連続型</a></li>
</ul></li>
<li class="chapter" data-level="5.25" data-path="05_plot.html"><a href="05_plot.html#設定パネル目盛線"><i class="fa fa-check"></i><b>5.25</b> 設定：パネル目盛線</a></li>
<li class="chapter" data-level="5.26" data-path="05_plot.html"><a href="05_plot.html#設定凡例"><i class="fa fa-check"></i><b>5.26</b> 設定：凡例</a></li>
<li class="chapter" data-level="5.27" data-path="05_plot.html"><a href="05_plot.html#設定タイトルキャプション"><i class="fa fa-check"></i><b>5.27</b> 設定：タイトル・キャプション</a></li>
<li class="chapter" data-level="5.28" data-path="05_plot.html"><a href="05_plot.html#設定フォントマージン"><i class="fa fa-check"></i><b>5.28</b> 設定：フォント・マージン</a></li>
<li class="chapter" data-level="5.29" data-path="05_plot.html"><a href="05_plot.html#グラフの保存"><i class="fa fa-check"></i><b>5.29</b> グラフの保存</a></li>
<li class="chapter" data-level="5.30" data-path="05_plot.html"><a href="05_plot.html#実例"><i class="fa fa-check"></i><b>5.30</b> 実例</a>
<ul>
<li class="chapter" data-level="5.30.1" data-path="05_plot.html"><a href="05_plot.html#実例1折れ線グラフ"><i class="fa fa-check"></i><b>5.30.1</b> 実例1：折れ線グラフ</a></li>
<li class="chapter" data-level="5.30.2" data-path="05_plot.html"><a href="05_plot.html#実例2積上棒グラフ"><i class="fa fa-check"></i><b>5.30.2</b> 実例2：積上棒グラフ</a></li>
<li class="chapter" data-level="5.30.3" data-path="05_plot.html"><a href="05_plot.html#実例3箱ひげ図"><i class="fa fa-check"></i><b>5.30.3</b> 実例3：箱ひげ図</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="06_eda.html"><a href="06_eda.html"><i class="fa fa-check"></i><b>6</b> 探索的データ分析</a>
<ul>
<li class="chapter" data-level="6.1" data-path="06_eda.html"><a href="06_eda.html#第6章の準備"><i class="fa fa-check"></i><b>6.1</b> 第6章の準備</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="06_eda.html"><a href="06_eda.html#パッケージのインポート-3"><i class="fa fa-check"></i><b>6.1.1</b> パッケージのインポート</a></li>
<li class="chapter" data-level="6.1.2" data-path="06_eda.html"><a href="06_eda.html#ggplot2の設定-1"><i class="fa fa-check"></i><b>6.1.2</b> ggplot2の設定</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="06_eda.html"><a href="06_eda.html#データの中身"><i class="fa fa-check"></i><b>6.2</b> データの中身</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="06_eda.html"><a href="06_eda.html#str関数"><i class="fa fa-check"></i><b>6.2.1</b> str関数</a></li>
<li class="chapter" data-level="6.2.2" data-path="06_eda.html"><a href="06_eda.html#summary関数"><i class="fa fa-check"></i><b>6.2.2</b> summary関数</a></li>
<li class="chapter" data-level="6.2.3" data-path="06_eda.html"><a href="06_eda.html#summmarytoolsパッケージ"><i class="fa fa-check"></i><b>6.2.3</b> summmarytoolsパッケージ</a></li>
<li class="chapter" data-level="6.2.4" data-path="06_eda.html"><a href="06_eda.html#psychパッケージ"><i class="fa fa-check"></i><b>6.2.4</b> psychパッケージ</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="06_eda.html"><a href="06_eda.html#データの分布"><i class="fa fa-check"></i><b>6.3</b> データの分布</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="06_eda.html"><a href="06_eda.html#離散型変数の度数分布"><i class="fa fa-check"></i><b>6.3.1</b> 離散型変数の度数分布</a></li>
<li class="chapter" data-level="6.3.2" data-path="06_eda.html"><a href="06_eda.html#連続型変数の度数分布"><i class="fa fa-check"></i><b>6.3.2</b> 連続型変数の度数分布</a></li>
<li class="chapter" data-level="6.3.3" data-path="06_eda.html"><a href="06_eda.html#外れ値"><i class="fa fa-check"></i><b>6.3.3</b> 外れ値</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="06_eda.html"><a href="06_eda.html#データの関係性"><i class="fa fa-check"></i><b>6.4</b> データの関係性</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="06_eda.html"><a href="06_eda.html#離散型変数の関係性"><i class="fa fa-check"></i><b>6.4.1</b> 離散型変数の関係性</a></li>
<li class="chapter" data-level="6.4.2" data-path="06_eda.html"><a href="06_eda.html#連続型変数の関係性"><i class="fa fa-check"></i><b>6.4.2</b> 連続型変数の関係性</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="06_eda.html"><a href="06_eda.html#相関関係ペアプロット"><i class="fa fa-check"></i><b>6.5</b> 相関関係・ペアプロット</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="06_eda.html"><a href="06_eda.html#相関係数行列"><i class="fa fa-check"></i><b>6.5.1</b> 相関係数行列</a></li>
<li class="chapter" data-level="6.5.2" data-path="06_eda.html"><a href="06_eda.html#corrplotパッケージ"><i class="fa fa-check"></i><b>6.5.2</b> corrplotパッケージ</a></li>
<li class="chapter" data-level="6.5.3" data-path="06_eda.html"><a href="06_eda.html#corrrパッケージ"><i class="fa fa-check"></i><b>6.5.3</b> corrrパッケージ</a></li>
<li class="chapter" data-level="6.5.4" data-path="06_eda.html"><a href="06_eda.html#ggallyパッケージ"><i class="fa fa-check"></i><b>6.5.4</b> GGallyパッケージ</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="06_eda.html"><a href="06_eda.html#探索的データ分析の一括実行"><i class="fa fa-check"></i><b>6.6</b> 探索的データ分析の一括実行</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="06_eda.html"><a href="06_eda.html#dataexplorerパッケージ"><i class="fa fa-check"></i><b>6.6.1</b> DataExplorerパッケージ</a></li>
<li class="chapter" data-level="6.6.2" data-path="06_eda.html"><a href="06_eda.html#smartedaパッケージ"><i class="fa fa-check"></i><b>6.6.2</b> SmartEDAパッケージ</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="07_ols.html"><a href="07_ols.html"><i class="fa fa-check"></i><b>7</b> 線形回帰</a>
<ul>
<li class="chapter" data-level="7.1" data-path="07_ols.html"><a href="07_ols.html#第7章の準備"><i class="fa fa-check"></i><b>7.1</b> 第7章の準備</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="07_ols.html"><a href="07_ols.html#パッケージのインポート-4"><i class="fa fa-check"></i><b>7.1.1</b> パッケージのインポート</a></li>
<li class="chapter" data-level="7.1.2" data-path="07_ols.html"><a href="07_ols.html#外部データセットの取得-2"><i class="fa fa-check"></i><b>7.1.2</b> 外部データセットの取得</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="07_ols.html"><a href="07_ols.html#用語の説明"><i class="fa fa-check"></i><b>7.2</b> 用語の説明</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="07_ols.html"><a href="07_ols.html#標本と推定"><i class="fa fa-check"></i><b>7.2.1</b> 標本と推定</a></li>
<li class="chapter" data-level="7.2.2" data-path="07_ols.html"><a href="07_ols.html#推定量の望ましい性質"><i class="fa fa-check"></i><b>7.2.2</b> 推定量の望ましい性質</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="07_ols.html"><a href="07_ols.html#最小2乗法ols"><i class="fa fa-check"></i><b>7.3</b> 最小2乗法（OLS）</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="07_ols.html"><a href="07_ols.html#最小2乗法の仮定"><i class="fa fa-check"></i><b>7.3.1</b> 最小2乗法の仮定</a></li>
<li class="chapter" data-level="7.3.2" data-path="07_ols.html"><a href="07_ols.html#検定と信頼区間"><i class="fa fa-check"></i><b>7.3.2</b> 検定と信頼区間</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="07_ols.html"><a href="07_ols.html#モデルの種類と係数の解釈"><i class="fa fa-check"></i><b>7.4</b> モデルの種類と係数の解釈</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="07_ols.html"><a href="07_ols.html#水準モデル"><i class="fa fa-check"></i><b>7.4.1</b> 水準モデル</a></li>
<li class="chapter" data-level="7.4.2" data-path="07_ols.html"><a href="07_ols.html#対数モデル"><i class="fa fa-check"></i><b>7.4.2</b> 対数モデル</a></li>
<li class="chapter" data-level="7.4.3" data-path="07_ols.html"><a href="07_ols.html#変化率モデル"><i class="fa fa-check"></i><b>7.4.3</b> 変化率モデル</a></li>
<li class="chapter" data-level="7.4.4" data-path="07_ols.html"><a href="07_ols.html#多項式モデル"><i class="fa fa-check"></i><b>7.4.4</b> 多項式モデル</a></li>
<li class="chapter" data-level="7.4.5" data-path="07_ols.html"><a href="07_ols.html#交互作用モデル"><i class="fa fa-check"></i><b>7.4.5</b> 交互作用モデル</a></li>
<li class="chapter" data-level="7.4.6" data-path="07_ols.html"><a href="07_ols.html#ダミー変数"><i class="fa fa-check"></i><b>7.4.6</b> ダミー変数</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="07_ols.html"><a href="07_ols.html#重回帰モデルの役割と注意点"><i class="fa fa-check"></i><b>7.5</b> 重回帰モデルの役割と注意点</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="07_ols.html"><a href="07_ols.html#欠落変数バイアス"><i class="fa fa-check"></i><b>7.5.1</b> 欠落変数バイアス</a></li>
<li class="chapter" data-level="7.5.2" data-path="07_ols.html"><a href="07_ols.html#多重共線性"><i class="fa fa-check"></i><b>7.5.2</b> 多重共線性</a></li>
<li class="chapter" data-level="7.5.3" data-path="07_ols.html"><a href="07_ols.html#変数選択の指針"><i class="fa fa-check"></i><b>7.5.3</b> 変数選択の指針</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="07_ols.html"><a href="07_ols.html#rの単回帰モデル推定"><i class="fa fa-check"></i><b>7.6</b> Rの単回帰モデル推定</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="07_ols.html"><a href="07_ols.html#実例線形単回帰"><i class="fa fa-check"></i><b>7.6.1</b> 実例：線形単回帰</a></li>
<li class="chapter" data-level="7.6.2" data-path="07_ols.html"><a href="07_ols.html#実例回帰診断プロット"><i class="fa fa-check"></i><b>7.6.2</b> 実例：回帰診断プロット</a></li>
<li class="chapter" data-level="7.6.3" data-path="07_ols.html"><a href="07_ols.html#実例対数変化率モデルの推定"><i class="fa fa-check"></i><b>7.6.3</b> 実例：対数・変化率モデルの推定</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="07_ols.html"><a href="07_ols.html#rの重回帰モデル推定"><i class="fa fa-check"></i><b>7.7</b> Rの重回帰モデル推定</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="07_ols.html"><a href="07_ols.html#実例線形重回帰"><i class="fa fa-check"></i><b>7.7.1</b> 実例：線形重回帰</a></li>
<li class="chapter" data-level="7.7.2" data-path="07_ols.html"><a href="07_ols.html#実例多項式モデル"><i class="fa fa-check"></i><b>7.7.2</b> 実例：多項式モデル</a></li>
<li class="chapter" data-level="7.7.3" data-path="07_ols.html"><a href="07_ols.html#実例ダミー交互作用モデル"><i class="fa fa-check"></i><b>7.7.3</b> 実例：ダミー・交互作用モデル</a></li>
<li class="chapter" data-level="7.7.4" data-path="07_ols.html"><a href="07_ols.html#実例ダミー変数同士の交互作用モデル"><i class="fa fa-check"></i><b>7.7.4</b> 実例：ダミー変数同士の交互作用モデル</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="08_ts.html"><a href="08_ts.html"><i class="fa fa-check"></i><b>8</b> 時系列データ操作</a>
<ul>
<li class="chapter" data-level="8.1" data-path="08_ts.html"><a href="08_ts.html#第8章の準備"><i class="fa fa-check"></i><b>8.1</b> 第8章の準備</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="08_ts.html"><a href="08_ts.html#パッケージのインポート-5"><i class="fa fa-check"></i><b>8.1.1</b> パッケージのインポート</a></li>
<li class="chapter" data-level="8.1.2" data-path="08_ts.html"><a href="08_ts.html#外部データセットの取得-3"><i class="fa fa-check"></i><b>8.1.2</b> 外部データセットの取得</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="08_ts.html"><a href="08_ts.html#時系列データとは"><i class="fa fa-check"></i><b>8.2</b> 時系列データとは</a></li>
<li class="chapter" data-level="8.3" data-path="08_ts.html"><a href="08_ts.html#ts形式データ"><i class="fa fa-check"></i><b>8.3</b> ts形式データ</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="08_ts.html"><a href="08_ts.html#ts形式データの表示"><i class="fa fa-check"></i><b>8.3.1</b> ts形式データの表示</a></li>
<li class="chapter" data-level="8.3.2" data-path="08_ts.html"><a href="08_ts.html#ts形式データ情報の取得"><i class="fa fa-check"></i><b>8.3.2</b> ts形式データ情報の取得</a></li>
<li class="chapter" data-level="8.3.3" data-path="08_ts.html"><a href="08_ts.html#ts形式データのフィルタ"><i class="fa fa-check"></i><b>8.3.3</b> ts形式データのフィルタ</a></li>
<li class="chapter" data-level="8.3.4" data-path="08_ts.html"><a href="08_ts.html#ts形式データのプロット"><i class="fa fa-check"></i><b>8.3.4</b> ts形式データのプロット</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="08_ts.html"><a href="08_ts.html#ts形式データの変換"><i class="fa fa-check"></i><b>8.4</b> ts形式データの変換</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="08_ts.html"><a href="08_ts.html#ts形式に変換ts"><i class="fa fa-check"></i><b>8.4.1</b> ts形式に変換：ts()</a></li>
<li class="chapter" data-level="8.4.2" data-path="08_ts.html"><a href="08_ts.html#ts形式に変換as_tsibble"><i class="fa fa-check"></i><b>8.4.2</b> ts形式に変換：as_tsibble()</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="08_ts.html"><a href="08_ts.html#日付型データ関数"><i class="fa fa-check"></i><b>8.5</b> 日付型データ関数</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="08_ts.html"><a href="08_ts.html#日付型データの生成"><i class="fa fa-check"></i><b>8.5.1</b> 日付型データの生成</a></li>
<li class="chapter" data-level="8.5.2" data-path="08_ts.html"><a href="08_ts.html#日付型データの計算"><i class="fa fa-check"></i><b>8.5.2</b> 日付型データの計算</a></li>
<li class="chapter" data-level="8.5.3" data-path="08_ts.html"><a href="08_ts.html#日付型と文字列型の変換"><i class="fa fa-check"></i><b>8.5.3</b> 日付型と文字列型の変換</a></li>
<li class="chapter" data-level="8.5.4" data-path="08_ts.html"><a href="08_ts.html#日付情報の抽出"><i class="fa fa-check"></i><b>8.5.4</b> 日付情報の抽出</a></li>
<li class="chapter" data-level="8.5.5" data-path="08_ts.html"><a href="08_ts.html#四半期ベースの時系列インデックス"><i class="fa fa-check"></i><b>8.5.5</b> 四半期ベースの時系列インデックス</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="08_ts.html"><a href="08_ts.html#様々な時系列データ系列の作成"><i class="fa fa-check"></i><b>8.6</b> 様々な時系列データ系列の作成</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="08_ts.html"><a href="08_ts.html#ラグリード系列の作成"><i class="fa fa-check"></i><b>8.6.1</b> ラグ・リード系列の作成</a></li>
<li class="chapter" data-level="8.6.2" data-path="08_ts.html"><a href="08_ts.html#変化率系列の作成"><i class="fa fa-check"></i><b>8.6.2</b> 変化率系列の作成</a></li>
<li class="chapter" data-level="8.6.3" data-path="08_ts.html"><a href="08_ts.html#移動平均系列の作成"><i class="fa fa-check"></i><b>8.6.3</b> 移動平均系列の作成</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="08_ts.html"><a href="08_ts.html#時系列データの頻度変換"><i class="fa fa-check"></i><b>8.7</b> 時系列データの頻度変換</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="08_ts.html"><a href="08_ts.html#日次データを週次データに変換"><i class="fa fa-check"></i><b>8.7.1</b> 日次データを週次データに変換</a></li>
<li class="chapter" data-level="8.7.2" data-path="08_ts.html"><a href="08_ts.html#日次データを月次データに変換"><i class="fa fa-check"></i><b>8.7.2</b> 日次データを月次データに変換</a></li>
<li class="chapter" data-level="8.7.3" data-path="08_ts.html"><a href="08_ts.html#日次データを四半期データに変換"><i class="fa fa-check"></i><b>8.7.3</b> 日次データを四半期データに変換</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="08_ts.html"><a href="08_ts.html#季節調整x-13"><i class="fa fa-check"></i><b>8.8</b> 季節調整（X-13）</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="08_ts.html"><a href="08_ts.html#ts形式データの可視化"><i class="fa fa-check"></i><b>8.8.1</b> ts形式データの可視化</a></li>
<li class="chapter" data-level="8.8.2" data-path="08_ts.html"><a href="08_ts.html#x-13arima-seatsの実施方法"><i class="fa fa-check"></i><b>8.8.2</b> X-13ARIMA-SEATSの実施方法</a></li>
<li class="chapter" data-level="8.8.3" data-path="08_ts.html"><a href="08_ts.html#実例月次データの季節調整"><i class="fa fa-check"></i><b>8.8.3</b> 実例：月次データの季節調整</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="08_ts.html"><a href="08_ts.html#季節調整stl分解"><i class="fa fa-check"></i><b>8.9</b> 季節調整（STL分解）</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="08_ts.html"><a href="08_ts.html#stl分解の実施方法"><i class="fa fa-check"></i><b>8.9.1</b> STL分解の実施方法</a></li>
<li class="chapter" data-level="8.9.2" data-path="08_ts.html"><a href="08_ts.html#週次データのstl分解"><i class="fa fa-check"></i><b>8.9.2</b> 週次データのSTL分解</a></li>
<li class="chapter" data-level="8.9.3" data-path="08_ts.html"><a href="08_ts.html#日次データのstl分解単一周期"><i class="fa fa-check"></i><b>8.9.3</b> 日次データのSTL分解（単一周期）</a></li>
<li class="chapter" data-level="8.9.4" data-path="08_ts.html"><a href="08_ts.html#日次データのstl分解複数周期"><i class="fa fa-check"></i><b>8.9.4</b> 日次データのSTL分解（複数周期）</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="08_ts.html"><a href="08_ts.html#トレンド"><i class="fa fa-check"></i><b>8.10</b> トレンド</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="08_ts.html"><a href="08_ts.html#線形トレンド"><i class="fa fa-check"></i><b>8.10.1</b> 線形トレンド</a></li>
<li class="chapter" data-level="8.10.2" data-path="08_ts.html"><a href="08_ts.html#区分線形トレンド"><i class="fa fa-check"></i><b>8.10.2</b> 区分線形トレンド</a></li>
<li class="chapter" data-level="8.10.3" data-path="08_ts.html"><a href="08_ts.html#hpフィルタ"><i class="fa fa-check"></i><b>8.10.3</b> HPフィルタ</a></li>
<li class="chapter" data-level="8.10.4" data-path="08_ts.html"><a href="08_ts.html#一般化加法モデルgam"><i class="fa fa-check"></i><b>8.10.4</b> 一般化加法モデル（GAM）</a></li>
</ul></li>
<li class="chapter" data-level="8.11" data-path="08_ts.html"><a href="08_ts.html#構造変化"><i class="fa fa-check"></i><b>8.11</b> 構造変化</a>
<ul>
<li class="chapter" data-level="8.11.1" data-path="08_ts.html"><a href="08_ts.html#構造変化点が既知の場合"><i class="fa fa-check"></i><b>8.11.1</b> 構造変化点が既知の場合</a></li>
<li class="chapter" data-level="8.11.2" data-path="08_ts.html"><a href="08_ts.html#構造変化点が未知の場合"><i class="fa fa-check"></i><b>8.11.2</b> 構造変化点が未知の場合</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="09_var.html"><a href="09_var.html"><i class="fa fa-check"></i><b>9</b> 時系列分析</a>
<ul>
<li class="chapter" data-level="9.1" data-path="09_var.html"><a href="09_var.html#第9章の準備"><i class="fa fa-check"></i><b>9.1</b> 第9章の準備</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="09_var.html"><a href="09_var.html#パッケージのインポート-6"><i class="fa fa-check"></i><b>9.1.1</b> パッケージのインポート</a></li>
<li class="chapter" data-level="9.1.2" data-path="09_var.html"><a href="09_var.html#外部データセットの取得-4"><i class="fa fa-check"></i><b>9.1.2</b> 外部データセットの取得</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="09_var.html"><a href="09_var.html#定常性"><i class="fa fa-check"></i><b>9.2</b> 定常性</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="09_var.html"><a href="09_var.html#定常性の定義"><i class="fa fa-check"></i><b>9.2.1</b> 定常性の定義</a></li>
<li class="chapter" data-level="9.2.2" data-path="09_var.html"><a href="09_var.html#ホワイトノイズ"><i class="fa fa-check"></i><b>9.2.2</b> ホワイトノイズ</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="09_var.html"><a href="09_var.html#非定常過程"><i class="fa fa-check"></i><b>9.3</b> 非定常過程</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="09_var.html"><a href="09_var.html#単位根"><i class="fa fa-check"></i><b>9.3.1</b> 単位根</a></li>
<li class="chapter" data-level="9.3.2" data-path="09_var.html"><a href="09_var.html#階差定常過程和分過程"><i class="fa fa-check"></i><b>9.3.2</b> 階差定常過程・和分過程</a></li>
<li class="chapter" data-level="9.3.3" data-path="09_var.html"><a href="09_var.html#ランダムウォーク"><i class="fa fa-check"></i><b>9.3.3</b> ランダムウォーク</a></li>
<li class="chapter" data-level="9.3.4" data-path="09_var.html"><a href="09_var.html#トレンド定常過程"><i class="fa fa-check"></i><b>9.3.4</b> トレンド定常過程</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="09_var.html"><a href="09_var.html#単位根検定adf検定"><i class="fa fa-check"></i><b>9.4</b> 単位根検定（ADF検定）</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="09_var.html"><a href="09_var.html#adf検定フロー自作関数"><i class="fa fa-check"></i><b>9.4.1</b> ADF検定フロー自作関数</a></li>
<li class="chapter" data-level="9.4.2" data-path="09_var.html"><a href="09_var.html#実例adf検定フロー"><i class="fa fa-check"></i><b>9.4.2</b> 実例：ADF検定フロー</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="09_var.html"><a href="09_var.html#系列相関自己相関"><i class="fa fa-check"></i><b>9.5</b> 系列相関・自己相関</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="09_var.html"><a href="09_var.html#自己相関acf"><i class="fa fa-check"></i><b>9.5.1</b> 自己相関（ACF）</a></li>
<li class="chapter" data-level="9.5.2" data-path="09_var.html"><a href="09_var.html#偏自己相関pacf"><i class="fa fa-check"></i><b>9.5.2</b> 偏自己相関（PACF）</a></li>
<li class="chapter" data-level="9.5.3" data-path="09_var.html"><a href="09_var.html#リュンボックス検定"><i class="fa fa-check"></i><b>9.5.3</b> リュン＝ボックス検定</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="09_var.html"><a href="09_var.html#ボックスジェンキンス法"><i class="fa fa-check"></i><b>9.6</b> ボックス＝ジェンキンス法</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="09_var.html"><a href="09_var.html#armaモデル"><i class="fa fa-check"></i><b>9.6.1</b> ARMAモデル</a></li>
<li class="chapter" data-level="9.6.2" data-path="09_var.html"><a href="09_var.html#arimaモデル"><i class="fa fa-check"></i><b>9.6.2</b> ARIMAモデル</a></li>
<li class="chapter" data-level="9.6.3" data-path="09_var.html"><a href="09_var.html#ボックスジェンキンス法の分析フロー"><i class="fa fa-check"></i><b>9.6.3</b> ボックス＝ジェンキンス法の分析フロー</a></li>
<li class="chapter" data-level="9.6.4" data-path="09_var.html"><a href="09_var.html#実例ボックスジェンキンス法"><i class="fa fa-check"></i><b>9.6.4</b> 実例：ボックス＝ジェンキンス法</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="09_var.html"><a href="09_var.html#共和分"><i class="fa fa-check"></i><b>9.7</b> 共和分</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="09_var.html"><a href="09_var.html#見せかけの回帰"><i class="fa fa-check"></i><b>9.7.1</b> 見せかけの回帰</a></li>
<li class="chapter" data-level="9.7.2" data-path="09_var.html"><a href="09_var.html#共和分関係"><i class="fa fa-check"></i><b>9.7.2</b> 共和分関係</a></li>
<li class="chapter" data-level="9.7.3" data-path="09_var.html"><a href="09_var.html#エングルグレンジャー検定"><i class="fa fa-check"></i><b>9.7.3</b> エングル＝グレンジャー検定</a></li>
<li class="chapter" data-level="9.7.4" data-path="09_var.html"><a href="09_var.html#実例見せかけの回帰"><i class="fa fa-check"></i><b>9.7.4</b> 実例：見せかけの回帰</a></li>
<li class="chapter" data-level="9.7.5" data-path="09_var.html"><a href="09_var.html#実例共和分"><i class="fa fa-check"></i><b>9.7.5</b> 実例：共和分</a></li>
<li class="chapter" data-level="9.7.6" data-path="09_var.html"><a href="09_var.html#ヨハンセン検定"><i class="fa fa-check"></i><b>9.7.6</b> ヨハンセン検定</a></li>
<li class="chapter" data-level="9.7.7" data-path="09_var.html"><a href="09_var.html#ヨハンセン検定フロー自作関数"><i class="fa fa-check"></i><b>9.7.7</b> ヨハンセン検定フロー自作関数</a></li>
<li class="chapter" data-level="9.7.8" data-path="09_var.html"><a href="09_var.html#実例ヨハンセン検定"><i class="fa fa-check"></i><b>9.7.8</b> 実例：ヨハンセン検定</a></li>
</ul></li>
<li class="chapter" data-level="9.8" data-path="09_var.html"><a href="09_var.html#varモデル"><i class="fa fa-check"></i><b>9.8</b> VARモデル</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="09_var.html"><a href="09_var.html#レベルvarモデル"><i class="fa fa-check"></i><b>9.8.1</b> レベルVARモデル</a></li>
<li class="chapter" data-level="9.8.2" data-path="09_var.html"><a href="09_var.html#階差varモデル"><i class="fa fa-check"></i><b>9.8.2</b> 階差VARモデル</a></li>
<li class="chapter" data-level="9.8.3" data-path="09_var.html"><a href="09_var.html#vecモデル"><i class="fa fa-check"></i><b>9.8.3</b> VECモデル</a></li>
<li class="chapter" data-level="9.8.4" data-path="09_var.html"><a href="09_var.html#構造varモデル"><i class="fa fa-check"></i><b>9.8.4</b> 構造VARモデル</a></li>
<li class="chapter" data-level="9.8.5" data-path="09_var.html"><a href="09_var.html#構造vecモデル"><i class="fa fa-check"></i><b>9.8.5</b> 構造VECモデル</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="09_var.html"><a href="09_var.html#varモデルに関連する分析"><i class="fa fa-check"></i><b>9.9</b> VARモデルに関連する分析</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="09_var.html"><a href="09_var.html#グレンジャー因果性"><i class="fa fa-check"></i><b>9.9.1</b> グレンジャー因果性</a></li>
<li class="chapter" data-level="9.9.2" data-path="09_var.html"><a href="09_var.html#インパルス応答"><i class="fa fa-check"></i><b>9.9.2</b> インパルス応答</a></li>
<li class="chapter" data-level="9.9.3" data-path="09_var.html"><a href="09_var.html#予測誤差の分散分解"><i class="fa fa-check"></i><b>9.9.3</b> 予測誤差の分散分解</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="09_var.html"><a href="09_var.html#varモデルの分析フロー"><i class="fa fa-check"></i><b>9.10</b> VARモデルの分析フロー</a>
<ul>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#探索的データ分析-2"><i class="fa fa-check"></i>1. 探索的データ分析</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#変数選択"><i class="fa fa-check"></i>2. 変数選択</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#ラグ次数の選択"><i class="fa fa-check"></i>3. ラグ次数の選択</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#単位根検定-1"><i class="fa fa-check"></i>4. 単位根検定</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#共和分検定"><i class="fa fa-check"></i>5. 共和分検定</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#データ分割-1"><i class="fa fa-check"></i>6. データ分割</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#誘導varvecモデルの推定"><i class="fa fa-check"></i>7. 誘導VAR・VECモデルの推定</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#構造varvecモデルの識別"><i class="fa fa-check"></i>8. 構造VAR・VECモデルの識別</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#誤差項の検定"><i class="fa fa-check"></i>9. 誤差項の検定</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#モデル推定後の分析"><i class="fa fa-check"></i>10. モデル推定後の分析</a></li>
<li class="chapter" data-level="" data-path="09_var.html"><a href="09_var.html#予測"><i class="fa fa-check"></i>11. 予測</a></li>
</ul></li>
<li class="chapter" data-level="9.11" data-path="09_var.html"><a href="09_var.html#varモデルの実例"><i class="fa fa-check"></i><b>9.11</b> VARモデルの実例</a>
<ul>
<li class="chapter" data-level="9.11.1" data-path="09_var.html"><a href="09_var.html#実例探索的データ分析"><i class="fa fa-check"></i><b>9.11.1</b> 実例：探索的データ分析</a></li>
<li class="chapter" data-level="9.11.2" data-path="09_var.html"><a href="09_var.html#実例変数選択グレンジャー因果性検定"><i class="fa fa-check"></i><b>9.11.2</b> 実例：変数選択（グレンジャー因果性検定）</a></li>
<li class="chapter" data-level="9.11.3" data-path="09_var.html"><a href="09_var.html#実例ラグ次数選択"><i class="fa fa-check"></i><b>9.11.3</b> 実例：ラグ次数選択</a></li>
<li class="chapter" data-level="9.11.4" data-path="09_var.html"><a href="09_var.html#実例adf検定"><i class="fa fa-check"></i><b>9.11.4</b> 実例：ADF検定</a></li>
<li class="chapter" data-level="9.11.5" data-path="09_var.html"><a href="09_var.html#実例ヨハンセン検定-1"><i class="fa fa-check"></i><b>9.11.5</b> 実例：ヨハンセン検定</a></li>
<li class="chapter" data-level="9.11.6" data-path="09_var.html"><a href="09_var.html#実例varモデルの推定"><i class="fa fa-check"></i><b>9.11.6</b> 実例：VARモデルの推定</a></li>
<li class="chapter" data-level="9.11.7" data-path="09_var.html"><a href="09_var.html#実例vecモデルの推定"><i class="fa fa-check"></i><b>9.11.7</b> 実例：VECモデルの推定</a></li>
<li class="chapter" data-level="9.11.8" data-path="09_var.html"><a href="09_var.html#実例構造varモデルの推定"><i class="fa fa-check"></i><b>9.11.8</b> 実例：構造VARモデルの推定</a></li>
<li class="chapter" data-level="9.11.9" data-path="09_var.html"><a href="09_var.html#実例構造vecモデルの推定"><i class="fa fa-check"></i><b>9.11.9</b> 実例：構造VECモデルの推定</a></li>
<li class="chapter" data-level="9.11.10" data-path="09_var.html"><a href="09_var.html#実例誤差項の検定"><i class="fa fa-check"></i><b>9.11.10</b> 実例：誤差項の検定</a></li>
<li class="chapter" data-level="9.11.11" data-path="09_var.html"><a href="09_var.html#実例インパルス応答"><i class="fa fa-check"></i><b>9.11.11</b> 実例：インパルス応答</a></li>
<li class="chapter" data-level="9.11.12" data-path="09_var.html"><a href="09_var.html#実例予測誤差の分散分解"><i class="fa fa-check"></i><b>9.11.12</b> 実例：予測誤差の分散分解</a></li>
<li class="chapter" data-level="9.11.13" data-path="09_var.html"><a href="09_var.html#実例グレンジャー因果性検定"><i class="fa fa-check"></i><b>9.11.13</b> 実例：グレンジャー因果性検定</a></li>
<li class="chapter" data-level="9.11.14" data-path="09_var.html"><a href="09_var.html#実例予測"><i class="fa fa-check"></i><b>9.11.14</b> 実例：予測</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html"><i class="fa fa-check"></i>付録 寄与度の計算方法</a>
<ul>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#記号法"><i class="fa fa-check"></i>記号法</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#和差の指標"><i class="fa fa-check"></i>和・差の指標</a>
<ul>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#公式"><i class="fa fa-check"></i>公式</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例gdp"><i class="fa fa-check"></i>実例：GDP</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#積の指標"><i class="fa fa-check"></i>積の指標</a>
<ul>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#公式-1"><i class="fa fa-check"></i>公式</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例貿易指数金額指数"><i class="fa fa-check"></i>実例：貿易指数（金額指数）</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例経常利益"><i class="fa fa-check"></i>実例：経常利益</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#商の指標"><i class="fa fa-check"></i>商の指標</a>
<ul>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#公式-2"><i class="fa fa-check"></i>公式</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例貿易指数数量指数"><i class="fa fa-check"></i>実例：貿易指数（数量指数）</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例失業率"><i class="fa fa-check"></i>実例：失業率</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#固定加重平均の指標"><i class="fa fa-check"></i>固定加重平均の指標</a>
<ul>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#公式-3"><i class="fa fa-check"></i>公式</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例ラスパイレス指数"><i class="fa fa-check"></i>実例：ラスパイレス指数</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#可変加重平均の指標"><i class="fa fa-check"></i>可変加重平均の指標</a>
<ul>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#公式-4"><i class="fa fa-check"></i>公式</a></li>
<li class="chapter" data-level="" data-path="appendix_cont.html"><a href="appendix_cont.html#実例現金給与総額"><i class="fa fa-check"></i>実例：現金給与総額</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">エコノミストのためのR</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2によるグラフ作成" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> ggplot2によるグラフ作成<a href="05_plot.html#ggplot2によるグラフ作成" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>第5章「ggplot2によるグラフ作成」では、<code>tidyverse</code>の<code>ggplot2</code>パッケージを主に使用したグラフ作成方法について解説します。</p>
<div id="第5章の準備" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> 第5章の準備<a href="05_plot.html#第5章の準備" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="パッケージのインポート-2" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> パッケージのインポート<a href="05_plot.html#パッケージのインポート-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="05_plot.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(esquisse)</span>
<span id="cb460-2"><a href="05_plot.html#cb460-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geofacet)</span>
<span id="cb460-3"><a href="05_plot.html#cb460-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplotgui)</span>
<span id="cb460-4"><a href="05_plot.html#cb460-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb460-5"><a href="05_plot.html#cb460-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggsci)</span>
<span id="cb460-6"><a href="05_plot.html#cb460-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb460-7"><a href="05_plot.html#cb460-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lemon)</span>
<span id="cb460-8"><a href="05_plot.html#cb460-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb460-9"><a href="05_plot.html#cb460-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb460-10"><a href="05_plot.html#cb460-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb460-11"><a href="05_plot.html#cb460-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb460-12"><a href="05_plot.html#cb460-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
<div id="外部データセットの取得-1" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> 外部データセットの取得<a href="05_plot.html#外部データセットの取得-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>この章では、外部データセットとして以下のデータを使用します。第2章のコードを使用してあらかじめウェブからデータセットを取得してください。</p>
<ul>
<li>OWIDのCOVID-19データセット：　<code>data_owid</code></li>
<li>日本の県内総生産：　<code>data_gdp_pref</code></li>
<li>日本の四半期別GDP：　<code>data_gdp_jp</code></li>
</ul>
</div>
</div>
<div id="ggplot2とは" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> ggplot2とは<a href="05_plot.html#ggplot2とは" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>ggplot2</code>パッケージでは、最初に<code>ggplot()</code>関数でグラフを作成するデータと変数を指定します。その後に、<code>geom_histogram()</code>などのグラフの種類を指定する関数や、<code>scale_x_date</code>などの軸設定の関数、<code>theme()</code>などの各種設定の関数を<code>+</code>演算子で追加していきます。</p>
<p><code>ggplot()</code>関数では、まず<code>data</code>引数に<code>tibble</code>形式の縦型データを指定します。次に<code>mapping</code>引数に<code>aes()</code>関数を指定し、<code>aes()</code>関数の中でX軸やY軸の変数、必要に応じて<code>color</code>や<code>size</code>など変数の値に応じて変化させる色・サイズなどの要素を指定します。</p>
<p>なお、グラフの種類により、X軸、Y軸に指定できる変数の型（連続型、離散型）が決まっていますので、注意してください。</p>
<p><code>ggplot2</code>パッケージの詳細については<a href="https://ggplot2.tidyverse.org/">公式ウェブサイト</a>を参照してください。各関数の使い方については、公式ウェブサイトのチートシートが分かりやすくまとまっています。</p>
</div>
<div id="ggplot2の設定" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> ggplot2の設定<a href="05_plot.html#ggplot2の設定" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>第2章で紹介した<code>ggplot2</code>の設定です。筆者の実行環境はMacのため、Windowsの設定はコメントアウトしています。</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="05_plot.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Windowsのグラフ設定（筆者の実行環境では不要のためコメントアウト）</span></span>
<span id="cb461-2"><a href="05_plot.html#cb461-2" aria-hidden="true" tabindex="-1"></a><span class="co"># windowsFonts(&quot;MEIRYO&quot; = windowsFont(&quot;Meiryo UI&quot;))</span></span>
<span id="cb461-3"><a href="05_plot.html#cb461-3" aria-hidden="true" tabindex="-1"></a><span class="co"># windowsFonts(&quot;YUGO&quot; = windowsFont(&quot;Yu Gothic UI&quot;))</span></span>
<span id="cb461-4"><a href="05_plot.html#cb461-4" aria-hidden="true" tabindex="-1"></a><span class="co"># theme_set(theme_light(base_family = &quot;YUGO&quot;))</span></span>
<span id="cb461-5"><a href="05_plot.html#cb461-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb461-6"><a href="05_plot.html#cb461-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Macのグラフ設定</span></span>
<span id="cb461-7"><a href="05_plot.html#cb461-7" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_light</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuProN-W3&quot;</span>))</span></code></pre></div>
</div>
<div id="gui形式の直感的なグラフ作成" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> GUI形式の直感的なグラフ作成<a href="05_plot.html#gui形式の直感的なグラフ作成" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>この章では<code>ggplot2</code>パッケージによるグラフ作成方法を紹介しますが、<code>ggplot2</code>はコードを記述してグラフを作成するため、試行錯誤を伴う探索的データ分析（EDA）にはあまり向いていません。</p>
<p>そこで、<code>ggplot2</code>によるグラフ作成を行う前に、GUI形式でコードを記述せずにグラフを作成できるパッケージを用い、どのようなグラフを作成するべきか検討します。</p>
<div id="esquisseパッケージ" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> esquisseパッケージ<a href="05_plot.html#esquisseパッケージ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>esquisse</code>パッケージは、ドラッグ＆ドロップでX軸・Y軸の変数や色・サイズを変化させる属性の変数を指定し、グラフを作成することができる便利なパッケージです。ただし、データセットの規模が大きいと起動に時間がかかるため、変数の数が多い場合は、あらかじめ注目する変数を絞るといった前処理が必要です。</p>
<p>Rで下記のコードを実行すると別のウィンドウで<code>esquisse</code>の画面が立ち上がり、GUI形式でインタラクティブにグラフを作成することができます。ウェブサイト上では実行できないため、各自で試してみてください。</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="05_plot.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># irisデータ</span></span>
<span id="cb462-2"><a href="05_plot.html#cb462-2" aria-hidden="true" tabindex="-1"></a>esquisse<span class="sc">::</span><span class="fu">esquisser</span>(<span class="at">data =</span> iris)</span></code></pre></div>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="05_plot.html#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 世界の新型コロナデータの一部を抽出</span></span>
<span id="cb463-2"><a href="05_plot.html#cb463-2" aria-hidden="true" tabindex="-1"></a>data_owid <span class="sc">%&gt;%</span> </span>
<span id="cb463-3"><a href="05_plot.html#cb463-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases_smoothed) <span class="sc">%&gt;%</span> </span>
<span id="cb463-4"><a href="05_plot.html#cb463-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb463-5"><a href="05_plot.html#cb463-5" aria-hidden="true" tabindex="-1"></a>  esquisse<span class="sc">::</span><span class="fu">esquisser</span>()</span></code></pre></div>
</div>
<div id="ggplotguiパッケージ" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> ggplotguiパッケージ<a href="05_plot.html#ggplotguiパッケージ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>その他、GUI形式でグラフを作成することができるパッケージとして、<code>ggplotgui</code>があります。同様にウェブサイト上では実行できないため、各自で試してみてください。</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="05_plot.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="co"># irisデータ</span></span>
<span id="cb464-2"><a href="05_plot.html#cb464-2" aria-hidden="true" tabindex="-1"></a>ggplotgui<span class="sc">::</span><span class="fu">ggplot_shiny</span>(<span class="at">data =</span> iris)</span></code></pre></div>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="05_plot.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 世界の新型コロナデータの一部を抽出</span></span>
<span id="cb465-2"><a href="05_plot.html#cb465-2" aria-hidden="true" tabindex="-1"></a>data_owid <span class="sc">%&gt;%</span> </span>
<span id="cb465-3"><a href="05_plot.html#cb465-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases_smoothed) <span class="sc">%&gt;%</span> </span>
<span id="cb465-4"><a href="05_plot.html#cb465-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United States&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb465-5"><a href="05_plot.html#cb465-5" aria-hidden="true" tabindex="-1"></a>  ggplotgui<span class="sc">::</span><span class="fu">ggplot_shiny</span>()</span></code></pre></div>
</div>
</div>
<div id="次元の度数分布離散型" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> 1次元の度数分布（離散型）<a href="05_plot.html#次元の度数分布離散型" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：離散型変数</li>
<li>Y軸：なし</li>
</ul>
<p>離散型変数の1次元の度数分布を作成するには、度数棒グラフを用います。度数棒グラフを作成するには<code>geom_bar()</code>関数を使用します。</p>
<div id="度数棒グラフの基本形" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> 度数棒グラフの基本形<a href="05_plot.html#度数棒グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="05_plot.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb466-2"><a href="05_plot.html#cb466-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> manufacturer)</span>
<span id="cb466-3"><a href="05_plot.html#cb466-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb466-4"><a href="05_plot.html#cb466-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb466-5"><a href="05_plot.html#cb466-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb466-6"><a href="05_plot.html#cb466-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb466-7"><a href="05_plot.html#cb466-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb466-8"><a href="05_plot.html#cb466-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb466-9"><a href="05_plot.html#cb466-9" aria-hidden="true" tabindex="-1"></a>           )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-170-1.png" width="672" /></p>
</div>
</div>
<div id="次元の度数分布連続型" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> 1次元の度数分布（連続型）<a href="05_plot.html#次元の度数分布連続型" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：連続型変数</li>
<li>Y軸：なし</li>
</ul>
<p>連続型変数の1次元の度数分布を作成するには、ヒストグラムを用います。ヒストグラムを作成するには<code>geom_histogram()</code>関数や<code>geom_freqpoly()</code>関数を使用します。</p>
<div id="ヒストグラムの基本形" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> ヒストグラムの基本形<a href="05_plot.html#ヒストグラムの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="05_plot.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb467-2"><a href="05_plot.html#cb467-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy)</span>
<span id="cb467-3"><a href="05_plot.html#cb467-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb467-4"><a href="05_plot.html#cb467-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="co"># 階級幅</span></span>
<span id="cb467-5"><a href="05_plot.html#cb467-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;gray&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb467-6"><a href="05_plot.html#cb467-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb467-7"><a href="05_plot.html#cb467-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb467-8"><a href="05_plot.html#cb467-8" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-171-1.png" width="672" /></p>
</div>
<div id="横並びヒストグラム" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> 横並びヒストグラム<a href="05_plot.html#横並びヒストグラム" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>グループ別のヒストグラムを横並び形式で作成するには、<code>position</code>引数に<code>"dodge"</code>を指定します。</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="05_plot.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb468-2"><a href="05_plot.html#cb468-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb468-3"><a href="05_plot.html#cb468-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb468-4"><a href="05_plot.html#cb468-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="co"># 階級幅</span></span>
<span id="cb468-5"><a href="05_plot.html#cb468-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="co"># 横並びポジション</span></span>
<span id="cb468-6"><a href="05_plot.html#cb468-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb468-7"><a href="05_plot.html#cb468-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb468-8"><a href="05_plot.html#cb468-8" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-172-1.png" width="672" /></p>
<p>グループ別の度数分布は<code>geom_freqpoly()</code>関数でも可視化することができます。</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="05_plot.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb469-2"><a href="05_plot.html#cb469-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">color =</span> class)</span>
<span id="cb469-3"><a href="05_plot.html#cb469-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb469-4"><a href="05_plot.html#cb469-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="co"># 階級幅</span></span>
<span id="cb469-5"><a href="05_plot.html#cb469-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb469-6"><a href="05_plot.html#cb469-6" aria-hidden="true" tabindex="-1"></a>                )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-173-1.png" width="672" /></p>
</div>
<div id="積上ヒストグラム" class="section level3 hasAnchor" number="5.6.3">
<h3><span class="header-section-number">5.6.3</span> 積上ヒストグラム<a href="05_plot.html#積上ヒストグラム" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>グループ別のヒストグラムを積上形式で作成するには、<code>position</code>引数に<code>"stack"</code>を指定します。</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="05_plot.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb470-2"><a href="05_plot.html#cb470-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb470-3"><a href="05_plot.html#cb470-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb470-4"><a href="05_plot.html#cb470-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="co"># 階級幅</span></span>
<span id="cb470-5"><a href="05_plot.html#cb470-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position =</span> <span class="st">&quot;stack&quot;</span>, <span class="co"># 積上ポジション</span></span>
<span id="cb470-6"><a href="05_plot.html#cb470-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb470-7"><a href="05_plot.html#cb470-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb470-8"><a href="05_plot.html#cb470-8" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-174-1.png" width="672" /></p>
</div>
</div>
<div id="次元の密度グラフ" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> 1次元の密度グラフ<a href="05_plot.html#次元の密度グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：連続型変数</li>
<li>Y軸：なし</li>
</ul>
<p>密度グラフは<code>geom_density()</code>関数で作成します。</p>
<div id="密度グラフの基本形" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> 密度グラフの基本形<a href="05_plot.html#密度グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="05_plot.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb471-2"><a href="05_plot.html#cb471-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy)</span>
<span id="cb471-3"><a href="05_plot.html#cb471-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb471-4"><a href="05_plot.html#cb471-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">kernel =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="co"># カーネル関数の種類</span></span>
<span id="cb471-5"><a href="05_plot.html#cb471-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb471-6"><a href="05_plot.html#cb471-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb471-7"><a href="05_plot.html#cb471-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb471-8"><a href="05_plot.html#cb471-8" aria-hidden="true" tabindex="-1"></a>               )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-175-1.png" width="672" /></p>
</div>
<div id="横並び密度グラフ" class="section level3 hasAnchor" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> 横並び密度グラフ<a href="05_plot.html#横並び密度グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>グループ別の密度グラフを横並び形式で作成するには、<code>position</code>引数に<code>"dodge"</code>を指定します。</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="05_plot.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb472-2"><a href="05_plot.html#cb472-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">color =</span> class)</span>
<span id="cb472-3"><a href="05_plot.html#cb472-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb472-4"><a href="05_plot.html#cb472-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">kernel =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="co"># カーネル関数の種類</span></span>
<span id="cb472-5"><a href="05_plot.html#cb472-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>, <span class="co"># 横並びポジション</span></span>
<span id="cb472-6"><a href="05_plot.html#cb472-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb472-7"><a href="05_plot.html#cb472-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb472-8"><a href="05_plot.html#cb472-8" aria-hidden="true" tabindex="-1"></a>               )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-176-1.png" width="672" /></p>
<p>横並びの密度グラフは<code>geom_freqpoly()</code>関数でも作成できます。<code>geom_freqpoly()</code>関数で<code>mapping = aes(y = ..density..)</code>を指定すると、各グループの度数を標準化して密度グラフに変換します。</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="05_plot.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb473-2"><a href="05_plot.html#cb473-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">y =</span> ..density.., <span class="at">color =</span> class)</span>
<span id="cb473-3"><a href="05_plot.html#cb473-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb473-4"><a href="05_plot.html#cb473-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="co"># 階級幅</span></span>
<span id="cb473-5"><a href="05_plot.html#cb473-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb473-6"><a href="05_plot.html#cb473-6" aria-hidden="true" tabindex="-1"></a>                )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-177-1.png" width="672" /></p>
</div>
<div id="積上密度グラフ" class="section level3 hasAnchor" number="5.7.3">
<h3><span class="header-section-number">5.7.3</span> 積上密度グラフ<a href="05_plot.html#積上密度グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>グループ別の密度グラフを積上形式で作成するには、<code>position</code>引数に<code>"stack"</code>を指定します。</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="05_plot.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb474-2"><a href="05_plot.html#cb474-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb474-3"><a href="05_plot.html#cb474-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb474-4"><a href="05_plot.html#cb474-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">kernel =</span> <span class="st">&quot;gaussian&quot;</span>, <span class="co"># カーネル関数の種類</span></span>
<span id="cb474-5"><a href="05_plot.html#cb474-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">position =</span> <span class="st">&quot;stack&quot;</span>, <span class="co"># 積上ポジション</span></span>
<span id="cb474-6"><a href="05_plot.html#cb474-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb474-7"><a href="05_plot.html#cb474-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb474-8"><a href="05_plot.html#cb474-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb474-9"><a href="05_plot.html#cb474-9" aria-hidden="true" tabindex="-1"></a>               )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-178-1.png" width="672" /></p>
</div>
</div>
<div id="次元の度数分布離散型-1" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> 2次元の度数分布（離散型）<a href="05_plot.html#次元の度数分布離散型-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：離散型変数</li>
<li>Y軸：離散型変数</li>
</ul>
<p>離散型変数の2次元の度数分布を作成するには、度数バブルチャートや度数ヒートマップを用います。度数バブルチャートを作成するには<code>geom_count()</code>関数を使用します。また、離散型変数の度数ヒートマップを作成するには<code>geom_tile()</code>関数を使用します。</p>
<div id="度数バブルチャートの基本形" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> 度数バブルチャートの基本形<a href="05_plot.html#度数バブルチャートの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="05_plot.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb475-2"><a href="05_plot.html#cb475-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> class)</span>
<span id="cb475-3"><a href="05_plot.html#cb475-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb475-4"><a href="05_plot.html#cb475-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_count</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb475-5"><a href="05_plot.html#cb475-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb475-6"><a href="05_plot.html#cb475-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb475-7"><a href="05_plot.html#cb475-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb475-8"><a href="05_plot.html#cb475-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb475-9"><a href="05_plot.html#cb475-9" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span> </span>
<span id="cb475-10"><a href="05_plot.html#cb475-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">15</span> <span class="co"># 変量とマーカーの面積を比例させる</span></span>
<span id="cb475-11"><a href="05_plot.html#cb475-11" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span> </span>
<span id="cb475-12"><a href="05_plot.html#cb475-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">1.0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
</div>
<div id="度数ヒートマップの基本形" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> 度数ヒートマップの基本形<a href="05_plot.html#度数ヒートマップの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="05_plot.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb476-2"><a href="05_plot.html#cb476-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">count</span>(manufacturer, class), <span class="co"># データの度数を格納した変数を作成</span></span>
<span id="cb476-3"><a href="05_plot.html#cb476-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> class, <span class="at">fill =</span> n)</span>
<span id="cb476-4"><a href="05_plot.html#cb476-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb476-5"><a href="05_plot.html#cb476-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">height =</span> <span class="fl">1.0</span>, <span class="co"># タイルの高さ</span></span>
<span id="cb476-6"><a href="05_plot.html#cb476-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">width =</span> <span class="fl">1.0</span>, <span class="co"># タイルの幅</span></span>
<span id="cb476-7"><a href="05_plot.html#cb476-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの色の透明度</span></span>
<span id="cb476-8"><a href="05_plot.html#cb476-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb476-9"><a href="05_plot.html#cb476-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb476-10"><a href="05_plot.html#cb476-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb476-11"><a href="05_plot.html#cb476-11" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb476-12"><a href="05_plot.html#cb476-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span> </span>
<span id="cb476-13"><a href="05_plot.html#cb476-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">1.0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-180-1.png" width="672" /></p>
</div>
</div>
<div id="次元の度数分布連続型-1" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> 2次元の度数分布（連続型）<a href="05_plot.html#次元の度数分布連続型-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：連続型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>連続型変数の2次元の度数分布を作成するには、度数ヒートマップを用います。連続型変数の度数ヒートマップを作成するには<code>geom_bin2d()</code>関数を使用します。</p>
<div id="度数ヒートマップの基本形-1" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> 度数ヒートマップの基本形<a href="05_plot.html#度数ヒートマップの基本形-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="05_plot.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds,</span>
<span id="cb477-2"><a href="05_plot.html#cb477-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)</span>
<span id="cb477-3"><a href="05_plot.html#cb477-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb477-4"><a href="05_plot.html#cb477-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>(<span class="at">bins =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">75</span>), <span class="co"># X軸・Y軸の階級数（デフォルトは30）</span></span>
<span id="cb477-5"><a href="05_plot.html#cb477-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの色の透明度</span></span>
<span id="cb477-6"><a href="05_plot.html#cb477-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="cn">NA</span>, <span class="co"># 線の色</span></span>
<span id="cb477-7"><a href="05_plot.html#cb477-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類</span></span>
<span id="cb477-8"><a href="05_plot.html#cb477-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.2</span> <span class="co"># 線の太さ</span></span>
<span id="cb477-9"><a href="05_plot.html#cb477-9" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb477-10"><a href="05_plot.html#cb477-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-181-1.png" width="672" /></p>
</div>
</div>
<div id="次元の密度グラフ-1" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> 2次元の密度グラフ<a href="05_plot.html#次元の密度グラフ-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：連続型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>2次元の密度グラフを作成するには、<code>geom_density2d()</code>関数ファミリーを使用します。</p>
<p>まず、使用するサンプルデータを作成します。データサイズが大きい場合、2次元密度グラフを作成するために時間を要するため、<code>dplyr::sample_n()</code>関数でサンプリングします。</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="05_plot.html#cb478-1" aria-hidden="true" tabindex="-1"></a>diamonds_small <span class="ot">&lt;-</span> diamonds <span class="sc">%&gt;%</span> </span>
<span id="cb478-2"><a href="05_plot.html#cb478-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">5000</span>)</span></code></pre></div>
<div id="次元密度グラフの基本形" class="section level3 hasAnchor" number="5.10.1">
<h3><span class="header-section-number">5.10.1</span> 2次元密度グラフの基本形<a href="05_plot.html#次元密度グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="05_plot.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds_small,</span>
<span id="cb479-2"><a href="05_plot.html#cb479-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)</span>
<span id="cb479-3"><a href="05_plot.html#cb479-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb479-4"><a href="05_plot.html#cb479-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density2d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-183-1.png" width="672" /></p>
</div>
<div id="次元密度グラフの塗りつぶし版" class="section level3 hasAnchor" number="5.10.2">
<h3><span class="header-section-number">5.10.2</span> 2次元密度グラフの塗りつぶし版<a href="05_plot.html#次元密度グラフの塗りつぶし版" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="05_plot.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds_small,</span>
<span id="cb480-2"><a href="05_plot.html#cb480-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)</span>
<span id="cb480-3"><a href="05_plot.html#cb480-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb480-4"><a href="05_plot.html#cb480-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density2d_filled</span>() <span class="sc">+</span></span>
<span id="cb480-5"><a href="05_plot.html#cb480-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Reds&quot;</span>,</span>
<span id="cb480-6"><a href="05_plot.html#cb480-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">direction =</span> <span class="dv">1</span></span>
<span id="cb480-7"><a href="05_plot.html#cb480-7" aria-hidden="true" tabindex="-1"></a>                    )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-184-1.png" width="672" /></p>
</div>
</div>
<div id="qqプロット" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> QQプロット<a href="05_plot.html#qqプロット" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸・Y軸：連続型変数</li>
</ul>
<p>QQプロットは<code>geom_qq()</code>関数で作成します。他のグラフと異なり、<code>mapping = aes(sample = 変数)</code>で変数を指定します。</p>
<p>QQ（Quantile-Quantile）プロットは、データが正規分布にどの程度近いかを検証するグラフです。Y軸にデータを順番に並べた値、X軸にデータが正規分布に従うと仮定した場合にとりうる期待値を標準化した値をとり、散布図を描いたものです。</p>
<p>QQプロットが直線上にある場合、データは正規分布に従うと解釈できます。一方、QQプロットが直線から乖離している場合は、正規分布に従っておらず、分布にゆがみがあると解釈できます。</p>
<p>例えば、QQプロットが<u>右下に凸な形状の場合は、データは右に長い裾（テール）</u>をもちます。一方、QQプロットが<u>左上に凸な形状の場合は、データの分布は左に長い裾（テール）</u>をもちます。</p>
<p>また、QQプロットが<u>S字状（前半は右下に凸、後半は左上に凸）の場合は、データの両裾が重い、いわゆるファット・テールの分布</u>になります。一方、<u>逆S字状（前半は左上に凸、後半は右下に凸）の場合は、ピーク部分が突出した分布</u>になります。</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="05_plot.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 右に長い裾をもつデータのQQプロット</span></span>
<span id="cb481-2"><a href="05_plot.html#cb481-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> iris,</span>
<span id="cb481-3"><a href="05_plot.html#cb481-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">sample =</span> Sepal.Length)</span>
<span id="cb481-4"><a href="05_plot.html#cb481-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb481-5"><a href="05_plot.html#cb481-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_qq_line</span>() <span class="sc">+</span></span>
<span id="cb481-6"><a href="05_plot.html#cb481-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_qq</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-185-1.png" width="672" /></p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="05_plot.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ファット・テールをもつデータのQQプロット</span></span>
<span id="cb482-2"><a href="05_plot.html#cb482-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> economics,</span>
<span id="cb482-3"><a href="05_plot.html#cb482-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">sample =</span> unemploy)</span>
<span id="cb482-4"><a href="05_plot.html#cb482-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb482-5"><a href="05_plot.html#cb482-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_qq_line</span>() <span class="sc">+</span></span>
<span id="cb482-6"><a href="05_plot.html#cb482-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_qq</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-186-1.png" width="672" /></p>
</div>
<div id="散布図バブルチャート" class="section level2 hasAnchor" number="5.12">
<h2><span class="header-section-number">5.12</span> 散布図・バブルチャート<a href="05_plot.html#散布図バブルチャート" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：連続型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>散布図とバブルチャートは<code>geom_point()</code>関数で作成します。バブルチャートの上に<code>geom_smooth()</code>関数で近似曲線を重ねることができます。</p>
<p>まず、プロット用のデータを作成します。</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="05_plot.html#cb483-1" aria-hidden="true" tabindex="-1"></a>data_mpg_point <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb483-2"><a href="05_plot.html#cb483-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span> </span>
<span id="cb483-3"><a href="05_plot.html#cb483-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(displ, cty, hwy), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb483-4"><a href="05_plot.html#cb483-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb483-5"><a href="05_plot.html#cb483-5" aria-hidden="true" tabindex="-1"></a>data_mpg_point</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    manufacturer displ   cty   hwy
##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 audi          2.54  17.6  26.4
##  2 chevrolet     5.06  15    21.9
##  3 dodge         4.38  13.1  17.9
##  4 ford          4.54  14    19.4
##  5 honda         1.71  24.4  32.6
##  6 hyundai       2.43  18.6  26.9
##  7 jeep          4.58  13.5  17.6
##  8 land rover    4.3   11.5  16.5
##  9 lincoln       5.4   11.3  17  
## 10 mercury       4.4   13.2  18  
## 11 nissan        3.27  18.1  24.6
## 12 pontiac       3.96  17    26.4
## 13 subaru        2.46  19.3  25.6
## 14 toyota        2.95  18.5  24.9
## 15 volkswagen    2.26  20.9  29.2</code></pre>
<div id="散布図の基本形" class="section level3 hasAnchor" number="5.12.1">
<h3><span class="header-section-number">5.12.1</span> 散布図の基本形<a href="05_plot.html#散布図の基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="05_plot.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb485-2"><a href="05_plot.html#cb485-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb485-3"><a href="05_plot.html#cb485-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb485-4"><a href="05_plot.html#cb485-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb485-5"><a href="05_plot.html#cb485-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb485-6"><a href="05_plot.html#cb485-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb485-7"><a href="05_plot.html#cb485-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb485-8"><a href="05_plot.html#cb485-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb485-9"><a href="05_plot.html#cb485-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb485-10"><a href="05_plot.html#cb485-10" aria-hidden="true" tabindex="-1"></a>             )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-188-1.png" width="672" /></p>
</div>
<div id="バブルチャートの基本形" class="section level3 hasAnchor" number="5.12.2">
<h3><span class="header-section-number">5.12.2</span> バブルチャートの基本形<a href="05_plot.html#バブルチャートの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>バブルチャートを作成するには、<code>ggplot()</code>関数の<code>mapping = aes()</code>関数で<code>size</code>引数にバブルのサイズを変化させたい変数を指定します。</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="05_plot.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_point,</span>
<span id="cb486-2"><a href="05_plot.html#cb486-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">size =</span> displ) <span class="co"># aes() 関数内のsize引数に連続型変数を指定</span></span>
<span id="cb486-3"><a href="05_plot.html#cb486-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb486-4"><a href="05_plot.html#cb486-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb486-5"><a href="05_plot.html#cb486-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb486-6"><a href="05_plot.html#cb486-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb486-7"><a href="05_plot.html#cb486-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb486-8"><a href="05_plot.html#cb486-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb486-9"><a href="05_plot.html#cb486-9" aria-hidden="true" tabindex="-1"></a>             )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-189-1.png" width="672" /></p>
</div>
<div id="散布図にコネクタ線を追加" class="section level3 hasAnchor" number="5.12.3">
<h3><span class="header-section-number">5.12.3</span> 散布図にコネクタ線を追加<a href="05_plot.html#散布図にコネクタ線を追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>散布図のマーカー間をつなぐコネクタ線を追加するには、<code>geom_path()</code>関数を追加します。折れ線グラフを作成する<code>geom_line()</code>関数とは異なるので注意してください。</p>
<p><code>geom_path()</code>関数と<code>geom_line()</code>関数はどちらもマーカー間をつなぐコネクタ線を追加する関数ですが、<code>geom_path()</code>関数はデータセット上の順番で線を引く一方、<code>geom_line()</code>関数はデータセット上の順番に関わらずX軸上の順番で線を引くという違いがあります。</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="05_plot.html#cb487-1" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">%&gt;%</span> </span>
<span id="cb487-2"><a href="05_plot.html#cb487-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="st">&quot;2000-01-01&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb487-3"><a href="05_plot.html#cb487-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> unemploy, <span class="at">y =</span> uempmed)) <span class="sc">+</span></span>
<span id="cb487-4"><a href="05_plot.html#cb487-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb487-5"><a href="05_plot.html#cb487-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb487-6"><a href="05_plot.html#cb487-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の大きさ</span></span>
<span id="cb487-7"><a href="05_plot.html#cb487-7" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb487-8"><a href="05_plot.html#cb487-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb487-9"><a href="05_plot.html#cb487-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb487-10"><a href="05_plot.html#cb487-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb487-11"><a href="05_plot.html#cb487-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb487-12"><a href="05_plot.html#cb487-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb487-13"><a href="05_plot.html#cb487-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb487-14"><a href="05_plot.html#cb487-14" aria-hidden="true" tabindex="-1"></a>             )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-190-1.png" width="672" /></p>
</div>
<div id="散布図に近似曲線を追加" class="section level3 hasAnchor" number="5.12.4">
<h3><span class="header-section-number">5.12.4</span> 散布図に近似曲線を追加<a href="05_plot.html#散布図に近似曲線を追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>散布図に近似曲線を追加するには、<code>geom_smooth()</code>関数を使用します。</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="05_plot.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb488-2"><a href="05_plot.html#cb488-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb488-3"><a href="05_plot.html#cb488-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb488-4"><a href="05_plot.html#cb488-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb488-5"><a href="05_plot.html#cb488-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb488-6"><a href="05_plot.html#cb488-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb488-7"><a href="05_plot.html#cb488-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb488-8"><a href="05_plot.html#cb488-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb488-9"><a href="05_plot.html#cb488-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb488-10"><a href="05_plot.html#cb488-10" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb488-11"><a href="05_plot.html#cb488-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">formula =</span> y <span class="sc">~</span> x, <span class="co"># 近似曲線の推計式</span></span>
<span id="cb488-12"><a href="05_plot.html#cb488-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">method =</span> <span class="st">&quot;loess&quot;</span>, <span class="co"># 近似手法 (lm, glm, gam, loess)</span></span>
<span id="cb488-13"><a href="05_plot.html#cb488-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># 誤差範囲の透明度</span></span>
<span id="cb488-14"><a href="05_plot.html#cb488-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 近似曲線の色</span></span>
<span id="cb488-15"><a href="05_plot.html#cb488-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;gray&quot;</span>, <span class="co"># 誤差範囲の色</span></span>
<span id="cb488-16"><a href="05_plot.html#cb488-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="co"># 近似曲線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb488-17"><a href="05_plot.html#cb488-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 近似曲線の太さ</span></span>
<span id="cb488-18"><a href="05_plot.html#cb488-18" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-191-1.png" width="672" /></p>
</div>
<div id="散布図にラベルを追加" class="section level3 hasAnchor" number="5.12.5">
<h3><span class="header-section-number">5.12.5</span> 散布図にラベルを追加<a href="05_plot.html#散布図にラベルを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>散布図にラベルを追加するには、<code>ggrepel</code>パッケージの<code>geom_text_repel()</code>関数を使用します。<code>geom_text_repel()</code>関数は、散布図のマーカーとラベルが重ならないようにラベルの位置を自動で調整します。</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="05_plot.html#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_point,</span>
<span id="cb489-2"><a href="05_plot.html#cb489-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb489-3"><a href="05_plot.html#cb489-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb489-4"><a href="05_plot.html#cb489-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb489-5"><a href="05_plot.html#cb489-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb489-6"><a href="05_plot.html#cb489-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb489-7"><a href="05_plot.html#cb489-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb489-8"><a href="05_plot.html#cb489-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb489-9"><a href="05_plot.html#cb489-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb489-10"><a href="05_plot.html#cb489-10" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb489-11"><a href="05_plot.html#cb489-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> manufacturer),</span>
<span id="cb489-12"><a href="05_plot.html#cb489-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">seed =</span> <span class="cn">NA</span>, <span class="co"># テキストの配置を決定するランダムシード</span></span>
<span id="cb489-13"><a href="05_plot.html#cb489-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">direction =</span> <span class="st">&quot;both&quot;</span>, <span class="co"># テキストの整列方向 (both / x / y)</span></span>
<span id="cb489-14"><a href="05_plot.html#cb489-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hjust =</span> <span class="fl">0.0</span>, <span class="co"># 横方向の整列位置 (0-1) </span></span>
<span id="cb489-15"><a href="05_plot.html#cb489-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="co"># 縦方向の整列位置 (0-1)</span></span>
<span id="cb489-16"><a href="05_plot.html#cb489-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nudge_x =</span> <span class="cn">NULL</span>, <span class="co"># マーカーからの横方向のスペース (NULL, 0-)</span></span>
<span id="cb489-17"><a href="05_plot.html#cb489-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nudge_y =</span> <span class="cn">NULL</span>, <span class="co"># マーカーからの縦方向のスペース (NULL, 0-)</span></span>
<span id="cb489-18"><a href="05_plot.html#cb489-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">box.padding =</span> <span class="fl">0.5</span>, <span class="co"># テキスト周囲のスペース (0-)</span></span>
<span id="cb489-19"><a href="05_plot.html#cb489-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">point.padding =</span> <span class="fl">0.1</span>, <span class="co"># マーカー周囲のスペース (0-)</span></span>
<span id="cb489-20"><a href="05_plot.html#cb489-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.alpha =</span> <span class="fl">1.0</span>, <span class="co"># 引き出し線の透明度</span></span>
<span id="cb489-21"><a href="05_plot.html#cb489-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 引き出し線の色</span></span>
<span id="cb489-22"><a href="05_plot.html#cb489-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.size =</span> <span class="fl">0.5</span>, <span class="co"># 引き出し線の太さ</span></span>
<span id="cb489-23"><a href="05_plot.html#cb489-23" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># 引き出し線の最低長</span></span>
<span id="cb489-24"><a href="05_plot.html#cb489-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># テキストの色</span></span>
<span id="cb489-25"><a href="05_plot.html#cb489-25" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb489-26"><a href="05_plot.html#cb489-26" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="fl">4.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb489-27"><a href="05_plot.html#cb489-27" aria-hidden="true" tabindex="-1"></a>                  )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-192-1.png" width="672" /></p>
</div>
<div id="バブルチャートにラベルを追加" class="section level3 hasAnchor" number="5.12.6">
<h3><span class="header-section-number">5.12.6</span> バブルチャートにラベルを追加<a href="05_plot.html#バブルチャートにラベルを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="05_plot.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_point,</span>
<span id="cb490-2"><a href="05_plot.html#cb490-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">size =</span> displ) <span class="co"># aes() 関数内のsize引数に連続型変数を指定</span></span>
<span id="cb490-3"><a href="05_plot.html#cb490-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb490-4"><a href="05_plot.html#cb490-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb490-5"><a href="05_plot.html#cb490-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb490-6"><a href="05_plot.html#cb490-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb490-7"><a href="05_plot.html#cb490-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb490-8"><a href="05_plot.html#cb490-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb490-9"><a href="05_plot.html#cb490-9" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb490-10"><a href="05_plot.html#cb490-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> manufacturer),</span>
<span id="cb490-11"><a href="05_plot.html#cb490-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">seed =</span> <span class="cn">NA</span>, <span class="co"># テキストの配置を決定するランダムシード</span></span>
<span id="cb490-12"><a href="05_plot.html#cb490-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">direction =</span> <span class="st">&quot;both&quot;</span>, <span class="co"># テキストの整列方向 (both / x / y)</span></span>
<span id="cb490-13"><a href="05_plot.html#cb490-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hjust =</span> <span class="fl">0.0</span>, <span class="co"># 横方向の整列位置 (0-1) </span></span>
<span id="cb490-14"><a href="05_plot.html#cb490-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="co"># 縦方向の整列位置 (0-1)</span></span>
<span id="cb490-15"><a href="05_plot.html#cb490-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nudge_x =</span> <span class="cn">NULL</span>, <span class="co"># マーカーからの横方向のスペース (NULL, 0-)</span></span>
<span id="cb490-16"><a href="05_plot.html#cb490-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nudge_y =</span> <span class="cn">NULL</span>, <span class="co"># マーカーからの縦方向のスペース (NULL, 0-)</span></span>
<span id="cb490-17"><a href="05_plot.html#cb490-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">box.padding =</span> <span class="fl">1.0</span>, <span class="co"># テキスト周囲のスペース (0-)</span></span>
<span id="cb490-18"><a href="05_plot.html#cb490-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">point.padding =</span> <span class="fl">0.1</span>, <span class="co"># マーカー周囲のスペース (0-)</span></span>
<span id="cb490-19"><a href="05_plot.html#cb490-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.alpha =</span> <span class="fl">1.0</span>, <span class="co"># 引き出し線の透明度</span></span>
<span id="cb490-20"><a href="05_plot.html#cb490-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 引き出し線の色</span></span>
<span id="cb490-21"><a href="05_plot.html#cb490-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.size =</span> <span class="fl">0.5</span>, <span class="co"># 引き出し線の太さ</span></span>
<span id="cb490-22"><a href="05_plot.html#cb490-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min.segment.length =</span> <span class="dv">0</span>, <span class="co"># 引き出し線の最低長</span></span>
<span id="cb490-23"><a href="05_plot.html#cb490-23" aria-hidden="true" tabindex="-1"></a>                  <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># テキストの色</span></span>
<span id="cb490-24"><a href="05_plot.html#cb490-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb490-25"><a href="05_plot.html#cb490-25" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="fl">4.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb490-26"><a href="05_plot.html#cb490-26" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb490-27"><a href="05_plot.html#cb490-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size_area</span>(<span class="at">max_size =</span> <span class="dv">15</span> <span class="co"># 変量とマーカーの面積を比例させる</span></span>
<span id="cb490-28"><a href="05_plot.html#cb490-28" aria-hidden="true" tabindex="-1"></a>                  )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-193-1.png" width="672" /></p>
</div>
</div>
<div id="棒グラフ" class="section level2 hasAnchor" number="5.13">
<h2><span class="header-section-number">5.13</span> 棒グラフ<a href="05_plot.html#棒グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：離散型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>棒グラフは<code>geom_col()</code>関数で作成します。</p>
<p>まず、プロット用のデータを作成します。</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="05_plot.html#cb491-1" aria-hidden="true" tabindex="-1"></a>data_mpg_col <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb491-2"><a href="05_plot.html#cb491-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span> </span>
<span id="cb491-3"><a href="05_plot.html#cb491-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(cty, hwy), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb491-4"><a href="05_plot.html#cb491-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb491-5"><a href="05_plot.html#cb491-5" aria-hidden="true" tabindex="-1"></a>data_mpg_col</span></code></pre></div>
<pre><code>## # A tibble: 15 × 3
##    manufacturer   cty   hwy
##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;
##  1 audi          17.6  26.4
##  2 chevrolet     15    21.9
##  3 dodge         13.1  17.9
##  4 ford          14    19.4
##  5 honda         24.4  32.6
##  6 hyundai       18.6  26.9
##  7 jeep          13.5  17.6
##  8 land rover    11.5  16.5
##  9 lincoln       11.3  17  
## 10 mercury       13.2  18  
## 11 nissan        18.1  24.6
## 12 pontiac       17    26.4
## 13 subaru        19.3  25.6
## 14 toyota        18.5  24.9
## 15 volkswagen    20.9  29.2</code></pre>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="05_plot.html#cb493-1" aria-hidden="true" tabindex="-1"></a>data_owid_col <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span> </span>
<span id="cb493-2"><a href="05_plot.html#cb493-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases) <span class="sc">%&gt;%</span> </span>
<span id="cb493-3"><a href="05_plot.html#cb493-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb493-4"><a href="05_plot.html#cb493-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">str_c</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(date), <span class="st">&quot;年&quot;</span>), <span class="at">.after =</span> <span class="st">&quot;date&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb493-5"><a href="05_plot.html#cb493-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(location, year) <span class="sc">%&gt;%</span> </span>
<span id="cb493-6"><a href="05_plot.html#cb493-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">across</span>(new_cases, sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb493-7"><a href="05_plot.html#cb493-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb493-8"><a href="05_plot.html#cb493-8" aria-hidden="true" tabindex="-1"></a>data_owid_col</span></code></pre></div>
<pre><code>## # A tibble: 15 × 3
## # Groups:   location [5]
##    location       year   new_cases
##    &lt;chr&gt;          &lt;chr&gt;      &lt;dbl&gt;
##  1 France         2020年   2338258
##  2 France         2021年   6371668
##  3 France         2022年  29279621
##  4 Germany        2020年   1660178
##  5 Germany        2021年   5353865
##  6 Germany        2022年  30227893
##  7 Italy          2020年   2083689
##  8 Italy          2021年   3897739
##  9 Italy          2022年  19187010
## 10 Japan          2020年    230304
## 11 Japan          2021年   1503484
## 12 Japan          2022年  27371282
## 13 United Kingdom 2020年   2563561
## 14 United Kingdom 2021年  10878146
## 15 United Kingdom 2022年  10752848</code></pre>
<div id="縦棒グラフの基本形" class="section level3 hasAnchor" number="5.13.1">
<h3><span class="header-section-number">5.13.1</span> 縦棒グラフの基本形<a href="05_plot.html#縦棒グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="05_plot.html#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_col,</span>
<span id="cb495-2"><a href="05_plot.html#cb495-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> cty)</span>
<span id="cb495-3"><a href="05_plot.html#cb495-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb495-4"><a href="05_plot.html#cb495-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb495-5"><a href="05_plot.html#cb495-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb495-6"><a href="05_plot.html#cb495-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb495-7"><a href="05_plot.html#cb495-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb495-8"><a href="05_plot.html#cb495-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb495-9"><a href="05_plot.html#cb495-9" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb495-10"><a href="05_plot.html#cb495-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">1.0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-196-1.png" width="672" /></p>
</div>
<div id="横棒グラフ" class="section level3 hasAnchor" number="5.13.2">
<h3><span class="header-section-number">5.13.2</span> 横棒グラフ<a href="05_plot.html#横棒グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>横棒グラフを作成するには、縦棒グラフを作成した後に<code>coord_flip()</code>関数で横棒グラフに転換します。そのため、X軸とY軸の変数指定は縦棒グラフの場合と同じです。</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="05_plot.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_col,</span>
<span id="cb496-2"><a href="05_plot.html#cb496-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> cty)</span>
<span id="cb496-3"><a href="05_plot.html#cb496-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb496-4"><a href="05_plot.html#cb496-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb496-5"><a href="05_plot.html#cb496-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb496-6"><a href="05_plot.html#cb496-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb496-7"><a href="05_plot.html#cb496-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb496-8"><a href="05_plot.html#cb496-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb496-9"><a href="05_plot.html#cb496-9" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb496-10"><a href="05_plot.html#cb496-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-197-1.png" width="672" /></p>
</div>
<div id="縦棒グラフの順序並べ替え" class="section level3 hasAnchor" number="5.13.3">
<h3><span class="header-section-number">5.13.3</span> 縦棒グラフの順序並べ替え<a href="05_plot.html#縦棒グラフの順序並べ替え" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>縦棒グラフのX軸の順番を並べ替えるには、X軸の変数を指定する際に<code>fct_reorder()</code>関数を使用します。</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="05_plot.html#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_col,</span>
<span id="cb497-2"><a href="05_plot.html#cb497-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(manufacturer, <span class="sc">-</span>cty), <span class="at">y =</span> cty)</span>
<span id="cb497-3"><a href="05_plot.html#cb497-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb497-4"><a href="05_plot.html#cb497-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb497-5"><a href="05_plot.html#cb497-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb497-6"><a href="05_plot.html#cb497-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb497-7"><a href="05_plot.html#cb497-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb497-8"><a href="05_plot.html#cb497-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb497-9"><a href="05_plot.html#cb497-9" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb497-10"><a href="05_plot.html#cb497-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">1.0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-198-1.png" width="672" /></p>
</div>
<div id="縦棒グラフにラベルを追加" class="section level3 hasAnchor" number="5.13.4">
<h3><span class="header-section-number">5.13.4</span> 縦棒グラフにラベルを追加<a href="05_plot.html#縦棒グラフにラベルを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>縦棒グラフにデータラベルを追加するには、<code>geom_text()</code>関数を使用します。</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="05_plot.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_col,</span>
<span id="cb498-2"><a href="05_plot.html#cb498-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(manufacturer, <span class="sc">-</span>cty), <span class="at">y =</span> cty)</span>
<span id="cb498-3"><a href="05_plot.html#cb498-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb498-4"><a href="05_plot.html#cb498-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb498-5"><a href="05_plot.html#cb498-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb498-6"><a href="05_plot.html#cb498-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb498-7"><a href="05_plot.html#cb498-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb498-8"><a href="05_plot.html#cb498-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb498-9"><a href="05_plot.html#cb498-9" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb498-10"><a href="05_plot.html#cb498-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> cty <span class="sc">%&gt;%</span> <span class="fu">sprintf</span>(<span class="at">fmt =</span> <span class="st">&quot;%0.1f&quot;</span>)), <span class="co"># sprintf() 関数で数値の表示形式を指定</span></span>
<span id="cb498-11"><a href="05_plot.html#cb498-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="co"># 縦方向の整列位置 (0-1)</span></span>
<span id="cb498-12"><a href="05_plot.html#cb498-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># テキストの色</span></span>
<span id="cb498-13"><a href="05_plot.html#cb498-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb498-14"><a href="05_plot.html#cb498-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">4.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb498-15"><a href="05_plot.html#cb498-15" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb498-16"><a href="05_plot.html#cb498-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="fl">1.0</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-199-1.png" width="672" /></p>
</div>
<div id="横並び縦棒グラフ" class="section level3 hasAnchor" number="5.13.5">
<h3><span class="header-section-number">5.13.5</span> 横並び縦棒グラフ<a href="05_plot.html#横並び縦棒グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>複数の縦棒グラフを横並び形式で作成するには、<code>position</code>引数に<code>position_dodge2()</code>関数や<code>position_dodge()</code>関数を指定します。</p>
<p><code>position_dodge2()</code>関数を指定すると、縦棒の間が適度に離れたグラフが作成されます。縦棒の間隔を<code>padding</code>引数で指定します。</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="05_plot.html#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_col,</span>
<span id="cb499-2"><a href="05_plot.html#cb499-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">y =</span> new_cases, <span class="at">fill =</span> year, <span class="at">group =</span> <span class="fu">rev</span>(year))</span>
<span id="cb499-3"><a href="05_plot.html#cb499-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb499-4"><a href="05_plot.html#cb499-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">padding =</span> <span class="fl">0.1</span>), <span class="co"># 横並びポジション</span></span>
<span id="cb499-5"><a href="05_plot.html#cb499-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb499-6"><a href="05_plot.html#cb499-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb499-7"><a href="05_plot.html#cb499-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb499-8"><a href="05_plot.html#cb499-8" aria-hidden="true" tabindex="-1"></a>           )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-200-1.png" width="672" /></p>
<p><code>position_dodge()</code>関数を指定すると、縦棒が重なったグラフが作成されます。縦棒の重なり度合いを<code>width</code>引数で指定します。</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="05_plot.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_col,</span>
<span id="cb500-2"><a href="05_plot.html#cb500-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">y =</span> new_cases, <span class="at">fill =</span> year, <span class="at">group =</span> <span class="fu">rev</span>(year))</span>
<span id="cb500-3"><a href="05_plot.html#cb500-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb500-4"><a href="05_plot.html#cb500-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>), <span class="co"># 横並びポジション</span></span>
<span id="cb500-5"><a href="05_plot.html#cb500-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb500-6"><a href="05_plot.html#cb500-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb500-7"><a href="05_plot.html#cb500-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb500-8"><a href="05_plot.html#cb500-8" aria-hidden="true" tabindex="-1"></a>           )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-201-1.png" width="672" /></p>
</div>
<div id="積上縦棒グラフ" class="section level3 hasAnchor" number="5.13.6">
<h3><span class="header-section-number">5.13.6</span> 積上縦棒グラフ<a href="05_plot.html#積上縦棒グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>複数の縦棒グラフを積上形式で作成するには、<code>position</code>引数に<code>position_stack()</code>関数を指定します。</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="05_plot.html#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_col,</span>
<span id="cb501-2"><a href="05_plot.html#cb501-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">y =</span> new_cases, <span class="at">fill =</span> year, <span class="at">group =</span> <span class="fu">rev</span>(year))</span>
<span id="cb501-3"><a href="05_plot.html#cb501-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb501-4"><a href="05_plot.html#cb501-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(), <span class="co"># 積上ポジション</span></span>
<span id="cb501-5"><a href="05_plot.html#cb501-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb501-6"><a href="05_plot.html#cb501-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb501-7"><a href="05_plot.html#cb501-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb501-8"><a href="05_plot.html#cb501-8" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb501-9"><a href="05_plot.html#cb501-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-202-1.png" width="672" /></p>
</div>
<div id="積上縦棒グラフにラベルを追加" class="section level3 hasAnchor" number="5.13.7">
<h3><span class="header-section-number">5.13.7</span> 積上縦棒グラフにラベルを追加<a href="05_plot.html#積上縦棒グラフにラベルを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="05_plot.html#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_col,</span>
<span id="cb502-2"><a href="05_plot.html#cb502-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">y =</span> new_cases, <span class="at">fill =</span> year, <span class="at">group =</span> <span class="fu">rev</span>(year))</span>
<span id="cb502-3"><a href="05_plot.html#cb502-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb502-4"><a href="05_plot.html#cb502-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(), <span class="co"># 積上ポジション</span></span>
<span id="cb502-5"><a href="05_plot.html#cb502-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb502-6"><a href="05_plot.html#cb502-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb502-7"><a href="05_plot.html#cb502-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb502-8"><a href="05_plot.html#cb502-8" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb502-9"><a href="05_plot.html#cb502-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> new_cases <span class="sc">%&gt;%</span> <span class="fu">sprintf</span>(<span class="at">fmt =</span> <span class="st">&quot;%0.1f&quot;</span>)), <span class="co"># sprintf() 関数で数値の表示形式を指定</span></span>
<span id="cb502-10"><a href="05_plot.html#cb502-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), <span class="co"># position_stack() 関数で積上棒グラフ上のラベル位置を指定</span></span>
<span id="cb502-11"><a href="05_plot.html#cb502-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="co"># テキストの色</span></span>
<span id="cb502-12"><a href="05_plot.html#cb502-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb502-13"><a href="05_plot.html#cb502-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">4.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb502-14"><a href="05_plot.html#cb502-14" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb502-15"><a href="05_plot.html#cb502-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-203-1.png" width="672" /></p>
</div>
<div id="積上縦棒グラフ-1" class="section level3 hasAnchor" number="5.13.8">
<h3><span class="header-section-number">5.13.8</span> 100％積上縦棒グラフ<a href="05_plot.html#積上縦棒グラフ-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>複数の縦棒グラフを合計が100％になる積上形式で作成するには、<code>position</code>引数に<code>position_fill()</code>関数を指定します。</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="05_plot.html#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_col,</span>
<span id="cb503-2"><a href="05_plot.html#cb503-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">y =</span> new_cases, <span class="at">fill =</span> year, <span class="at">group =</span> <span class="fu">rev</span>(year))</span>
<span id="cb503-3"><a href="05_plot.html#cb503-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb503-4"><a href="05_plot.html#cb503-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_fill</span>(), <span class="co"># 割合積上ポジション</span></span>
<span id="cb503-5"><a href="05_plot.html#cb503-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb503-6"><a href="05_plot.html#cb503-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb503-7"><a href="05_plot.html#cb503-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb503-8"><a href="05_plot.html#cb503-8" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb503-9"><a href="05_plot.html#cb503-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-204-1.png" width="672" /></p>
</div>
<div id="積上縦棒グラフにラベルを追加-1" class="section level3 hasAnchor" number="5.13.9">
<h3><span class="header-section-number">5.13.9</span> 100％積上縦棒グラフにラベルを追加<a href="05_plot.html#積上縦棒グラフにラベルを追加-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="05_plot.html#cb504-1" aria-hidden="true" tabindex="-1"></a>data_owid_col <span class="sc">%&gt;%</span> </span>
<span id="cb504-2"><a href="05_plot.html#cb504-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(location) <span class="sc">%&gt;%</span> </span>
<span id="cb504-3"><a href="05_plot.html#cb504-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">percent =</span> new_cases <span class="sc">/</span> <span class="fu">sum</span>(new_cases)) <span class="sc">%&gt;%</span> </span>
<span id="cb504-4"><a href="05_plot.html#cb504-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> location, <span class="at">y =</span> new_cases, <span class="at">fill =</span> year, <span class="at">group =</span> <span class="fu">rev</span>(year))) <span class="sc">+</span> </span>
<span id="cb504-5"><a href="05_plot.html#cb504-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_fill</span>(), <span class="co"># 割合ポジション</span></span>
<span id="cb504-6"><a href="05_plot.html#cb504-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb504-7"><a href="05_plot.html#cb504-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb504-8"><a href="05_plot.html#cb504-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="fl">0.9</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb504-9"><a href="05_plot.html#cb504-9" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb504-10"><a href="05_plot.html#cb504-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> percent <span class="sc">%&gt;%</span> <span class="fu">sprintf</span>(<span class="at">fmt =</span> <span class="st">&quot;%0.2f&quot;</span>)), <span class="co"># sprintf() 関数で数値の表示形式を指定</span></span>
<span id="cb504-11"><a href="05_plot.html#cb504-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_fill</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), <span class="co"># position_fill() 関数で割合棒グラフ上のラベル位置を指定</span></span>
<span id="cb504-12"><a href="05_plot.html#cb504-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="co"># テキストの色</span></span>
<span id="cb504-13"><a href="05_plot.html#cb504-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb504-14"><a href="05_plot.html#cb504-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">4.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb504-15"><a href="05_plot.html#cb504-15" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb504-16"><a href="05_plot.html#cb504-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-205-1.png" width="672" /></p>
</div>
</div>
<div id="円グラフ" class="section level2 hasAnchor" number="5.14">
<h2><span class="header-section-number">5.14</span> 円グラフ<a href="05_plot.html#円グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：単一の値</li>
<li>Y軸：連続型変数</li>
</ul>
<p>円グラフを作成するには、<code>geom_col()</code>関数で積上棒グラフを作成した後に、<code>coord_polar()</code>関数で円グラフに転換します。</p>
<p>まず、プロット用のデータを作成します。</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb505-1"><a href="05_plot.html#cb505-1" aria-hidden="true" tabindex="-1"></a>data_mpg_circle <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb505-2"><a href="05_plot.html#cb505-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb505-3"><a href="05_plot.html#cb505-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(hwy), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb505-4"><a href="05_plot.html#cb505-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb505-5"><a href="05_plot.html#cb505-5" aria-hidden="true" tabindex="-1"></a>data_mpg_circle</span></code></pre></div>
<pre><code>## # A tibble: 7 × 2
##   class        hwy
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 2seater     24.8
## 2 compact     28.3
## 3 midsize     27.3
## 4 minivan     22.4
## 5 pickup      16.9
## 6 subcompact  28.1
## 7 suv         18.1</code></pre>
<div id="円グラフの基本形" class="section level3 hasAnchor" number="5.14.1">
<h3><span class="header-section-number">5.14.1</span> 円グラフの基本形<a href="05_plot.html#円グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="05_plot.html#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_mpg_circle,</span>
<span id="cb507-2"><a href="05_plot.html#cb507-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> hwy, <span class="at">fill =</span> class, <span class="at">group =</span> <span class="fu">rev</span>(class))</span>
<span id="cb507-3"><a href="05_plot.html#cb507-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb507-4"><a href="05_plot.html#cb507-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(), <span class="co"># 積上ポジション</span></span>
<span id="cb507-5"><a href="05_plot.html#cb507-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb507-6"><a href="05_plot.html#cb507-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb507-7"><a href="05_plot.html#cb507-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb507-8"><a href="05_plot.html#cb507-8" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb507-9"><a href="05_plot.html#cb507-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> hwy <span class="sc">%&gt;%</span> <span class="fu">sprintf</span>(<span class="at">fmt =</span> <span class="st">&quot;%0.1f&quot;</span>)), <span class="co"># sprintf() 関数で数値の表示形式を指定</span></span>
<span id="cb507-10"><a href="05_plot.html#cb507-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>), <span class="co"># position_stack() 関数で積上棒グラフ上のラベル位置を指定</span></span>
<span id="cb507-11"><a href="05_plot.html#cb507-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="co"># テキストの色</span></span>
<span id="cb507-12"><a href="05_plot.html#cb507-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb507-13"><a href="05_plot.html#cb507-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">4.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb507-14"><a href="05_plot.html#cb507-14" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb507-15"><a href="05_plot.html#cb507-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">&quot;y&quot;</span>, <span class="co"># 円グラフを作成する軸</span></span>
<span id="cb507-16"><a href="05_plot.html#cb507-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">start =</span> <span class="dv">0</span>, <span class="co"># 円グラフの開始位置（ラジアン）</span></span>
<span id="cb507-17"><a href="05_plot.html#cb507-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 円グラフの方向（1：時計回り、-1：反時計回り）</span></span>
<span id="cb507-18"><a href="05_plot.html#cb507-18" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb507-19"><a href="05_plot.html#cb507-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>(), <span class="co"># パネルの軸や目盛り線を表示しない</span></span>
<span id="cb507-20"><a href="05_plot.html#cb507-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb507-21"><a href="05_plot.html#cb507-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text  =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb507-22"><a href="05_plot.html#cb507-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>()</span>
<span id="cb507-23"><a href="05_plot.html#cb507-23" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb507-24"><a href="05_plot.html#cb507-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">FALSE</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-207-1.png" width="672" /></p>
</div>
</div>
<div id="折れ線グラフ" class="section level2 hasAnchor" number="5.15">
<h2><span class="header-section-number">5.15</span> 折れ線グラフ<a href="05_plot.html#折れ線グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：日付型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>折れ線グラフは時系列データを可視化する最も基本的なグラフで、<code>geom_line()</code>関数で作成します。</p>
<p>まず、プロット用のデータを作成します。</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="05_plot.html#cb508-1" aria-hidden="true" tabindex="-1"></a>data_owid_line <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span></span>
<span id="cb508-2"><a href="05_plot.html#cb508-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases_smoothed) <span class="sc">%&gt;%</span> </span>
<span id="cb508-3"><a href="05_plot.html#cb508-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>),</span>
<span id="cb508-4"><a href="05_plot.html#cb508-4" aria-hidden="true" tabindex="-1"></a>                date <span class="sc">&gt;=</span> <span class="st">&quot;2022-01-01&quot;</span>,</span>
<span id="cb508-5"><a href="05_plot.html#cb508-5" aria-hidden="true" tabindex="-1"></a>                date <span class="sc">&lt;=</span> <span class="st">&quot;2022-12-31&quot;</span></span>
<span id="cb508-6"><a href="05_plot.html#cb508-6" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb508-7"><a href="05_plot.html#cb508-7" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="fu">everything</span>())</span>
<span id="cb508-8"><a href="05_plot.html#cb508-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb508-9"><a href="05_plot.html#cb508-9" aria-hidden="true" tabindex="-1"></a>data_owid_line</span></code></pre></div>
<pre><code>## # A tibble: 1,825 × 3
##    location date       new_cases_smoothed
##    &lt;chr&gt;    &lt;date&gt;                  &lt;dbl&gt;
##  1 France   2022-01-01             74249.
##  2 France   2022-01-02            162961.
##  3 France   2022-01-03            162961.
##  4 France   2022-01-04            162961.
##  5 France   2022-01-05            162961.
##  6 France   2022-01-06            162961.
##  7 France   2022-01-07            162961.
##  8 France   2022-01-08            162961.
##  9 France   2022-01-09            246602.
## 10 France   2022-01-10            246602.
## # … with 1,815 more rows</code></pre>
<div id="折れ線グラフの基本形" class="section level3 hasAnchor" number="5.15.1">
<h3><span class="header-section-number">5.15.1</span> 折れ線グラフの基本形<a href="05_plot.html#折れ線グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="05_plot.html#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> economics,</span>
<span id="cb510-2"><a href="05_plot.html#cb510-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)</span>
<span id="cb510-3"><a href="05_plot.html#cb510-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb510-4"><a href="05_plot.html#cb510-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb510-5"><a href="05_plot.html#cb510-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb510-6"><a href="05_plot.html#cb510-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb510-7"><a href="05_plot.html#cb510-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb510-8"><a href="05_plot.html#cb510-8" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-209-1.png" width="672" /></p>
</div>
<div id="折れ線グラフにマーカーを追加" class="section level3 hasAnchor" number="5.15.2">
<h3><span class="header-section-number">5.15.2</span> 折れ線グラフにマーカーを追加<a href="05_plot.html#折れ線グラフにマーカーを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>折れ線グラフを作成する<code>geom_line()</code>関数と、散布図を作成する<code>geom_point()</code>関数を併用します。</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb511-1"><a href="05_plot.html#cb511-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> economics,</span>
<span id="cb511-2"><a href="05_plot.html#cb511-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)</span>
<span id="cb511-3"><a href="05_plot.html#cb511-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb511-4"><a href="05_plot.html#cb511-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb511-5"><a href="05_plot.html#cb511-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb511-6"><a href="05_plot.html#cb511-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb511-7"><a href="05_plot.html#cb511-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb511-8"><a href="05_plot.html#cb511-8" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb511-9"><a href="05_plot.html#cb511-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb511-10"><a href="05_plot.html#cb511-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb511-11"><a href="05_plot.html#cb511-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb511-12"><a href="05_plot.html#cb511-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb511-13"><a href="05_plot.html#cb511-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb511-14"><a href="05_plot.html#cb511-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb511-15"><a href="05_plot.html#cb511-15" aria-hidden="true" tabindex="-1"></a>             )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-210-1.png" width="672" /></p>
</div>
<div id="折れ線グラフに系列ラベルを追加" class="section level3 hasAnchor" number="5.15.3">
<h3><span class="header-section-number">5.15.3</span> 折れ線グラフに系列ラベルを追加<a href="05_plot.html#折れ線グラフに系列ラベルを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>折れ線グラフの数が多く凡例が分かりにくい場合などに、折れ線グラフの右側に系列名のラベルを追加します。ラベルを追加するには、<code>ggrepel</code>パッケージの<code>geom_text_repel</code>関数を使用します。</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="05_plot.html#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_line,</span>
<span id="cb512-2"><a href="05_plot.html#cb512-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> new_cases_smoothed, <span class="at">color =</span> location)</span>
<span id="cb512-3"><a href="05_plot.html#cb512-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb512-4"><a href="05_plot.html#cb512-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb512-5"><a href="05_plot.html#cb512-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb512-6"><a href="05_plot.html#cb512-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb512-7"><a href="05_plot.html#cb512-7" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb512-8"><a href="05_plot.html#cb512-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> data_owid_line <span class="sc">%&gt;%</span></span>
<span id="cb512-9"><a href="05_plot.html#cb512-9" aria-hidden="true" tabindex="-1"></a>                    dplyr<span class="sc">::</span><span class="fu">group_by</span>(location) <span class="sc">%&gt;%</span> </span>
<span id="cb512-10"><a href="05_plot.html#cb512-10" aria-hidden="true" tabindex="-1"></a>                    dplyr<span class="sc">::</span><span class="fu">filter</span>(date <span class="sc">==</span> <span class="fu">max</span>(date)),</span>
<span id="cb512-11"><a href="05_plot.html#cb512-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> new_cases_smoothed, <span class="at">label =</span> location),</span>
<span id="cb512-12"><a href="05_plot.html#cb512-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">seed =</span> <span class="cn">NA</span>, <span class="co"># テキストの配置を決定するランダムシード</span></span>
<span id="cb512-13"><a href="05_plot.html#cb512-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">direction =</span> <span class="st">&quot;y&quot;</span>, <span class="co"># テキストの整列方向 (both / x / y)</span></span>
<span id="cb512-14"><a href="05_plot.html#cb512-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">hjust =</span> <span class="fl">0.0</span>, <span class="co"># 横方向の整列位置 (0-1) </span></span>
<span id="cb512-15"><a href="05_plot.html#cb512-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="co"># 縦方向の整列位置 (0-1)</span></span>
<span id="cb512-16"><a href="05_plot.html#cb512-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nudge_x =</span> <span class="dv">5</span>, <span class="co"># マーカーからの横方向のスペース (NULL, 0-)</span></span>
<span id="cb512-17"><a href="05_plot.html#cb512-17" aria-hidden="true" tabindex="-1"></a>                  <span class="at">nudge_y =</span> <span class="cn">NULL</span>, <span class="co"># マーカーからの縦方向のスペース (NULL, 0-)</span></span>
<span id="cb512-18"><a href="05_plot.html#cb512-18" aria-hidden="true" tabindex="-1"></a>                  <span class="at">box.padding =</span> <span class="fl">0.1</span>, <span class="co"># テキスト周囲のスペース (0-)</span></span>
<span id="cb512-19"><a href="05_plot.html#cb512-19" aria-hidden="true" tabindex="-1"></a>                  <span class="at">point.padding =</span> <span class="fl">0.1</span>, <span class="co"># マーカー周囲のスペース (0-)</span></span>
<span id="cb512-20"><a href="05_plot.html#cb512-20" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.alpha =</span> <span class="fl">1.0</span>, <span class="co"># 引き出し線の透明度</span></span>
<span id="cb512-21"><a href="05_plot.html#cb512-21" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 引き出し線の色</span></span>
<span id="cb512-22"><a href="05_plot.html#cb512-22" aria-hidden="true" tabindex="-1"></a>                  <span class="at">segment.size =</span> <span class="fl">0.5</span>, <span class="co"># 引き出し線の太さ</span></span>
<span id="cb512-23"><a href="05_plot.html#cb512-23" aria-hidden="true" tabindex="-1"></a>                  <span class="at">min.segment.length =</span> <span class="cn">Inf</span>, <span class="co"># 引き出し線の最低長</span></span>
<span id="cb512-24"><a href="05_plot.html#cb512-24" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fontface =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># テキストの書体 (plain / bold / italic / bold.italic)</span></span>
<span id="cb512-25"><a href="05_plot.html#cb512-25" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="fl">3.0</span> <span class="co"># テキストのサイズ</span></span>
<span id="cb512-26"><a href="05_plot.html#cb512-26" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb512-27"><a href="05_plot.html#cb512-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb512-28"><a href="05_plot.html#cb512-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2022-01-01&quot;</span>, <span class="st">&quot;2023-03-31&quot;</span>)), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb512-29"><a href="05_plot.html#cb512-29" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(data_owid_line<span class="sc">$</span>new_cases_smoothed) <span class="sc">*</span> <span class="fl">1.05</span>), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb512-30"><a href="05_plot.html#cb512-30" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">FALSE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb512-31"><a href="05_plot.html#cb512-31" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb512-32"><a href="05_plot.html#cb512-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">breaks =</span> breaks_x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1900-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2099-12-31&quot;</span>), <span class="at">by =</span> <span class="st">&quot;3 months&quot;</span>), <span class="co"># 日付目盛ベクトル</span></span>
<span id="cb512-33"><a href="05_plot.html#cb512-33" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="fu">str_c</span>(<span class="fu">str_sub</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(breaks_x), <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">&quot;/&quot;</span>, lubridate<span class="sc">::</span><span class="fu">month</span>(breaks_x)), <span class="co"># 日付目盛ベクトルをラベル用に加工</span></span>
<span id="cb512-34"><a href="05_plot.html#cb512-34" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb512-35"><a href="05_plot.html#cb512-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-211-1.png" width="672" /></p>
</div>
</div>
<div id="ステップグラフ" class="section level2 hasAnchor" number="5.16">
<h2><span class="header-section-number">5.16</span> ステップグラフ<a href="05_plot.html#ステップグラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：日付型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>ステップグラフは折れ線グラフの特殊形です。政策金利のように、段階的に値が変化するデータに適しています。ステップグラフは<code>geom_step()</code>関数で作成します。</p>
<p>まず、サンプルデータを作成します。ここでは、Our World in Dataの<code>data_owid</code>データセットに含まれるStringency Indexのステップグラフを作成します。Stringency Indexは、各国当局が実施する新型コロナウイルス感染対策の厳格度を示す指数であり、段階的に値が変化します。</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="05_plot.html#cb513-1" aria-hidden="true" tabindex="-1"></a>data_owid_step <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span> </span>
<span id="cb513-2"><a href="05_plot.html#cb513-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, stringency_index) <span class="sc">%&gt;%</span> </span>
<span id="cb513-3"><a href="05_plot.html#cb513-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>))</span>
<span id="cb513-4"><a href="05_plot.html#cb513-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb513-5"><a href="05_plot.html#cb513-5" aria-hidden="true" tabindex="-1"></a>data_owid_step</span></code></pre></div>
<pre><code>## # A tibble: 5,470 × 3
##    location date       stringency_index
##    &lt;chr&gt;    &lt;date&gt;                &lt;dbl&gt;
##  1 France   2020-01-03                0
##  2 France   2020-01-04                0
##  3 France   2020-01-05                0
##  4 France   2020-01-06                0
##  5 France   2020-01-07                0
##  6 France   2020-01-08                0
##  7 France   2020-01-09                0
##  8 France   2020-01-10                0
##  9 France   2020-01-11                0
## 10 France   2020-01-12                0
## # … with 5,460 more rows</code></pre>
<div id="ステップグラフの基本形" class="section level3 hasAnchor" number="5.16.1">
<h3><span class="header-section-number">5.16.1</span> ステップグラフの基本形<a href="05_plot.html#ステップグラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="05_plot.html#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_step,</span>
<span id="cb515-2"><a href="05_plot.html#cb515-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> stringency_index, <span class="at">color =</span> location)</span>
<span id="cb515-3"><a href="05_plot.html#cb515-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb515-4"><a href="05_plot.html#cb515-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb515-5"><a href="05_plot.html#cb515-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb515-6"><a href="05_plot.html#cb515-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb515-7"><a href="05_plot.html#cb515-7" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-213-1.png" width="672" /></p>
</div>
</div>
<div id="面グラフ" class="section level2 hasAnchor" number="5.17">
<h2><span class="header-section-number">5.17</span> 面グラフ<a href="05_plot.html#面グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：日付型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>面グラフは折れ線グラフの特殊形です。面グラフには2種類あり、折れ線グラフとX軸で挟まれた範囲を塗りつぶすグラフは<code>geom_area()</code>関数、2つの折れ線グラフで挟まれた範囲を塗りつぶすグラフは<code>geom_ribbon()</code>関数で作成します。後者は特にリボングラフと呼ばれ、信頼区間の可視化に用いることができます。</p>
<p>まず、プロット用のデータを作成します。</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="05_plot.html#cb516-1" aria-hidden="true" tabindex="-1"></a>data_owid_line <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span></span>
<span id="cb516-2"><a href="05_plot.html#cb516-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases_smoothed) <span class="sc">%&gt;%</span> </span>
<span id="cb516-3"><a href="05_plot.html#cb516-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>),</span>
<span id="cb516-4"><a href="05_plot.html#cb516-4" aria-hidden="true" tabindex="-1"></a>                date <span class="sc">&gt;=</span> <span class="st">&quot;2022-01-01&quot;</span></span>
<span id="cb516-5"><a href="05_plot.html#cb516-5" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb516-6"><a href="05_plot.html#cb516-6" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="fu">everything</span>())</span>
<span id="cb516-7"><a href="05_plot.html#cb516-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb516-8"><a href="05_plot.html#cb516-8" aria-hidden="true" tabindex="-1"></a>data_owid_line</span></code></pre></div>
<pre><code>## # A tibble: 1,825 × 3
##    location date       new_cases_smoothed
##    &lt;chr&gt;    &lt;date&gt;                  &lt;dbl&gt;
##  1 France   2022-01-01             74249.
##  2 France   2022-01-02            162961.
##  3 France   2022-01-03            162961.
##  4 France   2022-01-04            162961.
##  5 France   2022-01-05            162961.
##  6 France   2022-01-06            162961.
##  7 France   2022-01-07            162961.
##  8 France   2022-01-08            162961.
##  9 France   2022-01-09            246602.
## 10 France   2022-01-10            246602.
## # … with 1,815 more rows</code></pre>
<div id="面グラフの基本形" class="section level3 hasAnchor" number="5.17.1">
<h3><span class="header-section-number">5.17.1</span> 面グラフの基本形<a href="05_plot.html#面グラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="05_plot.html#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> economics,</span>
<span id="cb518-2"><a href="05_plot.html#cb518-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)</span>
<span id="cb518-3"><a href="05_plot.html#cb518-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb518-4"><a href="05_plot.html#cb518-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb518-5"><a href="05_plot.html#cb518-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb518-6"><a href="05_plot.html#cb518-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb518-7"><a href="05_plot.html#cb518-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb518-8"><a href="05_plot.html#cb518-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb518-9"><a href="05_plot.html#cb518-9" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-215-1.png" width="672" /></p>
</div>
<div id="積上面グラフ" class="section level3 hasAnchor" number="5.17.2">
<h3><span class="header-section-number">5.17.2</span> 積上面グラフ<a href="05_plot.html#積上面グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>複数の面グラフを積上形式で作成するには、<code>position</code>引数に<code>position_stack()</code>関数を指定します。</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="05_plot.html#cb519-1" aria-hidden="true" tabindex="-1"></a>data_owid_line <span class="sc">%&gt;%</span> </span>
<span id="cb519-2"><a href="05_plot.html#cb519-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">location =</span> <span class="fu">factor</span>(location,</span>
<span id="cb519-3"><a href="05_plot.html#cb519-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">rev</span>()</span>
<span id="cb519-4"><a href="05_plot.html#cb519-4" aria-hidden="true" tabindex="-1"></a>                                  )</span>
<span id="cb519-5"><a href="05_plot.html#cb519-5" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb519-6"><a href="05_plot.html#cb519-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> new_cases_smoothed, <span class="at">fill =</span> location)) <span class="sc">+</span></span>
<span id="cb519-7"><a href="05_plot.html#cb519-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">position =</span> <span class="fu">position_stack</span>(),</span>
<span id="cb519-8"><a href="05_plot.html#cb519-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb519-9"><a href="05_plot.html#cb519-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb519-10"><a href="05_plot.html#cb519-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb519-11"><a href="05_plot.html#cb519-11" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-216-1.png" width="672" /></p>
</div>
<div id="リボングラフの基本形" class="section level3 hasAnchor" number="5.17.3">
<h3><span class="header-section-number">5.17.3</span> リボングラフの基本形<a href="05_plot.html#リボングラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>リボングラフでは、<code>aes()</code>関数の中で塗りつぶし範囲の下端を<code>ymin</code>引数、上端を<code>ymax</code>引数に指定します。</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="05_plot.html#cb520-1" aria-hidden="true" tabindex="-1"></a>data_owid_line <span class="sc">%&gt;%</span> </span>
<span id="cb520-2"><a href="05_plot.html#cb520-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb520-3"><a href="05_plot.html#cb520-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">new_cases_max =</span> <span class="fu">max</span>(new_cases_smoothed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb520-4"><a href="05_plot.html#cb520-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">new_cases_min =</span> <span class="fu">min</span>(new_cases_smoothed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb520-5"><a href="05_plot.html#cb520-5" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">%&gt;%</span> </span>
<span id="cb520-6"><a href="05_plot.html#cb520-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">ymin =</span> new_cases_min, <span class="at">ymax =</span> new_cases_max)) <span class="sc">+</span></span>
<span id="cb520-7"><a href="05_plot.html#cb520-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb520-8"><a href="05_plot.html#cb520-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb520-9"><a href="05_plot.html#cb520-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb520-10"><a href="05_plot.html#cb520-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb520-11"><a href="05_plot.html#cb520-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb520-12"><a href="05_plot.html#cb520-12" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-217-1.png" width="672" /></p>
</div>
<div id="リボングラフに折れ線グラフを追加" class="section level3 hasAnchor" number="5.17.4">
<h3><span class="header-section-number">5.17.4</span> リボングラフに折れ線グラフを追加<a href="05_plot.html#リボングラフに折れ線グラフを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>リボングラフに折れ線グラフを追加する際は、まず<code>geom_ribbon()</code>関数でリボングラフを作成し、そのあとに<code>+</code>演算子で<code>geom_line()</code>関数をつなげて折れ線グラフを追加します。</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="05_plot.html#cb521-1" aria-hidden="true" tabindex="-1"></a>data_owid_line <span class="sc">%&gt;%</span> </span>
<span id="cb521-2"><a href="05_plot.html#cb521-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span> </span>
<span id="cb521-3"><a href="05_plot.html#cb521-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="at">new_cases_max =</span> <span class="fu">max</span>(new_cases_smoothed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb521-4"><a href="05_plot.html#cb521-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">new_cases_median =</span> <span class="fu">median</span>(new_cases_smoothed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb521-5"><a href="05_plot.html#cb521-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">new_cases_min =</span> <span class="fu">min</span>(new_cases_smoothed, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb521-6"><a href="05_plot.html#cb521-6" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">%&gt;%</span> </span>
<span id="cb521-7"><a href="05_plot.html#cb521-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">ymin =</span> new_cases_min, <span class="at">ymax =</span> new_cases_max, <span class="at">y =</span> new_cases_median)) <span class="sc">+</span></span>
<span id="cb521-8"><a href="05_plot.html#cb521-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb521-9"><a href="05_plot.html#cb521-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb521-10"><a href="05_plot.html#cb521-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb521-11"><a href="05_plot.html#cb521-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb521-12"><a href="05_plot.html#cb521-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb521-13"><a href="05_plot.html#cb521-13" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb521-14"><a href="05_plot.html#cb521-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb521-15"><a href="05_plot.html#cb521-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;red&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb521-16"><a href="05_plot.html#cb521-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb521-17"><a href="05_plot.html#cb521-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb521-18"><a href="05_plot.html#cb521-18" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-218-1.png" width="672" /></p>
</div>
</div>
<div id="箱ひげ図ヴァイオリングラフ" class="section level2 hasAnchor" number="5.18">
<h2><span class="header-section-number">5.18</span> 箱ひげ図・ヴァイオリングラフ<a href="05_plot.html#箱ひげ図ヴァイオリングラフ" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：離散型変数</li>
<li>Y軸：連続型変数</li>
</ul>
<p>データの分布範囲を可視化するには箱ひげ図やヴァイオリングラフを用います。箱ひげ図は<code>geom_boxplot()</code>関数、ヴァイオリングラフは<code>geom_violin()</code>関数で作成します。</p>
<p>また、<code>geom_jitter()</code>関数で作成するジッターグラフを併用し、箱ひげ図やヴァイオリングラフに個別データの位置をプロットすると、データの分布がより具体的に分かりやすくなります。</p>
<div id="箱ひげ図の基本形" class="section level3 hasAnchor" number="5.18.1">
<h3><span class="header-section-number">5.18.1</span> 箱ひげ図の基本形<a href="05_plot.html#箱ひげ図の基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>箱ひげ図は一般的に、ひげの下端が最小値、箱の下端が第1四分位数、箱内部の横線が中央値、箱の上端が第3四分位数、ひげの上端が最大値を表します。</p>
<p>しかし、<code>ggplot2</code>パッケージの<code>geom_boxplot()</code>で作成すると、ひげの下端・上端は箱の下端・上端から1.5×IQRの範囲内にある最小・最大のデータの位置を表すことに注意が必要です。その範囲外にあるデータは外れ値として扱われます。なお、IQRは四分位範囲（第3四分位数-第1四分位数）を意味します。</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="05_plot.html#cb522-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb522-2"><a href="05_plot.html#cb522-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)</span>
<span id="cb522-3"><a href="05_plot.html#cb522-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb522-4"><a href="05_plot.html#cb522-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.alpha =</span> <span class="fl">1.0</span>, <span class="co"># 外れ値マーカーの塗りつぶしの透明度</span></span>
<span id="cb522-5"><a href="05_plot.html#cb522-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 外れ値マーカーの線の色</span></span>
<span id="cb522-6"><a href="05_plot.html#cb522-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 外れ値マーカーの塗りつぶしの色</span></span>
<span id="cb522-7"><a href="05_plot.html#cb522-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.shape =</span> <span class="dv">21</span>, <span class="co"># 外れ値マーカーの種類（外れ値を表示しない場合はNA）</span></span>
<span id="cb522-8"><a href="05_plot.html#cb522-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.size =</span> <span class="fl">2.0</span>, <span class="co"># 外れ値マーカーの大きさ</span></span>
<span id="cb522-9"><a href="05_plot.html#cb522-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.stroke =</span> <span class="fl">0.5</span>, <span class="co"># 外れ値マーカーの線の太さ</span></span>
<span id="cb522-10"><a href="05_plot.html#cb522-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># 箱の塗りつぶしの透明度</span></span>
<span id="cb522-11"><a href="05_plot.html#cb522-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 箱ひげの線の色</span></span>
<span id="cb522-12"><a href="05_plot.html#cb522-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 箱の塗りつぶしの色</span></span>
<span id="cb522-13"><a href="05_plot.html#cb522-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 箱ひげの線の太さ</span></span>
<span id="cb522-14"><a href="05_plot.html#cb522-14" aria-hidden="true" tabindex="-1"></a>               )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-219-1.png" width="672" /></p>
</div>
<div id="箱ひげ図に個別データを追加" class="section level3 hasAnchor" number="5.18.2">
<h3><span class="header-section-number">5.18.2</span> 箱ひげ図に個別データを追加<a href="05_plot.html#箱ひげ図に個別データを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>箱ひげ図にジッターグラフで個別データを追加する場合は、データの重複表示を避けるため、<code>geom_boxplot()</code>関数の<code>outlier.shape</code>引数に<code>NA</code>を指定して、箱ひげ図による外れ値のマーカーを非表示にします。</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="05_plot.html#cb523-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb523-2"><a href="05_plot.html#cb523-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)</span>
<span id="cb523-3"><a href="05_plot.html#cb523-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb523-4"><a href="05_plot.html#cb523-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>, <span class="co"># 外れ値マーカーの種類（外れ値を表示しない場合はNA）</span></span>
<span id="cb523-5"><a href="05_plot.html#cb523-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># 箱の塗りつぶしの透明度</span></span>
<span id="cb523-6"><a href="05_plot.html#cb523-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 箱ひげの線の色</span></span>
<span id="cb523-7"><a href="05_plot.html#cb523-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 箱の塗りつぶしの色</span></span>
<span id="cb523-8"><a href="05_plot.html#cb523-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 箱ひげの線の太さ</span></span>
<span id="cb523-9"><a href="05_plot.html#cb523-9" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb523-10"><a href="05_plot.html#cb523-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">height =</span> <span class="fl">0.3</span>, <span class="co"># マーカーの縦方向の分布範囲</span></span>
<span id="cb523-11"><a href="05_plot.html#cb523-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.3</span>, <span class="co"># マーカーの横方向の分布範囲</span></span>
<span id="cb523-12"><a href="05_plot.html#cb523-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの塗りつぶしの透明度</span></span>
<span id="cb523-13"><a href="05_plot.html#cb523-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># マーカーの線の色</span></span>
<span id="cb523-14"><a href="05_plot.html#cb523-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># マーカーの塗りつぶしの色</span></span>
<span id="cb523-15"><a href="05_plot.html#cb523-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb523-16"><a href="05_plot.html#cb523-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb523-17"><a href="05_plot.html#cb523-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># マーカーの線の太さ</span></span>
<span id="cb523-18"><a href="05_plot.html#cb523-18" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-220-1.png" width="672" /></p>
</div>
<div id="横並び箱ひげ図" class="section level3 hasAnchor" number="5.18.3">
<h3><span class="header-section-number">5.18.3</span> 横並び箱ひげ図<a href="05_plot.html#横並び箱ひげ図" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>aes()</code>関数内の<code>color</code>引数や<code>fill</code>引数に属性を表す変数を指定すると、横並び形式の箱ひげ図を作成することができます。</p>
<p>ここでは、<code>mpg</code>データセットにおいて自動車モデル年数のデータを格納している<code>year</code>変数を<code>fill</code>引数に指定しています。属性には離散型変数を指定しますが、<code>year</code>変数は数値型（連続型変数）のため、事前に<code>factor()</code>関数で因子型（離散型変数）に変換しています。</p>
<p>なお、塗りつぶしの色は<code>fill</code>引数に指定した<code>year</code>変数の値に基づいて自動的に決まるため、<code>geom_boxplot()</code>関数内で塗りつぶしの色を決める<code>outlier.fill</code>引数と<code>fill</code>引数は削除しておきます。</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="05_plot.html#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb524-2"><a href="05_plot.html#cb524-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">factor</span>(year)),</span>
<span id="cb524-3"><a href="05_plot.html#cb524-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy, <span class="at">fill =</span> year)</span>
<span id="cb524-4"><a href="05_plot.html#cb524-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb524-5"><a href="05_plot.html#cb524-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.alpha =</span> <span class="fl">1.0</span>, <span class="co"># 外れ値マーカーの塗りつぶしの透明度</span></span>
<span id="cb524-6"><a href="05_plot.html#cb524-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 外れ値マーカーの線の色</span></span>
<span id="cb524-7"><a href="05_plot.html#cb524-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.shape =</span> <span class="dv">21</span>, <span class="co"># 外れ値マーカーの種類（外れ値を表示しない場合はNA）</span></span>
<span id="cb524-8"><a href="05_plot.html#cb524-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.size =</span> <span class="fl">2.0</span>, <span class="co"># 外れ値マーカーの大きさ</span></span>
<span id="cb524-9"><a href="05_plot.html#cb524-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">outlier.stroke =</span> <span class="fl">0.5</span>, <span class="co"># 外れ値マーカーの線の太さ</span></span>
<span id="cb524-10"><a href="05_plot.html#cb524-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># 箱の塗りつぶしの透明度</span></span>
<span id="cb524-11"><a href="05_plot.html#cb524-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 箱ひげの線の色</span></span>
<span id="cb524-12"><a href="05_plot.html#cb524-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 箱ひげの線の太さ</span></span>
<span id="cb524-13"><a href="05_plot.html#cb524-13" aria-hidden="true" tabindex="-1"></a>               )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-221-1.png" width="672" /></p>
<p>横並び箱ひげ図にジッターグラフで個別データを追加する場合は、<code>geom_jitter()</code>関数の<code>height</code>引数と<code>width</code>引数を削除し、<code>position</code>引数に<code>position_jitterdodge()</code>関数を指定します。</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="05_plot.html#cb525-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb525-2"><a href="05_plot.html#cb525-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">factor</span>(year)),</span>
<span id="cb525-3"><a href="05_plot.html#cb525-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy, <span class="at">fill =</span> year)</span>
<span id="cb525-4"><a href="05_plot.html#cb525-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb525-5"><a href="05_plot.html#cb525-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>, <span class="co"># 外れ値マーカーの種類（外れ値を表示しない場合はNA）</span></span>
<span id="cb525-6"><a href="05_plot.html#cb525-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># 箱の塗りつぶしの透明度</span></span>
<span id="cb525-7"><a href="05_plot.html#cb525-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 箱ひげの線の色</span></span>
<span id="cb525-8"><a href="05_plot.html#cb525-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 箱ひげの線の太さ</span></span>
<span id="cb525-9"><a href="05_plot.html#cb525-9" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb525-10"><a href="05_plot.html#cb525-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの塗りつぶしの透明度</span></span>
<span id="cb525-11"><a href="05_plot.html#cb525-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># マーカーの線の色</span></span>
<span id="cb525-12"><a href="05_plot.html#cb525-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb525-13"><a href="05_plot.html#cb525-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb525-14"><a href="05_plot.html#cb525-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">stroke =</span> <span class="fl">0.5</span>, <span class="co"># マーカーの線の太さ</span></span>
<span id="cb525-15"><a href="05_plot.html#cb525-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">position =</span> <span class="fu">position_jitterdodge</span>()</span>
<span id="cb525-16"><a href="05_plot.html#cb525-16" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-222-1.png" width="672" /></p>
</div>
<div id="ヴァイオリングラフの基本形" class="section level3 hasAnchor" number="5.18.4">
<h3><span class="header-section-number">5.18.4</span> ヴァイオリングラフの基本形<a href="05_plot.html#ヴァイオリングラフの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="05_plot.html#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb526-2"><a href="05_plot.html#cb526-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)</span>
<span id="cb526-3"><a href="05_plot.html#cb526-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb526-4"><a href="05_plot.html#cb526-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">&quot;area&quot;</span>, <span class="co"># ヴァイオリンの大きさ（area：すべての面積が同じ、count：データ数に比例、width：すべての幅が同じ）</span></span>
<span id="cb526-5"><a href="05_plot.html#cb526-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># ヴァイオリンの塗りつぶしの透明度</span></span>
<span id="cb526-6"><a href="05_plot.html#cb526-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># ヴァイオリンの線の色</span></span>
<span id="cb526-7"><a href="05_plot.html#cb526-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># ヴァイオリンの塗りつぶしの色</span></span>
<span id="cb526-8"><a href="05_plot.html#cb526-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># ヴァイオリンの線の種類</span></span>
<span id="cb526-9"><a href="05_plot.html#cb526-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># ヴァイオリンの線の太さ</span></span>
<span id="cb526-10"><a href="05_plot.html#cb526-10" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-223-1.png" width="672" /></p>
</div>
<div id="ヴァイオリングラフに個別データを追加" class="section level3 hasAnchor" number="5.18.5">
<h3><span class="header-section-number">5.18.5</span> ヴァイオリングラフに個別データを追加<a href="05_plot.html#ヴァイオリングラフに個別データを追加" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="05_plot.html#cb527-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb527-2"><a href="05_plot.html#cb527-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)</span>
<span id="cb527-3"><a href="05_plot.html#cb527-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb527-4"><a href="05_plot.html#cb527-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">&quot;area&quot;</span>, <span class="co"># ヴァイオリンの大きさ（area：すべての面積が同じ、count：データ数に比例、width：すべての幅が同じ）</span></span>
<span id="cb527-5"><a href="05_plot.html#cb527-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="co"># ヴァイオリンの塗りつぶしの透明度</span></span>
<span id="cb527-6"><a href="05_plot.html#cb527-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># ヴァイオリンの線の色</span></span>
<span id="cb527-7"><a href="05_plot.html#cb527-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># ヴァイオリンの塗りつぶしの色</span></span>
<span id="cb527-8"><a href="05_plot.html#cb527-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># ヴァイオリンの線の種類</span></span>
<span id="cb527-9"><a href="05_plot.html#cb527-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># ヴァイオリンの線の太さ</span></span>
<span id="cb527-10"><a href="05_plot.html#cb527-10" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb527-11"><a href="05_plot.html#cb527-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">height =</span> <span class="fl">0.4</span>, <span class="co"># マーカーの縦方向の分布範囲</span></span>
<span id="cb527-12"><a href="05_plot.html#cb527-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">width =</span> <span class="fl">0.4</span>, <span class="co"># マーカーの横方向の分布範囲</span></span>
<span id="cb527-13"><a href="05_plot.html#cb527-13" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの塗りつぶしの透明度</span></span>
<span id="cb527-14"><a href="05_plot.html#cb527-14" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># マーカーの線の色</span></span>
<span id="cb527-15"><a href="05_plot.html#cb527-15" aria-hidden="true" tabindex="-1"></a>              <span class="at">fill =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># マーカーの塗りつぶしの色</span></span>
<span id="cb527-16"><a href="05_plot.html#cb527-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb527-17"><a href="05_plot.html#cb527-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb527-18"><a href="05_plot.html#cb527-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># マーカーの線の太さ</span></span>
<span id="cb527-19"><a href="05_plot.html#cb527-19" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-224-1.png" width="672" /></p>
</div>
</div>
<div id="ドットプロット" class="section level2 hasAnchor" number="5.19">
<h2><span class="header-section-number">5.19</span> ドットプロット<a href="05_plot.html#ドットプロット" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>X軸：離散型変数</li>
<li>Y軸：離散型変数</li>
</ul>
<p>ドットプロットは<code>geom_dotplot()</code>関数で作成します。実務では、FOMCで示される参加者の政策金利予想を可視化する際に使用されます。</p>
<div id="ドットプロットの基本形" class="section level3 hasAnchor" number="5.19.1">
<h3><span class="header-section-number">5.19.1</span> ドットプロットの基本形<a href="05_plot.html#ドットプロットの基本形" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="05_plot.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb528-2"><a href="05_plot.html#cb528-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)</span>
<span id="cb528-3"><a href="05_plot.html#cb528-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb528-4"><a href="05_plot.html#cb528-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_dotplot</span>(<span class="at">binaxis =</span> <span class="st">&quot;y&quot;</span>,</span>
<span id="cb528-5"><a href="05_plot.html#cb528-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">binwidth =</span> <span class="fl">0.5</span>,</span>
<span id="cb528-6"><a href="05_plot.html#cb528-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">stackdir =</span> <span class="st">&quot;center&quot;</span>,</span>
<span id="cb528-7"><a href="05_plot.html#cb528-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># マーカーの塗りつぶしの透明度</span></span>
<span id="cb528-8"><a href="05_plot.html#cb528-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># マーカーの線の色</span></span>
<span id="cb528-9"><a href="05_plot.html#cb528-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># マーカーの塗りつぶしの色</span></span>
<span id="cb528-10"><a href="05_plot.html#cb528-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># マーカーの線の太さ</span></span>
<span id="cb528-11"><a href="05_plot.html#cb528-11" aria-hidden="true" tabindex="-1"></a>               )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-225-1.png" width="672" /></p>
</div>
</div>
<div id="複合グラフファセット" class="section level2 hasAnchor" number="5.20">
<h2><span class="header-section-number">5.20</span> 複合グラフ（ファセット）<a href="05_plot.html#複合グラフファセット" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>複数のグラフをまとめたファセットを作成するには、<code>facet</code>関数ファミリーを使用します。どのようなファセットにするかで使用する関数が異なります。</p>
<div id="行方向の複合グラフ" class="section level3 hasAnchor" number="5.20.1">
<h3><span class="header-section-number">5.20.1</span> 行方向の複合グラフ<a href="05_plot.html#行方向の複合グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>行方向に複合グラフを並べる場合は、<code>facet_rep_grid()</code>関数の<code>rows</code>引数に<code>vars(離散型変数)</code>の形でグラフを分けて作成したい変数名を指定します。</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="05_plot.html#cb529-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb529-2"><a href="05_plot.html#cb529-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb529-3"><a href="05_plot.html#cb529-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb529-4"><a href="05_plot.html#cb529-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb529-5"><a href="05_plot.html#cb529-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ファセット</span></span>
<span id="cb529-6"><a href="05_plot.html#cb529-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_rep_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(class), <span class="co"># 行方向にグラフを分ける変数名を指定</span></span>
<span id="cb529-7"><a href="05_plot.html#cb529-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">scales =</span> <span class="st">&quot;fixed&quot;</span>, <span class="co"># 目盛設定（fixed：全グラフ共通、free：全グラフ独立、free_x：X軸のみ独立、free_y：Y軸のみ独立）</span></span>
<span id="cb529-8"><a href="05_plot.html#cb529-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repeat.tick.labels =</span> <span class="cn">FALSE</span> <span class="co"># 目盛表示（TRUE：すべてのグラフに表示、FALSE：端のグラフのみ表示</span></span>
<span id="cb529-9"><a href="05_plot.html#cb529-9" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-226-1.png" width="672" /></p>
</div>
<div id="列方向の複合グラフ" class="section level3 hasAnchor" number="5.20.2">
<h3><span class="header-section-number">5.20.2</span> 列方向の複合グラフ<a href="05_plot.html#列方向の複合グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>列方向に複合グラフを並べる場合は、<code>facet_rep_grid()</code>関数の<code>cols</code>引数に<code>vars(離散型変数)</code>の形でグラフを分けて作成したい変数名を指定します。</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="05_plot.html#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb530-2"><a href="05_plot.html#cb530-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb530-3"><a href="05_plot.html#cb530-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb530-4"><a href="05_plot.html#cb530-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb530-5"><a href="05_plot.html#cb530-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ファセット</span></span>
<span id="cb530-6"><a href="05_plot.html#cb530-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_rep_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(class), <span class="co"># 列方向にグラフを分ける変数名を指定</span></span>
<span id="cb530-7"><a href="05_plot.html#cb530-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">scales =</span> <span class="st">&quot;fixed&quot;</span>, <span class="co"># 目盛設定（fixed：全グラフ共通、free：全グラフ独立、free_x：X軸のみ独立、free_y：Y軸のみ独立）</span></span>
<span id="cb530-8"><a href="05_plot.html#cb530-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repeat.tick.labels =</span> <span class="cn">FALSE</span> <span class="co"># 目盛表示（TRUE：すべてのグラフに表示、FALSE：端のグラフのみ表示</span></span>
<span id="cb530-9"><a href="05_plot.html#cb530-9" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-227-1.png" width="672" /></p>
</div>
<div id="行列方向の複合グラフ" class="section level3 hasAnchor" number="5.20.3">
<h3><span class="header-section-number">5.20.3</span> 行・列方向の複合グラフ<a href="05_plot.html#行列方向の複合グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>行・列方向に複合グラフを並べる場合は、<code>facet_rep_grid()</code>関数の<code>rows</code>引数と<code>cols</code>引数にそれぞれ<code>vars(離散型変数)</code>の形でグラフを分けて作成したい変数名を指定します。</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="05_plot.html#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb531-2"><a href="05_plot.html#cb531-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb531-3"><a href="05_plot.html#cb531-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb531-4"><a href="05_plot.html#cb531-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb531-5"><a href="05_plot.html#cb531-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ファセット</span></span>
<span id="cb531-6"><a href="05_plot.html#cb531-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_rep_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(year), <span class="co"># 行方向にグラフを分ける変数名を指定</span></span>
<span id="cb531-7"><a href="05_plot.html#cb531-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">cols =</span> <span class="fu">vars</span>(class), <span class="co"># 列方向にグラフを分ける変数名を指定</span></span>
<span id="cb531-8"><a href="05_plot.html#cb531-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">scales =</span> <span class="st">&quot;fixed&quot;</span>, <span class="co"># 目盛設定（fixed：全グラフ共通、free：全グラフ独立、free_x：X軸のみ独立、free_y：Y軸のみ独立）</span></span>
<span id="cb531-9"><a href="05_plot.html#cb531-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repeat.tick.labels =</span> <span class="cn">TRUE</span> <span class="co"># 目盛表示（TRUE：すべてのグラフに表示、FALSE：端のグラフのみ表示</span></span>
<span id="cb531-10"><a href="05_plot.html#cb531-10" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-228-1.png" width="672" /></p>
</div>
<div id="行数列数を指定した複合グラフ" class="section level3 hasAnchor" number="5.20.4">
<h3><span class="header-section-number">5.20.4</span> 行数・列数を指定した複合グラフ<a href="05_plot.html#行数列数を指定した複合グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>行数と列数を指定してグラフを順番に並べるには、<code>facet_rep_wrap()</code>関数の<code>facets</code>引数に「<code>~ 離散型変数」</code>の形でグラフを分けて作成したい変数名を指定し、<code>nrow</code>引数と<code>ncol</code>引数に行数・列数を指定します。</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="05_plot.html#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb532-2"><a href="05_plot.html#cb532-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb532-3"><a href="05_plot.html#cb532-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb532-4"><a href="05_plot.html#cb532-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb532-5"><a href="05_plot.html#cb532-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ファセット</span></span>
<span id="cb532-6"><a href="05_plot.html#cb532-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_rep_wrap</span>(<span class="at">facets =</span> <span class="sc">~</span> manufacturer, <span class="co"># グラフを分ける変数名を指定</span></span>
<span id="cb532-7"><a href="05_plot.html#cb532-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">nrow =</span> <span class="dv">3</span>, <span class="co"># 行方向のグラフ数</span></span>
<span id="cb532-8"><a href="05_plot.html#cb532-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">ncol =</span> <span class="dv">5</span>, <span class="co"># 列方向のグラフ数</span></span>
<span id="cb532-9"><a href="05_plot.html#cb532-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">scales =</span> <span class="st">&quot;fixed&quot;</span>, <span class="co"># 目盛設定（fixed：全グラフ共通、free：全グラフ独立、free_x：X軸のみ独立、free_y：Y軸のみ独立）</span></span>
<span id="cb532-10"><a href="05_plot.html#cb532-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repeat.tick.labels =</span> <span class="cn">TRUE</span> <span class="co"># 目盛表示（TRUE：すべてのグラフに表示、FALSE：端のグラフのみ表示</span></span>
<span id="cb532-11"><a href="05_plot.html#cb532-11" aria-hidden="true" tabindex="-1"></a>                 )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-229-1.png" width="672" /></p>
</div>
<div id="複合グラフの設定" class="section level3 hasAnchor" number="5.20.5">
<h3><span class="header-section-number">5.20.5</span> 複合グラフの設定<a href="05_plot.html#複合グラフの設定" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>ファセットの各種設定を行うには、<code>theme()</code>関数内に必要事項を記入します。</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="05_plot.html#cb533-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 行数・列数を指定した複合グラフの例</span></span>
<span id="cb533-2"><a href="05_plot.html#cb533-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb533-3"><a href="05_plot.html#cb533-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb533-4"><a href="05_plot.html#cb533-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb533-5"><a href="05_plot.html#cb533-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb533-6"><a href="05_plot.html#cb533-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ファセット</span></span>
<span id="cb533-7"><a href="05_plot.html#cb533-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_rep_wrap</span>(<span class="at">facets =</span> <span class="sc">~</span> manufacturer <span class="co"># グラフを分ける変数名を指定</span></span>
<span id="cb533-8"><a href="05_plot.html#cb533-8" aria-hidden="true" tabindex="-1"></a>                 ) <span class="sc">+</span> </span>
<span id="cb533-9"><a href="05_plot.html#cb533-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="co"># ファセットタイトル領域の枠の色</span></span>
<span id="cb533-10"><a href="05_plot.html#cb533-10" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">fill =</span> <span class="st">&quot;White&quot;</span> <span class="co"># ファセットタイトル領域の塗りつぶしの色（NAで無色）</span></span>
<span id="cb533-11"><a href="05_plot.html#cb533-11" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="cb533-12"><a href="05_plot.html#cb533-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;Black&quot;</span>, <span class="co"># ファセットタイトルの色</span></span>
<span id="cb533-13"><a href="05_plot.html#cb533-13" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># ファセットタイトルの書体</span></span>
<span id="cb533-14"><a href="05_plot.html#cb533-14" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">size =</span> <span class="dv">8</span>, <span class="co"># ファセットタイトルのフォントサイズ</span></span>
<span id="cb533-15"><a href="05_plot.html#cb533-15" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># ファセットタイトルの横方向の整列位置</span></span>
<span id="cb533-16"><a href="05_plot.html#cb533-16" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># ファセットタイトルの縦方向の整列位置</span></span>
<span id="cb533-17"><a href="05_plot.html#cb533-17" aria-hidden="true" tabindex="-1"></a>                                  ),</span>
<span id="cb533-18"><a href="05_plot.html#cb533-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># ファセットのグラフ間の横方向のスペース</span></span>
<span id="cb533-19"><a href="05_plot.html#cb533-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.spacing.y =</span> <span class="fu">unit</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>) <span class="co"># ファセットのグラフ間の縦方向のスペース</span></span>
<span id="cb533-20"><a href="05_plot.html#cb533-20" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-230-1.png" width="672" /></p>
</div>
</div>
<div id="地図ファセット" class="section level2 hasAnchor" number="5.21">
<h2><span class="header-section-number">5.21</span> 地図ファセット<a href="05_plot.html#地図ファセット" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>国別・州別・都道府県別のデータを、地図を模した複合グラフに表示するには、<code>geofacet</code>パッケージの<code>facet_geo()</code>関数を使用します。</p>
<p>ここでは、日本の県内総生産データを使用します。</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="05_plot.html#cb534-1" aria-hidden="true" tabindex="-1"></a>data_gdp_pref</span></code></pre></div>
<pre><code>## # A tibble: 611 × 5
##    pref_code pref_name  year gdp_nominal gdp_nominal_pchg
##        &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt;       &lt;dbl&gt;            &lt;dbl&gt;
##  1         1 北海道     2006    19316568           NA    
##  2         1 北海道     2007    19137599           -0.927
##  3         1 北海道     2008    18457858           -3.55 
##  4         1 北海道     2009    18219113           -1.29 
##  5         1 北海道     2010    18122675           -0.529
##  6         1 北海道     2011    18071493           -0.282
##  7         1 北海道     2012    17923502           -0.819
##  8         1 北海道     2013    18242119            1.78 
##  9         1 北海道     2014    18579766            1.85 
## 10         1 北海道     2015    19128504            2.95 
## # … with 601 more rows</code></pre>
<p><code>geofacet</code>パッケージでは、都道府県名と地図上の位置を結びつける<code>jp_prefs_grid2</code>データが用意されています。ただし都道府県名が英語表記でしか格納されていないため、日本語表記を名寄せして追加します。</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="05_plot.html#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="co"># geofacetのjp_prefs_grid2に都道府県名の日本語表記を追加</span></span>
<span id="cb536-2"><a href="05_plot.html#cb536-2" aria-hidden="true" tabindex="-1"></a>data_prefs <span class="ot">&lt;-</span> data_gdp_pref <span class="sc">%&gt;%</span> </span>
<span id="cb536-3"><a href="05_plot.html#cb536-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(pref_code, pref_name) <span class="sc">%&gt;%</span> </span>
<span id="cb536-4"><a href="05_plot.html#cb536-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">distinct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb536-5"><a href="05_plot.html#cb536-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">code =</span> pref_code)</span>
<span id="cb536-6"><a href="05_plot.html#cb536-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb536-7"><a href="05_plot.html#cb536-7" aria-hidden="true" tabindex="-1"></a>jp_prefs_grid2 <span class="sc">%&lt;&gt;%</span></span>
<span id="cb536-8"><a href="05_plot.html#cb536-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">left_join</span>(data_prefs, <span class="at">by =</span> <span class="st">&quot;code&quot;</span>)</span></code></pre></div>
<p>そのうえで、ファセット部分に<code>facet_geo()</code>関数を用いると、都道府県別のデータを日本地図を模した形でグラフ化することができます。</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="05_plot.html#cb537-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_gdp_pref,</span>
<span id="cb537-2"><a href="05_plot.html#cb537-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdp_nominal_pchg)</span>
<span id="cb537-3"><a href="05_plot.html#cb537-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb537-4"><a href="05_plot.html#cb537-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb537-5"><a href="05_plot.html#cb537-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb537-6"><a href="05_plot.html#cb537-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_geo</span>(<span class="at">facets =</span> <span class="sc">~</span> pref_name, <span class="co"># 変数pref_name別にグラフを作成</span></span>
<span id="cb537-7"><a href="05_plot.html#cb537-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">grid =</span> <span class="st">&quot;jp_prefs_grid2&quot;</span>, <span class="co"># 使用する地図グリッド</span></span>
<span id="cb537-8"><a href="05_plot.html#cb537-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">scales =</span> <span class="st">&quot;fixed&quot;</span> <span class="co"># 目盛設定（fixed：全グラフ共通、free：全グラフ独立、free_x：X軸のみ独立、free_y：Y軸のみ独立）</span></span>
<span id="cb537-9"><a href="05_plot.html#cb537-9" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb537-10"><a href="05_plot.html#cb537-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="cn">NA</span>, <span class="co"># ファセットタイトル領域の枠の色</span></span>
<span id="cb537-11"><a href="05_plot.html#cb537-11" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">fill =</span> <span class="cn">NA</span> <span class="co"># ファセットタイトル領域の塗りつぶしの色（NAで無色）</span></span>
<span id="cb537-12"><a href="05_plot.html#cb537-12" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="cb537-13"><a href="05_plot.html#cb537-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">&quot;Black&quot;</span>, <span class="co"># ファセットタイトルの色</span></span>
<span id="cb537-14"><a href="05_plot.html#cb537-14" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># ファセットタイトルの書体</span></span>
<span id="cb537-15"><a href="05_plot.html#cb537-15" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">size =</span> <span class="dv">8</span>, <span class="co"># ファセットタイトルのフォントサイズ</span></span>
<span id="cb537-16"><a href="05_plot.html#cb537-16" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># ファセットタイトルの横方向の整列位置</span></span>
<span id="cb537-17"><a href="05_plot.html#cb537-17" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># ファセットタイトルの縦方向の整列位置</span></span>
<span id="cb537-18"><a href="05_plot.html#cb537-18" aria-hidden="true" tabindex="-1"></a>                                  ),</span>
<span id="cb537-19"><a href="05_plot.html#cb537-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># ファセットのグラフ間の横方向のスペース</span></span>
<span id="cb537-20"><a href="05_plot.html#cb537-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.spacing.y =</span> <span class="fu">unit</span>(<span class="at">x =</span> <span class="fl">0.5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>) <span class="co"># ファセットのグラフ間の縦方向のスペース</span></span>
<span id="cb537-21"><a href="05_plot.html#cb537-21" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-233-1.png" width="672" /></p>
</div>
<div id="補助線" class="section level2 hasAnchor" number="5.22">
<h2><span class="header-section-number">5.22</span> 補助線<a href="05_plot.html#補助線" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>水平線、垂直線、傾き・切片のある直線、といった補助線を追加するには、それぞれ<code>geom_hline()</code>関数、<code>geom_vline()</code>関数、<code>geom_abline()</code>関数を使用します。</p>
<p>補助線を追加する際には、グラフをプロットする関数（ここでは散布図の<code>geom_point()</code>関数）との順序に注意してください。コード上で先に記述した方がグラフ上では背面に、後に記述した方が前面に配置されます。</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="05_plot.html#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb538-2"><a href="05_plot.html#cb538-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)</span>
<span id="cb538-3"><a href="05_plot.html#cb538-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb538-4"><a href="05_plot.html#cb538-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 水平線（背面）</span></span>
<span id="cb538-5"><a href="05_plot.html#cb538-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">20</span>, <span class="co"># 水平線の縦軸との交点</span></span>
<span id="cb538-6"><a href="05_plot.html#cb538-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;Tomato&quot;</span>, <span class="co"># 水平線の色</span></span>
<span id="cb538-7"><a href="05_plot.html#cb538-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 水平線の太さ</span></span>
<span id="cb538-8"><a href="05_plot.html#cb538-8" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb538-9"><a href="05_plot.html#cb538-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 垂直線（背面）</span></span>
<span id="cb538-10"><a href="05_plot.html#cb538-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">20</span>, <span class="co"># 垂直線の横軸との交点</span></span>
<span id="cb538-11"><a href="05_plot.html#cb538-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;Forestgreen&quot;</span>, <span class="co"># 垂直線の色</span></span>
<span id="cb538-12"><a href="05_plot.html#cb538-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 垂直線の太さ</span></span>
<span id="cb538-13"><a href="05_plot.html#cb538-13" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb538-14"><a href="05_plot.html#cb538-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 傾き・切片のある直線（背面）</span></span>
<span id="cb538-15"><a href="05_plot.html#cb538-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">5</span>, <span class="co"># 直線の切片</span></span>
<span id="cb538-16"><a href="05_plot.html#cb538-16" aria-hidden="true" tabindex="-1"></a>              <span class="at">slope =</span> <span class="dv">1</span>, <span class="co"># 直線の傾き</span></span>
<span id="cb538-17"><a href="05_plot.html#cb538-17" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;gold&quot;</span>, <span class="co"># 直線の色</span></span>
<span id="cb538-18"><a href="05_plot.html#cb538-18" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">2.0</span> <span class="co"># 直線の太さ</span></span>
<span id="cb538-19"><a href="05_plot.html#cb538-19" aria-hidden="true" tabindex="-1"></a>              ) <span class="sc">+</span></span>
<span id="cb538-20"><a href="05_plot.html#cb538-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 散布図</span></span>
<span id="cb538-21"><a href="05_plot.html#cb538-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb538-22"><a href="05_plot.html#cb538-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;darkblue&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb538-23"><a href="05_plot.html#cb538-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb538-24"><a href="05_plot.html#cb538-24" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb538-25"><a href="05_plot.html#cb538-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb538-26"><a href="05_plot.html#cb538-26" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb538-27"><a href="05_plot.html#cb538-27" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb538-28"><a href="05_plot.html#cb538-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 水平線（前面）</span></span>
<span id="cb538-29"><a href="05_plot.html#cb538-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">25</span>, <span class="co"># 水平線の縦軸との交点</span></span>
<span id="cb538-30"><a href="05_plot.html#cb538-30" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;Tomato&quot;</span>, <span class="co"># 水平線の色</span></span>
<span id="cb538-31"><a href="05_plot.html#cb538-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 水平線の太さ</span></span>
<span id="cb538-32"><a href="05_plot.html#cb538-32" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb538-33"><a href="05_plot.html#cb538-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 垂直線（前面）</span></span>
<span id="cb538-34"><a href="05_plot.html#cb538-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">25</span>, <span class="co"># 垂直線の横軸との交点</span></span>
<span id="cb538-35"><a href="05_plot.html#cb538-35" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;Forestgreen&quot;</span>, <span class="co"># 垂直線の色</span></span>
<span id="cb538-36"><a href="05_plot.html#cb538-36" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 垂直線の太さ</span></span>
<span id="cb538-37"><a href="05_plot.html#cb538-37" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb538-38"><a href="05_plot.html#cb538-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 傾き・切片のある直線（前面）</span></span>
<span id="cb538-39"><a href="05_plot.html#cb538-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">10</span>, <span class="co"># 直線の切片</span></span>
<span id="cb538-40"><a href="05_plot.html#cb538-40" aria-hidden="true" tabindex="-1"></a>              <span class="at">slope =</span> <span class="dv">1</span>, <span class="co"># 直線の傾き</span></span>
<span id="cb538-41"><a href="05_plot.html#cb538-41" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;gold&quot;</span>, <span class="co"># 直線の色</span></span>
<span id="cb538-42"><a href="05_plot.html#cb538-42" aria-hidden="true" tabindex="-1"></a>              <span class="at">size =</span> <span class="fl">2.0</span> <span class="co"># 直線の太さ</span></span>
<span id="cb538-43"><a href="05_plot.html#cb538-43" aria-hidden="true" tabindex="-1"></a>              )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-234-1.png" width="672" /></p>
</div>
<div id="設定色" class="section level2 hasAnchor" number="5.23">
<h2><span class="header-section-number">5.23</span> 設定：色<a href="05_plot.html#設定色" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>変数の値や属性に応じて色を自動で変化させるには、<code>geom</code>関数ファミリーでグラフを作成したあとに、<code>+</code>演算子で<code>scale_color_*()</code>関数ファミリー（線の色）や<code>scale_fill_*()</code>関数ファミリー（塗りつぶしの色）をつなぎます。色の変化に対応する変数が離散型か連続型かによって、どの<code>scale_color_*()</code>・<code>scale_fill_*()</code>関数を用いるかが変わります。</p>
<p>まず、プロット用のデータを作成します。<code>x</code>が離散型変数、<code>y</code>が連続型変数です。</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="05_plot.html#cb539-1" aria-hidden="true" tabindex="-1"></a>data_color <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span> <span class="sc">%&gt;%</span> <span class="fu">factor</span>(), <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>)</span>
<span id="cb539-2"><a href="05_plot.html#cb539-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb539-3"><a href="05_plot.html#cb539-3" aria-hidden="true" tabindex="-1"></a>data_color</span></code></pre></div>
<pre><code>## # A tibble: 20 × 2
##    x         y
##    &lt;fct&gt; &lt;int&gt;
##  1 1         1
##  2 2         2
##  3 3         3
##  4 4         4
##  5 5         5
##  6 6         6
##  7 7         7
##  8 8         8
##  9 9         9
## 10 10       10
## 11 11       11
## 12 12       12
## 13 13       13
## 14 14       14
## 15 15       15
## 16 16       16
## 17 17       17
## 18 18       18
## 19 19       19
## 20 20       20</code></pre>
<div id="離散型手動指定" class="section level3 hasAnchor" number="5.23.1">
<h3><span class="header-section-number">5.23.1</span> 離散型：手動指定<a href="05_plot.html#離散型手動指定" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>自分で色の割り当てを決める方法です。Rで使用できる色の種類については、<a href="http://www.okadajp.org/RWiki/?%E8%89%B2%E8%A6%8B%E6%9C%AC">こちら</a>を参照してください。</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="05_plot.html#cb541-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color <span class="sc">%&gt;%</span> </span>
<span id="cb541-2"><a href="05_plot.html#cb541-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>),</span>
<span id="cb541-3"><a href="05_plot.html#cb541-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> x, <span class="at">fill =</span> x)</span>
<span id="cb541-4"><a href="05_plot.html#cb541-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb541-5"><a href="05_plot.html#cb541-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb541-6"><a href="05_plot.html#cb541-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb541-7"><a href="05_plot.html#cb541-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Red&quot;</span>, <span class="st">&quot;Salmon&quot;</span>, <span class="st">&quot;Gold&quot;</span>, <span class="st">&quot;Forestgreen&quot;</span>, <span class="st">&quot;Darkblue&quot;</span>) <span class="co"># colorで指定した変数の離散値と同数の色を指定</span></span>
<span id="cb541-8"><a href="05_plot.html#cb541-8" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb541-9"><a href="05_plot.html#cb541-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Red&quot;</span>, <span class="st">&quot;Salmon&quot;</span>, <span class="st">&quot;Gold&quot;</span>, <span class="st">&quot;Forestgreen&quot;</span>, <span class="st">&quot;Darkblue&quot;</span>) <span class="co"># fillで指定した変数の離散値と同数の色を指定</span></span>
<span id="cb541-10"><a href="05_plot.html#cb541-10" aria-hidden="true" tabindex="-1"></a>                    )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-236-1.png" width="672" /></p>
</div>
<div id="離散型brewer" class="section level3 hasAnchor" number="5.23.2">
<h3><span class="header-section-number">5.23.2</span> 離散型：Brewer<a href="05_plot.html#離散型brewer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>RColorBrewer</code>パッケージでは、様々な種類の美麗なプリセットカラーパレットが利用できます。</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="05_plot.html#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="co"># カラーパレットの確認</span></span>
<span id="cb542-2"><a href="05_plot.html#cb542-2" aria-hidden="true" tabindex="-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-237-1.png" width="672" /></p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="05_plot.html#cb543-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color <span class="sc">%&gt;%</span> </span>
<span id="cb543-2"><a href="05_plot.html#cb543-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>),</span>
<span id="cb543-3"><a href="05_plot.html#cb543-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> x, <span class="at">fill =</span> x)</span>
<span id="cb543-4"><a href="05_plot.html#cb543-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb543-5"><a href="05_plot.html#cb543-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb543-6"><a href="05_plot.html#cb543-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb543-7"><a href="05_plot.html#cb543-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>, <span class="co"># カラーパレット名</span></span>
<span id="cb543-8"><a href="05_plot.html#cb543-8" aria-hidden="true" tabindex="-1"></a>                     <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb543-9"><a href="05_plot.html#cb543-9" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb543-10"><a href="05_plot.html#cb543-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>, <span class="co"># カラーパレット名</span></span>
<span id="cb543-11"><a href="05_plot.html#cb543-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb543-12"><a href="05_plot.html#cb543-12" aria-hidden="true" tabindex="-1"></a>                    )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-238-1.png" width="672" /></p>
</div>
<div id="離散型viridis" class="section level3 hasAnchor" number="5.23.3">
<h3><span class="header-section-number">5.23.3</span> 離散型：Viridis<a href="05_plot.html#離散型viridis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>色覚障害に対応したカラーパレットです。パレットの種類などの詳細は<a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">こちら</a>を参照してください。</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="05_plot.html#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color <span class="sc">%&gt;%</span> </span>
<span id="cb544-2"><a href="05_plot.html#cb544-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb544-3"><a href="05_plot.html#cb544-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> x, <span class="at">fill =</span> x)</span>
<span id="cb544-4"><a href="05_plot.html#cb544-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb544-5"><a href="05_plot.html#cb544-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb544-6"><a href="05_plot.html#cb544-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb544-7"><a href="05_plot.html#cb544-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="co"># パレットの種類（magma / inferno / plasma / viridis / cividis）</span></span>
<span id="cb544-8"><a href="05_plot.html#cb544-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb544-9"><a href="05_plot.html#cb544-9" aria-hidden="true" tabindex="-1"></a>                        ) <span class="sc">+</span></span>
<span id="cb544-10"><a href="05_plot.html#cb544-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="co"># パレットの種類（magma / inferno / plasma / viridis / cividis）</span></span>
<span id="cb544-11"><a href="05_plot.html#cb544-11" aria-hidden="true" tabindex="-1"></a>                       <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb544-12"><a href="05_plot.html#cb544-12" aria-hidden="true" tabindex="-1"></a>                       )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-239-1.png" width="672" /></p>
</div>
<div id="離散型ggsci" class="section level3 hasAnchor" number="5.23.4">
<h3><span class="header-section-number">5.23.4</span> 離散型：ggsci<a href="05_plot.html#離散型ggsci" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>様々な科学ジャーナルで使用されるカラーパレットです。パレットの種類などの詳細は<a href="https://cran.r-project.org/web/packages/ggsci/vignettes/ggsci.html">こちら</a>をご覧ください。</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="05_plot.html#cb545-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color <span class="sc">%&gt;%</span> </span>
<span id="cb545-2"><a href="05_plot.html#cb545-2" aria-hidden="true" tabindex="-1"></a>         dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>),</span>
<span id="cb545-3"><a href="05_plot.html#cb545-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> x, <span class="at">fill =</span> x)</span>
<span id="cb545-4"><a href="05_plot.html#cb545-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb545-5"><a href="05_plot.html#cb545-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb545-6"><a href="05_plot.html#cb545-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb545-7"><a href="05_plot.html#cb545-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_npg</span>() <span class="sc">+</span> </span>
<span id="cb545-8"><a href="05_plot.html#cb545-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_npg</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-240-1.png" width="672" /></p>
</div>
<div id="連続型distiller" class="section level3 hasAnchor" number="5.23.5">
<h3><span class="header-section-number">5.23.5</span> 連続型：distiller<a href="05_plot.html#連続型distiller" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>こちらは、<code>RColorBrewer</code>パッケージの連続型変数用の関数です。様々な種類の美麗なプリセットカラーパレットが利用できます。</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="05_plot.html#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="co"># カラーパレットの確認</span></span>
<span id="cb546-2"><a href="05_plot.html#cb546-2" aria-hidden="true" tabindex="-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-241-1.png" width="672" /></p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="05_plot.html#cb547-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color,</span>
<span id="cb547-2"><a href="05_plot.html#cb547-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> y)</span>
<span id="cb547-3"><a href="05_plot.html#cb547-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb547-4"><a href="05_plot.html#cb547-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb547-5"><a href="05_plot.html#cb547-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb547-6"><a href="05_plot.html#cb547-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_distiller</span>(<span class="at">palette =</span> <span class="st">&quot;Blues&quot;</span>, <span class="co"># カラーパレット名</span></span>
<span id="cb547-7"><a href="05_plot.html#cb547-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb547-8"><a href="05_plot.html#cb547-8" aria-hidden="true" tabindex="-1"></a>                       )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-242-1.png" width="672" /></p>
</div>
<div id="連続型viridis" class="section level3 hasAnchor" number="5.23.6">
<h3><span class="header-section-number">5.23.6</span> 連続型：Viridis<a href="05_plot.html#連続型viridis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>色覚障害に対応したカラーパレットです。パレットの種類などの詳細は<a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">こちら</a>を参照してください。</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="05_plot.html#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color,</span>
<span id="cb548-2"><a href="05_plot.html#cb548-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> y)</span>
<span id="cb548-3"><a href="05_plot.html#cb548-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb548-4"><a href="05_plot.html#cb548-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb548-5"><a href="05_plot.html#cb548-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb548-6"><a href="05_plot.html#cb548-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="co"># パレットの種類（magma / inferno / plasma / viridis / cividis）</span></span>
<span id="cb548-7"><a href="05_plot.html#cb548-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb548-8"><a href="05_plot.html#cb548-8" aria-hidden="true" tabindex="-1"></a>                       )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-243-1.png" width="672" /></p>
</div>
<div id="連続型gradient" class="section level3 hasAnchor" number="5.23.7">
<h3><span class="header-section-number">5.23.7</span> 連続型：gradient<a href="05_plot.html#連続型gradient" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>自分で色を指定してグラデーションを作成するカラーパレットです。2色グラデーション、3色グラデーション、n色グラデーションの3種類の関数があります。n色グラデーションでは、事前にベースとなるカラーパレットを<code>RColorBrewer::display.brewer.all()</code>関数などで確認して使用します。</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="05_plot.html#cb549-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 2色グラデーション</span></span>
<span id="cb549-2"><a href="05_plot.html#cb549-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color,</span>
<span id="cb549-3"><a href="05_plot.html#cb549-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> y)</span>
<span id="cb549-4"><a href="05_plot.html#cb549-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb549-5"><a href="05_plot.html#cb549-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb549-6"><a href="05_plot.html#cb549-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb549-7"><a href="05_plot.html#cb549-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">&quot;Red&quot;</span>, <span class="co"># 最小値の色</span></span>
<span id="cb549-8"><a href="05_plot.html#cb549-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">high =</span> <span class="st">&quot;Forestgreen&quot;</span> <span class="co"># 最大値の色</span></span>
<span id="cb549-9"><a href="05_plot.html#cb549-9" aria-hidden="true" tabindex="-1"></a>                      )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-244-1.png" width="672" /></p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="05_plot.html#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3色グラデーション</span></span>
<span id="cb550-2"><a href="05_plot.html#cb550-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color,</span>
<span id="cb550-3"><a href="05_plot.html#cb550-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> y)</span>
<span id="cb550-4"><a href="05_plot.html#cb550-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb550-5"><a href="05_plot.html#cb550-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb550-6"><a href="05_plot.html#cb550-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb550-7"><a href="05_plot.html#cb550-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient2</span>(<span class="at">low =</span> <span class="st">&quot;Red&quot;</span>, <span class="co"># 最小値の色</span></span>
<span id="cb550-8"><a href="05_plot.html#cb550-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">mid =</span> <span class="st">&quot;Gold&quot;</span>, <span class="co"># 中間値の色</span></span>
<span id="cb550-9"><a href="05_plot.html#cb550-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">high =</span> <span class="st">&quot;Forestgreen&quot;</span>, <span class="co"># 最大値の色</span></span>
<span id="cb550-10"><a href="05_plot.html#cb550-10" aria-hidden="true" tabindex="-1"></a>                       <span class="at">midpoint =</span> <span class="fu">median</span>(data_color<span class="sc">$</span>y) <span class="co"># 中間値</span></span>
<span id="cb550-11"><a href="05_plot.html#cb550-11" aria-hidden="true" tabindex="-1"></a>                       )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-245-1.png" width="672" /></p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="05_plot.html#cb551-1" aria-hidden="true" tabindex="-1"></a><span class="co"># パレットを指定したn色グラデーション</span></span>
<span id="cb551-2"><a href="05_plot.html#cb551-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_color,</span>
<span id="cb551-3"><a href="05_plot.html#cb551-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> y)</span>
<span id="cb551-4"><a href="05_plot.html#cb551-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb551-5"><a href="05_plot.html#cb551-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb551-6"><a href="05_plot.html#cb551-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb551-7"><a href="05_plot.html#cb551-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="at">name =</span> <span class="st">&quot;RdYlGn&quot;</span>,</span>
<span id="cb551-8"><a href="05_plot.html#cb551-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">n =</span> <span class="dv">9</span>)</span>
<span id="cb551-9"><a href="05_plot.html#cb551-9" aria-hidden="true" tabindex="-1"></a>                       )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-246-1.png" width="672" /></p>
</div>
</div>
<div id="設定軸" class="section level2 hasAnchor" number="5.24">
<h2><span class="header-section-number">5.24</span> 設定：軸<a href="05_plot.html#設定軸" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>X軸、Y軸の設定を行うには、グラフの表示範囲を設定する<code>coord_cartesian()</code>関数や、目盛・ラベルを設定する <code>scale_x_*()</code>・<code>scale_y_*()</code>関数ファミリーを使用します。X軸、Y軸に指定する変数の型によって、使用する関数が一部異なります。</p>
<p>なお、<code>scale_x_*()</code>・<code>scale_y_*()</code>関数ファミリーにも範囲指定を行う<code>limits</code>引数がありますが、<code>coord_cartesian()</code>関数による範囲指定とは動作が異なる点に注意してください。<code>coord_cartesian()</code>関数は単に表示範囲を変えるだけですが、<code>scale_x_*()</code>・<code>scale_y_*()</code>関数ファミリーの<code>limits</code>引数は範囲外のデータを全て除去します。したがって、<code>ggplot()</code>関数内で表示内容を計算するグラフ（例えば散布図の近似曲線や、箱ひげ図の箱・ひげ・中央値など）では、<code>coord_cartesian()</code>関数と<code>scale_x_*()</code>・<code>scale_y_*()</code>関数ファミリーの<code>limits</code>引数で異なるグラフになる可能性があります。無用なトラブルを避けるため、表示範囲の設定には<code>coord_cartesian()</code>関数を使用することを推奨します。</p>
<p>まず、プロット用のデータを作成します。</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="05_plot.html#cb552-1" aria-hidden="true" tabindex="-1"></a>data_owid_scale <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span> </span>
<span id="cb552-2"><a href="05_plot.html#cb552-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(location) <span class="sc">%&gt;%</span> </span>
<span id="cb552-3"><a href="05_plot.html#cb552-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(new_cases, new_deaths), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb552-4"><a href="05_plot.html#cb552-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb552-5"><a href="05_plot.html#cb552-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(data_owid_scale)</span></code></pre></div>
<pre><code>##    location           new_cases          new_deaths      
##  Length:255         Min.   :     0.0   Min.   :   0.000  
##  Class :character   1st Qu.:    23.5   1st Qu.:   0.162  
##  Mode  :character   Median :   203.6   Median :   2.007  
##                     Mean   : 11504.0   Mean   : 104.379  
##                     3rd Qu.:  1520.1   3rd Qu.:  17.387  
##                     Max.   :666810.8   Max.   :6145.449  
##                     NA&#39;s   :9          NA&#39;s   :9</code></pre>
<div id="x軸連続型y軸連続型" class="section level3 hasAnchor" number="5.24.1">
<h3><span class="header-section-number">5.24.1</span> X軸：連続型、Y軸：連続型<a href="05_plot.html#x軸連続型y軸連続型" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>連続型変数の目盛・ラベル設定には<code>scale_*_continuous()</code>関数を使用します。</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="05_plot.html#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_scale,</span>
<span id="cb554-2"><a href="05_plot.html#cb554-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> new_cases, <span class="at">y =</span> new_deaths)</span>
<span id="cb554-3"><a href="05_plot.html#cb554-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb554-4"><a href="05_plot.html#cb554-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb554-5"><a href="05_plot.html#cb554-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb554-6"><a href="05_plot.html#cb554-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb554-7"><a href="05_plot.html#cb554-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb554-8"><a href="05_plot.html#cb554-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb554-9"><a href="05_plot.html#cb554-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">TRUE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb554-10"><a href="05_plot.html#cb554-10" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb554-11"><a href="05_plot.html#cb554-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> breaks_x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">1e+06</span>, <span class="dv">100000</span>), <span class="co"># 目盛</span></span>
<span id="cb554-12"><a href="05_plot.html#cb554-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_x, <span class="co"># 目盛ラベル</span></span>
<span id="cb554-13"><a href="05_plot.html#cb554-13" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb554-14"><a href="05_plot.html#cb554-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10000</span>, <span class="dv">1000</span>), <span class="co"># 目盛</span></span>
<span id="cb554-15"><a href="05_plot.html#cb554-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_y, <span class="co"># 目盛ラベル</span></span>
<span id="cb554-16"><a href="05_plot.html#cb554-16" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb554-17"><a href="05_plot.html#cb554-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;新規感染者数（1日当たり平均、人）&quot;</span>, <span class="co"># X軸のタイトル</span></span>
<span id="cb554-18"><a href="05_plot.html#cb554-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;新規死亡者数（1日当たり平均、人）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb554-19"><a href="05_plot.html#cb554-19" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb554-20"><a href="05_plot.html#cb554-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb554-21"><a href="05_plot.html#cb554-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># X軸ラベルの角度</span></span>
<span id="cb554-22"><a href="05_plot.html#cb554-22" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># X軸ラベルの横整列位置（0-1）</span></span>
<span id="cb554-23"><a href="05_plot.html#cb554-23" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># X軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb554-24"><a href="05_plot.html#cb554-24" aria-hidden="true" tabindex="-1"></a>                                   ), </span>
<span id="cb554-25"><a href="05_plot.html#cb554-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># Y軸ラベルの角度</span></span>
<span id="cb554-26"><a href="05_plot.html#cb554-26" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># Y軸ラベルの横整列位置（0-1）</span></span>
<span id="cb554-27"><a href="05_plot.html#cb554-27" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># Y軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb554-28"><a href="05_plot.html#cb554-28" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb554-29"><a href="05_plot.html#cb554-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 図表の上マージン</span></span>
<span id="cb554-30"><a href="05_plot.html#cb554-30" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 図表の下マージン</span></span>
<span id="cb554-31"><a href="05_plot.html#cb554-31" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">6</span>, <span class="co"># 図表の右マージン</span></span>
<span id="cb554-32"><a href="05_plot.html#cb554-32" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 図表の左マージン</span></span>
<span id="cb554-33"><a href="05_plot.html#cb554-33" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 図表マージンの単位</span></span>
<span id="cb554-34"><a href="05_plot.html#cb554-34" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb554-35"><a href="05_plot.html#cb554-35" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-248-1.png" width="672" /></p>
</div>
<div id="対数目盛" class="section level3 hasAnchor" number="5.24.2">
<h3><span class="header-section-number">5.24.2</span> 対数目盛<a href="05_plot.html#対数目盛" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>連続型変数を対数目盛表示にする場合、目盛・ラベル設定には<code>scale_*_log10()</code>関数を使用します。</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="05_plot.html#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_owid_scale,</span>
<span id="cb556-2"><a href="05_plot.html#cb556-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> new_cases, <span class="at">y =</span> new_deaths)</span>
<span id="cb556-3"><a href="05_plot.html#cb556-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb556-4"><a href="05_plot.html#cb556-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb556-5"><a href="05_plot.html#cb556-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb556-6"><a href="05_plot.html#cb556-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb556-7"><a href="05_plot.html#cb556-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb556-8"><a href="05_plot.html#cb556-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb556-9"><a href="05_plot.html#cb556-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">TRUE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb556-10"><a href="05_plot.html#cb556-10" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb556-11"><a href="05_plot.html#cb556-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_log10</span>(<span class="at">breaks =</span> breaks_x <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="sc">**</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">1</span>), <span class="co"># 目盛</span></span>
<span id="cb556-12"><a href="05_plot.html#cb556-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">labels =</span> <span class="fu">c</span>(breaks_x[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="st">&quot;1万&quot;</span>, <span class="st">&quot;10万&quot;</span>, <span class="st">&quot;100万&quot;</span>), <span class="co"># 目盛ラベル</span></span>
<span id="cb556-13"><a href="05_plot.html#cb556-13" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">+</span></span>
<span id="cb556-14"><a href="05_plot.html#cb556-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_log10</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="sc">**</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>), <span class="co"># 目盛</span></span>
<span id="cb556-15"><a href="05_plot.html#cb556-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">labels =</span> <span class="fu">c</span>(breaks_y[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="st">&quot;1万&quot;</span>), <span class="co"># 目盛ラベル</span></span>
<span id="cb556-16"><a href="05_plot.html#cb556-16" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">+</span></span>
<span id="cb556-17"><a href="05_plot.html#cb556-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;新規感染者数（1日当たり平均、人）&quot;</span>, <span class="co"># X軸のタイトル</span></span>
<span id="cb556-18"><a href="05_plot.html#cb556-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;新規死亡者数（1日当たり平均、人）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb556-19"><a href="05_plot.html#cb556-19" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb556-20"><a href="05_plot.html#cb556-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb556-21"><a href="05_plot.html#cb556-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># X軸ラベルの角度</span></span>
<span id="cb556-22"><a href="05_plot.html#cb556-22" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># X軸ラベルの横整列位置（0-1）</span></span>
<span id="cb556-23"><a href="05_plot.html#cb556-23" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># X軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb556-24"><a href="05_plot.html#cb556-24" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb556-25"><a href="05_plot.html#cb556-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># Y軸ラベルの角度</span></span>
<span id="cb556-26"><a href="05_plot.html#cb556-26" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># Y軸ラベルの横整列位置（0-1）</span></span>
<span id="cb556-27"><a href="05_plot.html#cb556-27" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># Y軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb556-28"><a href="05_plot.html#cb556-28" aria-hidden="true" tabindex="-1"></a>                                   )</span>
<span id="cb556-29"><a href="05_plot.html#cb556-29" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-249-1.png" width="672" /></p>
</div>
<div id="x軸日付型y軸連続型" class="section level3 hasAnchor" number="5.24.3">
<h3><span class="header-section-number">5.24.3</span> X軸：日付型、Y軸：連続型<a href="05_plot.html#x軸日付型y軸連続型" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>日付型変数の目盛・ラベル設定には<code>scale_*_date()</code>関数を使用します。ここでは、サンプルデータセット<code>economics</code>を使用します。</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="05_plot.html#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> economics,</span>
<span id="cb558-2"><a href="05_plot.html#cb558-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)</span>
<span id="cb558-3"><a href="05_plot.html#cb558-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb558-4"><a href="05_plot.html#cb558-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb558-5"><a href="05_plot.html#cb558-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb558-6"><a href="05_plot.html#cb558-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2000-01-01&quot;</span>, <span class="st">&quot;2002-12-31&quot;</span>)), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb558-7"><a href="05_plot.html#cb558-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">5000</span>, <span class="dv">9000</span>), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb558-8"><a href="05_plot.html#cb558-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">TRUE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb558-9"><a href="05_plot.html#cb558-9" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb558-10"><a href="05_plot.html#cb558-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">breaks =</span> breaks_x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1900-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2099-12-31&quot;</span>), <span class="at">by =</span> <span class="st">&quot;6 months&quot;</span>), <span class="co"># 日付目盛ベクトル</span></span>
<span id="cb558-11"><a href="05_plot.html#cb558-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="fu">str_c</span>(<span class="fu">str_sub</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(breaks_x), <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">&quot;/&quot;</span>, lubridate<span class="sc">::</span><span class="fu">month</span>(breaks_x)), <span class="co"># 日付目盛ベクトルをラベル用に加工</span></span>
<span id="cb558-12"><a href="05_plot.html#cb558-12" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb558-13"><a href="05_plot.html#cb558-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">50000</span>, <span class="dv">1000</span>), <span class="co"># 目盛</span></span>
<span id="cb558-14"><a href="05_plot.html#cb558-14" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_y, <span class="co"># 目盛ラベル</span></span>
<span id="cb558-15"><a href="05_plot.html#cb558-15" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb558-16"><a href="05_plot.html#cb558-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;日付（年/月）&quot;</span>, <span class="co"># X軸のタイトル</span></span>
<span id="cb558-17"><a href="05_plot.html#cb558-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;失業者数（千人）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb558-18"><a href="05_plot.html#cb558-18" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb558-19"><a href="05_plot.html#cb558-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb558-20"><a href="05_plot.html#cb558-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># X軸ラベルの角度</span></span>
<span id="cb558-21"><a href="05_plot.html#cb558-21" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># X軸ラベルの横整列位置（0-1）</span></span>
<span id="cb558-22"><a href="05_plot.html#cb558-22" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># X軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb558-23"><a href="05_plot.html#cb558-23" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb558-24"><a href="05_plot.html#cb558-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># Y軸ラベルの角度</span></span>
<span id="cb558-25"><a href="05_plot.html#cb558-25" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># Y軸ラベルの横整列位置（0-1）</span></span>
<span id="cb558-26"><a href="05_plot.html#cb558-26" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># Y軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb558-27"><a href="05_plot.html#cb558-27" aria-hidden="true" tabindex="-1"></a>                                   )</span>
<span id="cb558-28"><a href="05_plot.html#cb558-28" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-250-1.png" width="672" /></p>
<p><code>scale_*_date()</code>関数では、一般的な目盛を指定する<code>breaks</code>引数の代わりに、日付型目盛を指定する<code>date_breaks</code>引数を利用することができます。その場合は、グラフの表示範囲を指定する<code>coord_cartesian()</code>関数の<code>expand</code>引数に<code>FALSE</code>を指定し、日付軸の目盛が端から表示されるようにします。</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="05_plot.html#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="co"># date_breaks引数を使用する場合</span></span>
<span id="cb559-2"><a href="05_plot.html#cb559-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> economics,</span>
<span id="cb559-3"><a href="05_plot.html#cb559-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> unemploy)</span>
<span id="cb559-4"><a href="05_plot.html#cb559-4" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span> </span>
<span id="cb559-5"><a href="05_plot.html#cb559-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb559-6"><a href="05_plot.html#cb559-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb559-7"><a href="05_plot.html#cb559-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2000-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2002-12-31&quot;</span>)), <span class="co"># 下限・上限値（指定しない場合はNULL）</span></span>
<span id="cb559-8"><a href="05_plot.html#cb559-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">5000</span>, <span class="dv">9000</span>), <span class="co"># 下限・上限値（指定しない場合はNULL）</span></span>
<span id="cb559-9"><a href="05_plot.html#cb559-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">FALSE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb559-10"><a href="05_plot.html#cb559-10" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb559-11"><a href="05_plot.html#cb559-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">&quot;6 month&quot;</span>,　<span class="co"># 日付目盛の周期</span></span>
<span id="cb559-12"><a href="05_plot.html#cb559-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="st">&quot;%Y/%m&quot;</span>, <span class="co"># %Y：4桁年、%y：2桁年、%m：2桁月、%d：日</span></span>
<span id="cb559-13"><a href="05_plot.html#cb559-13" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb559-14"><a href="05_plot.html#cb559-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">50000</span>, <span class="dv">1000</span>), <span class="co"># 目盛</span></span>
<span id="cb559-15"><a href="05_plot.html#cb559-15" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_y, <span class="co"># 目盛ラベル</span></span>
<span id="cb559-16"><a href="05_plot.html#cb559-16" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb559-17"><a href="05_plot.html#cb559-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;日付（年/月）&quot;</span>, <span class="co"># X軸のタイトル</span></span>
<span id="cb559-18"><a href="05_plot.html#cb559-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;失業者数（千人）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb559-19"><a href="05_plot.html#cb559-19" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb559-20"><a href="05_plot.html#cb559-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb559-21"><a href="05_plot.html#cb559-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># X軸ラベルの角度</span></span>
<span id="cb559-22"><a href="05_plot.html#cb559-22" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># X軸ラベルの横整列位置（0-1）</span></span>
<span id="cb559-23"><a href="05_plot.html#cb559-23" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># X軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb559-24"><a href="05_plot.html#cb559-24" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb559-25"><a href="05_plot.html#cb559-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># Y軸ラベルの角度</span></span>
<span id="cb559-26"><a href="05_plot.html#cb559-26" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># Y軸ラベルの横整列位置（0-1）</span></span>
<span id="cb559-27"><a href="05_plot.html#cb559-27" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># Y軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb559-28"><a href="05_plot.html#cb559-28" aria-hidden="true" tabindex="-1"></a>                                   )</span>
<span id="cb559-29"><a href="05_plot.html#cb559-29" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-251-1.png" width="672" /></p>
</div>
</div>
<div id="設定パネル目盛線" class="section level2 hasAnchor" number="5.25">
<h2><span class="header-section-number">5.25</span> 設定：パネル目盛線<a href="05_plot.html#設定パネル目盛線" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="05_plot.html#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb560-2"><a href="05_plot.html#cb560-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb560-3"><a href="05_plot.html#cb560-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb560-4"><a href="05_plot.html#cb560-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb560-5"><a href="05_plot.html#cb560-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span></span>
<span id="cb560-6"><a href="05_plot.html#cb560-6" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb560-7"><a href="05_plot.html#cb560-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># パネル目盛線</span></span>
<span id="cb560-8"><a href="05_plot.html#cb560-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 主目盛線の色</span></span>
<span id="cb560-9"><a href="05_plot.html#cb560-9" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="co"># 主目盛線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb560-10"><a href="05_plot.html#cb560-10" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">size =</span> <span class="fl">0.2</span> <span class="co"># 主目盛線の太さ</span></span>
<span id="cb560-11"><a href="05_plot.html#cb560-11" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="cb560-12"><a href="05_plot.html#cb560-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>() <span class="co"># 補助目盛り線は表示しない</span></span>
<span id="cb560-13"><a href="05_plot.html#cb560-13" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-252-1.png" width="672" /></p>
</div>
<div id="設定凡例" class="section level2 hasAnchor" number="5.26">
<h2><span class="header-section-number">5.26</span> 設定：凡例<a href="05_plot.html#設定凡例" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="05_plot.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb561-2"><a href="05_plot.html#cb561-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb561-3"><a href="05_plot.html#cb561-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb561-4"><a href="05_plot.html#cb561-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb561-5"><a href="05_plot.html#cb561-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span></span>
<span id="cb561-6"><a href="05_plot.html#cb561-6" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb561-7"><a href="05_plot.html#cb561-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 凡例</span></span>
<span id="cb561-8"><a href="05_plot.html#cb561-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># 凡例タイトルの文字サイズ</span></span>
<span id="cb561-9"><a href="05_plot.html#cb561-9" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 凡例タイトルの書体</span></span>
<span id="cb561-10"><a href="05_plot.html#cb561-10" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># 凡例タイトルの横整列位置</span></span>
<span id="cb561-11"><a href="05_plot.html#cb561-11" aria-hidden="true" tabindex="-1"></a>                                    ),</span>
<span id="cb561-12"><a href="05_plot.html#cb561-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 凡例ラベルの文字サイズ</span></span>
<span id="cb561-13"><a href="05_plot.html#cb561-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 凡例の枠線の色</span></span>
<span id="cb561-14"><a href="05_plot.html#cb561-14" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 凡例の枠線の太さ</span></span>
<span id="cb561-15"><a href="05_plot.html#cb561-15" aria-hidden="true" tabindex="-1"></a>                                             ),</span>
<span id="cb561-16"><a href="05_plot.html#cb561-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 凡例の上マージン</span></span>
<span id="cb561-17"><a href="05_plot.html#cb561-17" aria-hidden="true" tabindex="-1"></a>                               <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 凡例の下マージン</span></span>
<span id="cb561-18"><a href="05_plot.html#cb561-18" aria-hidden="true" tabindex="-1"></a>                               <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 凡例の右マージン</span></span>
<span id="cb561-19"><a href="05_plot.html#cb561-19" aria-hidden="true" tabindex="-1"></a>                               <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 凡例の左マージン</span></span>
<span id="cb561-20"><a href="05_plot.html#cb561-20" aria-hidden="true" tabindex="-1"></a>                               <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 凡例マージンの単位</span></span>
<span id="cb561-21"><a href="05_plot.html#cb561-21" aria-hidden="true" tabindex="-1"></a>                               ),</span>
<span id="cb561-22"><a href="05_plot.html#cb561-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="fl">1.0</span>, <span class="fl">0.0</span>), <span class="co"># 凡例の横整列位置・縦整列位置</span></span>
<span id="cb561-23"><a href="05_plot.html#cb561-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.95</span>, <span class="fl">0.05</span>) <span class="co"># 凡例の横位置・縦位置</span></span>
<span id="cb561-24"><a href="05_plot.html#cb561-24" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb561-25"><a href="05_plot.html#cb561-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;車体クラス&quot;</span>, <span class="co"># 凡例に使用するscaleのタイトル（表示しない場合はNULL）</span></span>
<span id="cb561-26"><a href="05_plot.html#cb561-26" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb561-27"><a href="05_plot.html#cb561-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">keywidth =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># 凡例キーの幅</span></span>
<span id="cb561-28"><a href="05_plot.html#cb561-28" aria-hidden="true" tabindex="-1"></a>                             <span class="at">keyheight =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># 凡例キーの高さ</span></span>
<span id="cb561-29"><a href="05_plot.html#cb561-29" aria-hidden="true" tabindex="-1"></a>                             <span class="at">direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="co"># 凡例の整列方向（horizontal / vertical）</span></span>
<span id="cb561-30"><a href="05_plot.html#cb561-30" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nrow =</span> <span class="dv">3</span>, <span class="co"># 凡例の行数</span></span>
<span id="cb561-31"><a href="05_plot.html#cb561-31" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ncol =</span> <span class="dv">3</span>, <span class="co"># 凡例の列数</span></span>
<span id="cb561-32"><a href="05_plot.html#cb561-32" aria-hidden="true" tabindex="-1"></a>                             <span class="at">reverse =</span> <span class="cn">FALSE</span> <span class="co"># 凡例順序の逆転</span></span>
<span id="cb561-33"><a href="05_plot.html#cb561-33" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb561-34"><a href="05_plot.html#cb561-34" aria-hidden="true" tabindex="-1"></a>         )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-253-1.png" width="672" /></p>
</div>
<div id="設定タイトルキャプション" class="section level2 hasAnchor" number="5.27">
<h2><span class="header-section-number">5.27</span> 設定：タイトル・キャプション<a href="05_plot.html#設定タイトルキャプション" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="05_plot.html#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb562-2"><a href="05_plot.html#cb562-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb562-3"><a href="05_plot.html#cb562-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb562-4"><a href="05_plot.html#cb562-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb562-5"><a href="05_plot.html#cb562-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span></span>
<span id="cb562-6"><a href="05_plot.html#cb562-6" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb562-7"><a href="05_plot.html#cb562-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># タイトル・キャプション</span></span>
<span id="cb562-8"><a href="05_plot.html#cb562-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;車体クラス別の一般道燃費と高速道燃費&quot;</span>, <span class="co"># 図表タイトル</span></span>
<span id="cb562-9"><a href="05_plot.html#cb562-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;（出所）EPA.gov&quot;</span>, <span class="co"># キャプション</span></span>
<span id="cb562-10"><a href="05_plot.html#cb562-10" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb562-11"><a href="05_plot.html#cb562-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="co"># 図表タイトルの文字サイズ</span></span>
<span id="cb562-12"><a href="05_plot.html#cb562-12" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 図表タイトルの書体</span></span>
<span id="cb562-13"><a href="05_plot.html#cb562-13" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">hjust =</span> <span class="fl">0.5</span> <span class="co"># 図表タイトルの横整列位置</span></span>
<span id="cb562-14"><a href="05_plot.html#cb562-14" aria-hidden="true" tabindex="-1"></a>                                  ),</span>
<span id="cb562-15"><a href="05_plot.html#cb562-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># キャプションの文字サイズ</span></span>
<span id="cb562-16"><a href="05_plot.html#cb562-16" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># キャプションの書体</span></span>
<span id="cb562-17"><a href="05_plot.html#cb562-17" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># キャプションの横整列位置</span></span>
<span id="cb562-18"><a href="05_plot.html#cb562-18" aria-hidden="true" tabindex="-1"></a>                                    )</span>
<span id="cb562-19"><a href="05_plot.html#cb562-19" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-254-1.png" width="672" /></p>
</div>
<div id="設定フォントマージン" class="section level2 hasAnchor" number="5.28">
<h2><span class="header-section-number">5.28</span> 設定：フォント・マージン<a href="05_plot.html#設定フォントマージン" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="05_plot.html#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg,</span>
<span id="cb563-2"><a href="05_plot.html#cb563-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">fill =</span> class)</span>
<span id="cb563-3"><a href="05_plot.html#cb563-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb563-4"><a href="05_plot.html#cb563-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># フォント・マージン</span></span>
<span id="cb563-5"><a href="05_plot.html#cb563-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>,</span>
<span id="cb563-6"><a href="05_plot.html#cb563-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span></span>
<span id="cb563-7"><a href="05_plot.html#cb563-7" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb563-8"><a href="05_plot.html#cb563-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span> <span class="co"># 図表全体の無事サイズ</span></span>
<span id="cb563-9"><a href="05_plot.html#cb563-9" aria-hidden="true" tabindex="-1"></a>                            ),</span>
<span id="cb563-10"><a href="05_plot.html#cb563-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 図表の上マージン</span></span>
<span id="cb563-11"><a href="05_plot.html#cb563-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 図表の下マージン</span></span>
<span id="cb563-12"><a href="05_plot.html#cb563-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 図表の右マージン</span></span>
<span id="cb563-13"><a href="05_plot.html#cb563-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 図表の左マージン</span></span>
<span id="cb563-14"><a href="05_plot.html#cb563-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 図表マージンの単位</span></span>
<span id="cb563-15"><a href="05_plot.html#cb563-15" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb563-16"><a href="05_plot.html#cb563-16" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-255-1.png" width="672" /></p>
</div>
<div id="グラフの保存" class="section level2 hasAnchor" number="5.29">
<h2><span class="header-section-number">5.29</span> グラフの保存<a href="05_plot.html#グラフの保存" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>ggplot2</code>パッケージで作成した図表を画像形式で保存するには、<code>ggsave()</code>関数を使用します。</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="05_plot.html#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">&quot;directory/filename.png&quot;</span>, <span class="co"># 図表のファイル名</span></span>
<span id="cb564-2"><a href="05_plot.html#cb564-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="fl">12.00</span>, <span class="co"># 図表の横サイズ</span></span>
<span id="cb564-3"><a href="05_plot.html#cb564-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">height =</span> <span class="fl">8.50</span>, <span class="co"># 図表の縦サイズ</span></span>
<span id="cb564-4"><a href="05_plot.html#cb564-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">units =</span> <span class="st">&quot;cm&quot;</span>, <span class="co"># 図表のサイズ単位</span></span>
<span id="cb564-5"><a href="05_plot.html#cb564-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">dpi =</span> <span class="dv">400</span> <span class="co"># 図表の解像度</span></span>
<span id="cb564-6"><a href="05_plot.html#cb564-6" aria-hidden="true" tabindex="-1"></a>       )</span></code></pre></div>
</div>
<div id="実例" class="section level2 hasAnchor" number="5.30">
<h2><span class="header-section-number">5.30</span> 実例<a href="05_plot.html#実例" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="実例1折れ線グラフ" class="section level3 hasAnchor" number="5.30.1">
<h3><span class="header-section-number">5.30.1</span> 実例1：折れ線グラフ<a href="05_plot.html#実例1折れ線グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>日本と欧州主要国の新型コロナ新規感染者数の時系列折れ線グラフを作成します。</p>
<p>まず、外部データセット<code>data_owid</code>を用い、プロット用のデータを作成します。外部データセットの取得方法については、第2章「Rの設定」を参照してください。</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="05_plot.html#cb565-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列を選択</span></span>
<span id="cb565-2"><a href="05_plot.html#cb565-2" aria-hidden="true" tabindex="-1"></a>data_plot <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span></span>
<span id="cb565-3"><a href="05_plot.html#cb565-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases_smoothed) </span>
<span id="cb565-4"><a href="05_plot.html#cb565-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-5"><a href="05_plot.html#cb565-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 日本と欧州主要国をフィルタ</span></span>
<span id="cb565-6"><a href="05_plot.html#cb565-6" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb565-7"><a href="05_plot.html#cb565-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(location <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;United Kingdom&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Italy&quot;</span>),</span>
<span id="cb565-8"><a href="05_plot.html#cb565-8" aria-hidden="true" tabindex="-1"></a>                date <span class="sc">&gt;=</span> <span class="st">&quot;2022-01-01&quot;</span></span>
<span id="cb565-9"><a href="05_plot.html#cb565-9" aria-hidden="true" tabindex="-1"></a>                ) </span>
<span id="cb565-10"><a href="05_plot.html#cb565-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb565-11"><a href="05_plot.html#cb565-11" aria-hidden="true" tabindex="-1"></a><span class="co"># NAを削除</span></span>
<span id="cb565-12"><a href="05_plot.html#cb565-12" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb565-13"><a href="05_plot.html#cb565-13" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">drop_na</span>(<span class="fu">everything</span>())</span></code></pre></div>
<p><code>ggplot()</code>関数でプロットを作成します。グラフを画像として保存するには、別途<code>ggsave()</code>関数を実行してください。</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="05_plot.html#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_plot,</span>
<span id="cb566-2"><a href="05_plot.html#cb566-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> new_cases_smoothed <span class="sc">/</span> <span class="dv">1000</span>, <span class="at">color =</span> location)</span>
<span id="cb566-3"><a href="05_plot.html#cb566-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb566-4"><a href="05_plot.html#cb566-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># グラフ</span></span>
<span id="cb566-5"><a href="05_plot.html#cb566-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb566-6"><a href="05_plot.html#cb566-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb566-7"><a href="05_plot.html#cb566-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb566-8"><a href="05_plot.html#cb566-8" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb566-9"><a href="05_plot.html#cb566-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb566-10"><a href="05_plot.html#cb566-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_npg</span>() <span class="sc">+</span> </span>
<span id="cb566-11"><a href="05_plot.html#cb566-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb566-12"><a href="05_plot.html#cb566-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">&quot;2022-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2022-12-31&quot;</span>)), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb566-13"><a href="05_plot.html#cb566-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(data_plot<span class="sc">$</span>new_cases_smoothed <span class="sc">/</span> <span class="dv">1000</span>) <span class="sc">*</span> <span class="fl">1.05</span>), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb566-14"><a href="05_plot.html#cb566-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">FALSE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb566-15"><a href="05_plot.html#cb566-15" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb566-16"><a href="05_plot.html#cb566-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">breaks =</span> breaks_x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">&quot;1900-01-01&quot;</span>), <span class="fu">as.Date</span>(<span class="st">&quot;2099-12-31&quot;</span>), <span class="at">by =</span> <span class="st">&quot;3 months&quot;</span>), <span class="co"># 日付目盛ベクトル</span></span>
<span id="cb566-17"><a href="05_plot.html#cb566-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="fu">str_c</span>(<span class="fu">str_sub</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(breaks_x), <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">&quot;/&quot;</span>, lubridate<span class="sc">::</span><span class="fu">month</span>(breaks_x)), <span class="co"># 日付目盛ベクトルをラベル用に加工</span></span>
<span id="cb566-18"><a href="05_plot.html#cb566-18" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb566-19"><a href="05_plot.html#cb566-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">50</span>), <span class="co"># 目盛</span></span>
<span id="cb566-20"><a href="05_plot.html#cb566-20" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_y, <span class="co"># 目盛ラベル</span></span>
<span id="cb566-21"><a href="05_plot.html#cb566-21" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb566-22"><a href="05_plot.html#cb566-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;日付（年/月）&quot;</span>, <span class="co"># X軸のタイトル</span></span>
<span id="cb566-23"><a href="05_plot.html#cb566-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;新規感染者数（千人/日）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb566-24"><a href="05_plot.html#cb566-24" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb566-25"><a href="05_plot.html#cb566-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb566-26"><a href="05_plot.html#cb566-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># X軸ラベルの角度</span></span>
<span id="cb566-27"><a href="05_plot.html#cb566-27" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># X軸ラベルの横整列位置（0-1）</span></span>
<span id="cb566-28"><a href="05_plot.html#cb566-28" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># X軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb566-29"><a href="05_plot.html#cb566-29" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb566-30"><a href="05_plot.html#cb566-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># Y軸ラベルの角度</span></span>
<span id="cb566-31"><a href="05_plot.html#cb566-31" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># Y軸ラベルの横整列位置（0-1）</span></span>
<span id="cb566-32"><a href="05_plot.html#cb566-32" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># Y軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb566-33"><a href="05_plot.html#cb566-33" aria-hidden="true" tabindex="-1"></a>                                   )</span>
<span id="cb566-34"><a href="05_plot.html#cb566-34" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb566-35"><a href="05_plot.html#cb566-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># パネル目盛線</span></span>
<span id="cb566-36"><a href="05_plot.html#cb566-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 主目盛線の色</span></span>
<span id="cb566-37"><a href="05_plot.html#cb566-37" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="co"># 主目盛線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb566-38"><a href="05_plot.html#cb566-38" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">size =</span> <span class="fl">0.2</span> <span class="co"># 主目盛線の太さ</span></span>
<span id="cb566-39"><a href="05_plot.html#cb566-39" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="cb566-40"><a href="05_plot.html#cb566-40" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>() <span class="co"># 補助目盛り線は表示しない</span></span>
<span id="cb566-41"><a href="05_plot.html#cb566-41" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb566-42"><a href="05_plot.html#cb566-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 凡例</span></span>
<span id="cb566-43"><a href="05_plot.html#cb566-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># 凡例タイトルの文字サイズ</span></span>
<span id="cb566-44"><a href="05_plot.html#cb566-44" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 凡例タイトルの書体</span></span>
<span id="cb566-45"><a href="05_plot.html#cb566-45" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># 凡例タイトルの横整列位置</span></span>
<span id="cb566-46"><a href="05_plot.html#cb566-46" aria-hidden="true" tabindex="-1"></a>                                    ),</span>
<span id="cb566-47"><a href="05_plot.html#cb566-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span> <span class="co"># 凡例ラベルの文字サイズ</span></span>
<span id="cb566-48"><a href="05_plot.html#cb566-48" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb566-49"><a href="05_plot.html#cb566-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 凡例の枠線の色</span></span>
<span id="cb566-50"><a href="05_plot.html#cb566-50" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 凡例の枠線の太さ</span></span>
<span id="cb566-51"><a href="05_plot.html#cb566-51" aria-hidden="true" tabindex="-1"></a>                                             ),</span>
<span id="cb566-52"><a href="05_plot.html#cb566-52" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 凡例の上マージン</span></span>
<span id="cb566-53"><a href="05_plot.html#cb566-53" aria-hidden="true" tabindex="-1"></a>                               <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 凡例の下マージン</span></span>
<span id="cb566-54"><a href="05_plot.html#cb566-54" aria-hidden="true" tabindex="-1"></a>                               <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 凡例の右マージン</span></span>
<span id="cb566-55"><a href="05_plot.html#cb566-55" aria-hidden="true" tabindex="-1"></a>                               <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 凡例の左マージン</span></span>
<span id="cb566-56"><a href="05_plot.html#cb566-56" aria-hidden="true" tabindex="-1"></a>                               <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 凡例マージンの単位</span></span>
<span id="cb566-57"><a href="05_plot.html#cb566-57" aria-hidden="true" tabindex="-1"></a>                               ),</span>
<span id="cb566-58"><a href="05_plot.html#cb566-58" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="fl">1.0</span>, <span class="fl">1.0</span>), <span class="co"># 凡例の横整列位置・縦整列位置</span></span>
<span id="cb566-59"><a href="05_plot.html#cb566-59" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.97</span>, <span class="fl">0.95</span>) <span class="co"># 凡例の横位置・縦位置</span></span>
<span id="cb566-60"><a href="05_plot.html#cb566-60" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb566-61"><a href="05_plot.html#cb566-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">keywidth =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># 凡例キーの幅</span></span>
<span id="cb566-62"><a href="05_plot.html#cb566-62" aria-hidden="true" tabindex="-1"></a>                              <span class="at">keyheight =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># 凡例キーの高さ</span></span>
<span id="cb566-63"><a href="05_plot.html#cb566-63" aria-hidden="true" tabindex="-1"></a>                              <span class="at">direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="co"># 凡例の整列方向（horizontal / vertical）</span></span>
<span id="cb566-64"><a href="05_plot.html#cb566-64" aria-hidden="true" tabindex="-1"></a>                              <span class="at">nrow =</span> <span class="dv">5</span>, <span class="co"># 凡例の行数</span></span>
<span id="cb566-65"><a href="05_plot.html#cb566-65" aria-hidden="true" tabindex="-1"></a>                              <span class="at">ncol =</span> <span class="dv">1</span>, <span class="co"># 凡例の列数</span></span>
<span id="cb566-66"><a href="05_plot.html#cb566-66" aria-hidden="true" tabindex="-1"></a>                              <span class="at">reverse =</span> <span class="cn">FALSE</span>) <span class="co"># 凡例順序の逆転</span></span>
<span id="cb566-67"><a href="05_plot.html#cb566-67" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb566-68"><a href="05_plot.html#cb566-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># タイトル・キャプション</span></span>
<span id="cb566-69"><a href="05_plot.html#cb566-69" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;日本と欧州主要国の新型コロナ新規感染者数&quot;</span>, <span class="co"># 図表タイトル</span></span>
<span id="cb566-70"><a href="05_plot.html#cb566-70" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;（注）後方7日間移動平均。</span><span class="sc">\n</span><span class="st">（出所）Our World in Data、@naohat23&quot;</span>, <span class="co"># キャプション</span></span>
<span id="cb566-71"><a href="05_plot.html#cb566-71" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;国名&quot;</span> <span class="co"># 凡例に使用するscaleのタイトル</span></span>
<span id="cb566-72"><a href="05_plot.html#cb566-72" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb566-73"><a href="05_plot.html#cb566-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="co"># 図表タイトルの文字サイズ</span></span>
<span id="cb566-74"><a href="05_plot.html#cb566-74" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 図表タイトルの書体</span></span>
<span id="cb566-75"><a href="05_plot.html#cb566-75" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">hjust =</span> <span class="fl">0.5</span> <span class="co"># 図表タイトルの横整列位置</span></span>
<span id="cb566-76"><a href="05_plot.html#cb566-76" aria-hidden="true" tabindex="-1"></a>                                  ),</span>
<span id="cb566-77"><a href="05_plot.html#cb566-77" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># キャプションの文字サイズ</span></span>
<span id="cb566-78"><a href="05_plot.html#cb566-78" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># キャプションの書体</span></span>
<span id="cb566-79"><a href="05_plot.html#cb566-79" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># キャプションの横整列位置</span></span>
<span id="cb566-80"><a href="05_plot.html#cb566-80" aria-hidden="true" tabindex="-1"></a>                                    )</span>
<span id="cb566-81"><a href="05_plot.html#cb566-81" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb566-82"><a href="05_plot.html#cb566-82" aria-hidden="true" tabindex="-1"></a>  <span class="co"># フォント・マージン</span></span>
<span id="cb566-83"><a href="05_plot.html#cb566-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span> <span class="co"># 図表全体の無事サイズ</span></span>
<span id="cb566-84"><a href="05_plot.html#cb566-84" aria-hidden="true" tabindex="-1"></a>                            ),</span>
<span id="cb566-85"><a href="05_plot.html#cb566-85" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 図表の上マージン</span></span>
<span id="cb566-86"><a href="05_plot.html#cb566-86" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 図表の下マージン</span></span>
<span id="cb566-87"><a href="05_plot.html#cb566-87" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 図表の右マージン</span></span>
<span id="cb566-88"><a href="05_plot.html#cb566-88" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 図表の左マージン</span></span>
<span id="cb566-89"><a href="05_plot.html#cb566-89" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 図表マージンの単位</span></span>
<span id="cb566-90"><a href="05_plot.html#cb566-90" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb566-91"><a href="05_plot.html#cb566-91" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-258-1.png" width="672" /></p>
</div>
<div id="実例2積上棒グラフ" class="section level3 hasAnchor" number="5.30.2">
<h3><span class="header-section-number">5.30.2</span> 実例2：積上棒グラフ<a href="05_plot.html#実例2積上棒グラフ" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>日本の実質GDP変化率をマーカー付き折れ線グラフに、内訳の需要項目別寄与度を積上棒グラフにした、時系列グラフを作成します。</p>
<p>まず、外部データセット<code>data_gdp_jp</code>を用い、プロット用のデータを作成します。外部データセットの取得方法については、第2章「Rの設定」を参照してください。</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="05_plot.html#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 列を集約</span></span>
<span id="cb567-2"><a href="05_plot.html#cb567-2" aria-hidden="true" tabindex="-1"></a>data_plot <span class="ot">&lt;-</span> data_gdp_jp <span class="sc">%&gt;%</span> </span>
<span id="cb567-3"><a href="05_plot.html#cb567-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">`</span><span class="at">家計</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">民間最終消費支出</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">民間住宅</span><span class="st">`</span>,</span>
<span id="cb567-4"><a href="05_plot.html#cb567-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">政府</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">政府最終消費支出</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">公的固定資本形成</span><span class="st">`</span> <span class="sc">+</span> <span class="st">`</span><span class="at">公的在庫変動</span><span class="st">`</span></span>
<span id="cb567-5"><a href="05_plot.html#cb567-5" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb567-6"><a href="05_plot.html#cb567-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">民間最終消費支出</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">民間住宅</span><span class="st">`</span>,<span class="sc">-</span><span class="st">`</span><span class="at">政府最終消費支出</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">公的固定資本形成</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">公的在庫変動</span><span class="st">`</span>)</span>
<span id="cb567-7"><a href="05_plot.html#cb567-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-8"><a href="05_plot.html#cb567-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 列名を変更</span></span>
<span id="cb567-9"><a href="05_plot.html#cb567-9" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb567-10"><a href="05_plot.html#cb567-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">`</span><span class="at">GDP</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">国内総生産</span><span class="st">`</span>,</span>
<span id="cb567-11"><a href="05_plot.html#cb567-11" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">設備投資</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">民間企業設備</span><span class="st">`</span>,</span>
<span id="cb567-12"><a href="05_plot.html#cb567-12" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">在庫</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">民間在庫変動</span><span class="st">`</span></span>
<span id="cb567-13"><a href="05_plot.html#cb567-13" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb567-14"><a href="05_plot.html#cb567-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-15"><a href="05_plot.html#cb567-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 実質GDPの前期比変化率に対する各需要項目の寄与度を計算</span></span>
<span id="cb567-16"><a href="05_plot.html#cb567-16" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb567-17"><a href="05_plot.html#cb567-17" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="fu">across</span>(<span class="st">`</span><span class="at">GDP</span><span class="st">`</span><span class="sc">:</span><span class="st">`</span><span class="at">政府</span><span class="st">`</span>, <span class="sc">~</span> {<span class="dv">100</span> <span class="sc">*</span> (. <span class="sc">-</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(., <span class="dv">1</span>)) <span class="sc">/</span> dplyr<span class="sc">::</span><span class="fu">lag</span>(<span class="st">`</span><span class="at">GDP</span><span class="st">`</span>, <span class="dv">1</span>)}))</span>
<span id="cb567-18"><a href="05_plot.html#cb567-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-19"><a href="05_plot.html#cb567-19" aria-hidden="true" tabindex="-1"></a><span class="co"># グラフ表示範囲を選択</span></span>
<span id="cb567-20"><a href="05_plot.html#cb567-20" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span></span>
<span id="cb567-21"><a href="05_plot.html#cb567-21" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="st">`</span><span class="at">日付</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="st">&quot;2019-01-01&quot;</span>)</span>
<span id="cb567-22"><a href="05_plot.html#cb567-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-23"><a href="05_plot.html#cb567-23" aria-hidden="true" tabindex="-1"></a><span class="co"># GDP全体と寄与度にデータを分割</span></span>
<span id="cb567-24"><a href="05_plot.html#cb567-24" aria-hidden="true" tabindex="-1"></a>data_plot_gdp <span class="ot">&lt;-</span> data_plot <span class="sc">%&gt;%</span> </span>
<span id="cb567-25"><a href="05_plot.html#cb567-25" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">`</span><span class="at">日付</span><span class="st">`</span>, <span class="st">`</span><span class="at">GDP</span><span class="st">`</span>)</span>
<span id="cb567-26"><a href="05_plot.html#cb567-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-27"><a href="05_plot.html#cb567-27" aria-hidden="true" tabindex="-1"></a>data_plot_cont <span class="ot">&lt;-</span> data_plot <span class="sc">%&gt;%</span> </span>
<span id="cb567-28"><a href="05_plot.html#cb567-28" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">GDP</span><span class="st">`</span>, <span class="sc">-</span><span class="st">`</span><span class="at">開差</span><span class="st">`</span>)</span>
<span id="cb567-29"><a href="05_plot.html#cb567-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb567-30"><a href="05_plot.html#cb567-30" aria-hidden="true" tabindex="-1"></a><span class="co"># 寄与度データを縦型に変換し、項目の順序を設定</span></span>
<span id="cb567-31"><a href="05_plot.html#cb567-31" aria-hidden="true" tabindex="-1"></a>data_plot_cont <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb567-32"><a href="05_plot.html#cb567-32" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="st">`</span><span class="at">日付</span><span class="st">`</span>, <span class="at">names_to =</span> <span class="st">&quot;需要項目&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;寄与度&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb567-33"><a href="05_plot.html#cb567-33" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="st">`</span><span class="at">需要項目</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">factor</span>(<span class="st">`</span><span class="at">需要項目</span><span class="st">`</span>,</span>
<span id="cb567-34"><a href="05_plot.html#cb567-34" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">level =</span> <span class="fu">c</span>(<span class="st">&quot;家計&quot;</span>, <span class="st">&quot;設備投資&quot;</span>, <span class="st">&quot;在庫&quot;</span>, <span class="st">&quot;政府&quot;</span>, <span class="st">&quot;純輸出&quot;</span>)</span>
<span id="cb567-35"><a href="05_plot.html#cb567-35" aria-hidden="true" tabindex="-1"></a>                                    )</span>
<span id="cb567-36"><a href="05_plot.html#cb567-36" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">%&gt;%</span> </span>
<span id="cb567-37"><a href="05_plot.html#cb567-37" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">arrange</span>(<span class="st">`</span><span class="at">日付</span><span class="st">`</span>, <span class="st">`</span><span class="at">需要項目</span><span class="st">`</span>)</span></code></pre></div>
<p><code>ggplot()</code>関数でプロットを作成します。グラフを画像として保存するには、別途<code>ggsave()</code>関数を実行してください。</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="05_plot.html#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb568-2"><a href="05_plot.html#cb568-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># グラフ</span></span>
<span id="cb568-3"><a href="05_plot.html#cb568-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">data =</span> data_plot_cont,</span>
<span id="cb568-4"><a href="05_plot.html#cb568-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">日付</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">寄与度</span><span class="st">`</span>, <span class="at">fill =</span> <span class="st">`</span><span class="at">需要項目</span><span class="st">`</span>, <span class="at">group =</span> <span class="fu">rev</span>(<span class="st">`</span><span class="at">需要項目</span><span class="st">`</span>)),</span>
<span id="cb568-5"><a href="05_plot.html#cb568-5" aria-hidden="true" tabindex="-1"></a>           <span class="co">#stat = &quot;identity&quot;,</span></span>
<span id="cb568-6"><a href="05_plot.html#cb568-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">position =</span> <span class="fu">position_stack</span>(), <span class="co"># 積上ポジション</span></span>
<span id="cb568-7"><a href="05_plot.html#cb568-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb568-8"><a href="05_plot.html#cb568-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">size =</span> <span class="fl">0.5</span>, <span class="co"># 線の太さ</span></span>
<span id="cb568-9"><a href="05_plot.html#cb568-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">width =</span> <span class="cn">NULL</span> <span class="co"># 棒の幅 (0-1)</span></span>
<span id="cb568-10"><a href="05_plot.html#cb568-10" aria-hidden="true" tabindex="-1"></a>           ) <span class="sc">+</span></span>
<span id="cb568-11"><a href="05_plot.html#cb568-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>)) <span class="sc">+</span></span>
<span id="cb568-12"><a href="05_plot.html#cb568-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> data_plot_gdp,</span>
<span id="cb568-13"><a href="05_plot.html#cb568-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">日付</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">GDP</span><span class="st">`</span>),</span>
<span id="cb568-14"><a href="05_plot.html#cb568-14" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 線の透明度</span></span>
<span id="cb568-15"><a href="05_plot.html#cb568-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb568-16"><a href="05_plot.html#cb568-16" aria-hidden="true" tabindex="-1"></a>            <span class="at">linetype =</span> <span class="st">&quot;solid&quot;</span>, <span class="co"># 線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb568-17"><a href="05_plot.html#cb568-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">1.0</span> <span class="co"># 線の太さ</span></span>
<span id="cb568-18"><a href="05_plot.html#cb568-18" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb568-19"><a href="05_plot.html#cb568-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> data_plot_gdp,</span>
<span id="cb568-20"><a href="05_plot.html#cb568-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">日付</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">GDP</span><span class="st">`</span>),<span class="at">alpha =</span> <span class="fl">1.0</span>, <span class="co"># 塗りつぶしの透明度</span></span>
<span id="cb568-21"><a href="05_plot.html#cb568-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;black&quot;</span>, <span class="co"># 線の色</span></span>
<span id="cb568-22"><a href="05_plot.html#cb568-22" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> <span class="st">&quot;white&quot;</span>, <span class="co"># 塗りつぶしの色</span></span>
<span id="cb568-23"><a href="05_plot.html#cb568-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> <span class="dv">21</span>, <span class="co"># マーカーの種類</span></span>
<span id="cb568-24"><a href="05_plot.html#cb568-24" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">2.0</span>, <span class="co"># マーカーの大きさ</span></span>
<span id="cb568-25"><a href="05_plot.html#cb568-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">stroke =</span> <span class="fl">0.5</span> <span class="co"># 線の太さ</span></span>
<span id="cb568-26"><a href="05_plot.html#cb568-26" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb568-27"><a href="05_plot.html#cb568-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 補助線</span></span>
<span id="cb568-28"><a href="05_plot.html#cb568-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="co"># 水平線の縦軸との交点</span></span>
<span id="cb568-29"><a href="05_plot.html#cb568-29" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 水平線の色</span></span>
<span id="cb568-30"><a href="05_plot.html#cb568-30" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 水平線の太さ</span></span>
<span id="cb568-31"><a href="05_plot.html#cb568-31" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb568-32"><a href="05_plot.html#cb568-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 色</span></span>
<span id="cb568-33"><a href="05_plot.html#cb568-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Paired&quot;</span>, <span class="co"># カラーパレット名</span></span>
<span id="cb568-34"><a href="05_plot.html#cb568-34" aria-hidden="true" tabindex="-1"></a>                    <span class="at">direction =</span> <span class="dv">1</span> <span class="co"># 色の順序（-1で逆順）</span></span>
<span id="cb568-35"><a href="05_plot.html#cb568-35" aria-hidden="true" tabindex="-1"></a>                    ) <span class="sc">+</span></span>
<span id="cb568-36"><a href="05_plot.html#cb568-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb568-37"><a href="05_plot.html#cb568-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb568-38"><a href="05_plot.html#cb568-38" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb568-39"><a href="05_plot.html#cb568-39" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">TRUE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb568-40"><a href="05_plot.html#cb568-40" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb568-41"><a href="05_plot.html#cb568-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">breaks =</span> breaks_x <span class="ot">&lt;-</span> data_plot_gdp<span class="sc">$</span>日付[<span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">length</span>(data_plot_gdp<span class="sc">$</span>日付), <span class="dv">2</span>)], <span class="co"># 日付目盛ベクトル</span></span>
<span id="cb568-42"><a href="05_plot.html#cb568-42" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="fu">str_c</span>(<span class="fu">str_sub</span>(lubridate<span class="sc">::</span><span class="fu">year</span>(breaks_x), <span class="dv">1</span>, <span class="dv">4</span>), <span class="st">&quot;/&quot;</span>, lubridate<span class="sc">::</span><span class="fu">month</span>(breaks_x)), <span class="co"># 日付目盛ベクトルをラベル用に加工</span></span>
<span id="cb568-43"><a href="05_plot.html#cb568-43" aria-hidden="true" tabindex="-1"></a>               ) <span class="sc">+</span></span>
<span id="cb568-44"><a href="05_plot.html#cb568-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">20</span>, <span class="dv">20</span>, <span class="dv">1</span>), <span class="co"># 目盛</span></span>
<span id="cb568-45"><a href="05_plot.html#cb568-45" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_y <span class="sc">%&gt;%</span> stringr<span class="sc">::</span><span class="fu">str_replace_all</span>(<span class="st">&quot;-&quot;</span>, <span class="st">&quot;▲&quot;</span>), <span class="co"># 目盛ラベル</span></span>
<span id="cb568-46"><a href="05_plot.html#cb568-46" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb568-47"><a href="05_plot.html#cb568-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;日付（年/月）&quot;</span>, <span class="co"># X軸のタイトル</span></span>
<span id="cb568-48"><a href="05_plot.html#cb568-48" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;実質GDP変化率（前期比、％）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb568-49"><a href="05_plot.html#cb568-49" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb568-50"><a href="05_plot.html#cb568-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb568-51"><a href="05_plot.html#cb568-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># X軸ラベルの角度</span></span>
<span id="cb568-52"><a href="05_plot.html#cb568-52" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="co"># X軸ラベルの横整列位置（0-1）</span></span>
<span id="cb568-53"><a href="05_plot.html#cb568-53" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># X軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb568-54"><a href="05_plot.html#cb568-54" aria-hidden="true" tabindex="-1"></a>                                   ),</span>
<span id="cb568-55"><a href="05_plot.html#cb568-55" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="co"># Y軸ラベルの角度</span></span>
<span id="cb568-56"><a href="05_plot.html#cb568-56" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="fl">1.0</span>, <span class="co"># Y軸ラベルの横整列位置（0-1）</span></span>
<span id="cb568-57"><a href="05_plot.html#cb568-57" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">vjust =</span> <span class="fl">0.5</span> <span class="co"># Y軸ラベルの縦整列位置（0-1）</span></span>
<span id="cb568-58"><a href="05_plot.html#cb568-58" aria-hidden="true" tabindex="-1"></a>                                   )</span>
<span id="cb568-59"><a href="05_plot.html#cb568-59" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb568-60"><a href="05_plot.html#cb568-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># パネル目盛線</span></span>
<span id="cb568-61"><a href="05_plot.html#cb568-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 主目盛線の色</span></span>
<span id="cb568-62"><a href="05_plot.html#cb568-62" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="co"># 主目盛線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb568-63"><a href="05_plot.html#cb568-63" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">size =</span> <span class="fl">0.2</span> <span class="co"># 主目盛線の太さ</span></span>
<span id="cb568-64"><a href="05_plot.html#cb568-64" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="cb568-65"><a href="05_plot.html#cb568-65" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>() <span class="co"># 補助目盛り線は表示しない</span></span>
<span id="cb568-66"><a href="05_plot.html#cb568-66" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb568-67"><a href="05_plot.html#cb568-67" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 凡例</span></span>
<span id="cb568-68"><a href="05_plot.html#cb568-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># 凡例タイトルの文字サイズ</span></span>
<span id="cb568-69"><a href="05_plot.html#cb568-69" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 凡例タイトルの書体</span></span>
<span id="cb568-70"><a href="05_plot.html#cb568-70" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># 凡例タイトルの横整列位置</span></span>
<span id="cb568-71"><a href="05_plot.html#cb568-71" aria-hidden="true" tabindex="-1"></a>                                    ),</span>
<span id="cb568-72"><a href="05_plot.html#cb568-72" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>), <span class="co"># 凡例ラベルの文字サイズ</span></span>
<span id="cb568-73"><a href="05_plot.html#cb568-73" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 凡例の枠線の色</span></span>
<span id="cb568-74"><a href="05_plot.html#cb568-74" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 凡例の枠線の太さ</span></span>
<span id="cb568-75"><a href="05_plot.html#cb568-75" aria-hidden="true" tabindex="-1"></a>                                             ),</span>
<span id="cb568-76"><a href="05_plot.html#cb568-76" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 凡例の上マージン</span></span>
<span id="cb568-77"><a href="05_plot.html#cb568-77" aria-hidden="true" tabindex="-1"></a>                               <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 凡例の下マージン</span></span>
<span id="cb568-78"><a href="05_plot.html#cb568-78" aria-hidden="true" tabindex="-1"></a>                               <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 凡例の右マージン</span></span>
<span id="cb568-79"><a href="05_plot.html#cb568-79" aria-hidden="true" tabindex="-1"></a>                               <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 凡例の左マージン</span></span>
<span id="cb568-80"><a href="05_plot.html#cb568-80" aria-hidden="true" tabindex="-1"></a>                               <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 凡例マージンの単位</span></span>
<span id="cb568-81"><a href="05_plot.html#cb568-81" aria-hidden="true" tabindex="-1"></a>                               ),</span>
<span id="cb568-82"><a href="05_plot.html#cb568-82" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="co"># 凡例の横整列位置・縦整列位置</span></span>
<span id="cb568-83"><a href="05_plot.html#cb568-83" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">&quot;right&quot;</span> <span class="co"># 凡例の横位置・縦位置</span></span>
<span id="cb568-84"><a href="05_plot.html#cb568-84" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb568-85"><a href="05_plot.html#cb568-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">keywidth =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># 凡例キーの幅</span></span>
<span id="cb568-86"><a href="05_plot.html#cb568-86" aria-hidden="true" tabindex="-1"></a>                             <span class="at">keyheight =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="at">units =</span> <span class="st">&quot;mm&quot;</span>), <span class="co"># 凡例キーの高さ</span></span>
<span id="cb568-87"><a href="05_plot.html#cb568-87" aria-hidden="true" tabindex="-1"></a>                             <span class="at">direction =</span> <span class="st">&quot;vertical&quot;</span>, <span class="co"># 凡例の整列方向（horizontal / vertical）</span></span>
<span id="cb568-88"><a href="05_plot.html#cb568-88" aria-hidden="true" tabindex="-1"></a>                             <span class="at">nrow =</span> <span class="dv">5</span>, <span class="co"># 凡例の行数</span></span>
<span id="cb568-89"><a href="05_plot.html#cb568-89" aria-hidden="true" tabindex="-1"></a>                             <span class="at">ncol =</span> <span class="dv">1</span>, <span class="co"># 凡例の列数</span></span>
<span id="cb568-90"><a href="05_plot.html#cb568-90" aria-hidden="true" tabindex="-1"></a>                             <span class="at">reverse =</span> <span class="cn">FALSE</span> <span class="co"># 凡例順序の逆転</span></span>
<span id="cb568-91"><a href="05_plot.html#cb568-91" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb568-92"><a href="05_plot.html#cb568-92" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb568-93"><a href="05_plot.html#cb568-93" aria-hidden="true" tabindex="-1"></a>  <span class="co"># タイトル・キャプション</span></span>
<span id="cb568-94"><a href="05_plot.html#cb568-94" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;日本の実質GDP変化率の項目別寄与度&quot;</span>, <span class="co"># 図表タイトル</span></span>
<span id="cb568-95"><a href="05_plot.html#cb568-95" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;（注）家計は個人消費と住宅の合計。</span><span class="sc">\n</span><span class="st">（出所）内閣府「四半期別GDP速報」。&quot;</span>, <span class="co"># キャプション</span></span>
<span id="cb568-96"><a href="05_plot.html#cb568-96" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="fu">element_blank</span>() <span class="co"># 凡例に使用するscaleのタイトル</span></span>
<span id="cb568-97"><a href="05_plot.html#cb568-97" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb568-98"><a href="05_plot.html#cb568-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="co"># 図表タイトルの文字サイズ</span></span>
<span id="cb568-99"><a href="05_plot.html#cb568-99" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 図表タイトルの書体</span></span>
<span id="cb568-100"><a href="05_plot.html#cb568-100" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">hjust =</span> <span class="fl">0.5</span> <span class="co"># 図表タイトルの横整列位置</span></span>
<span id="cb568-101"><a href="05_plot.html#cb568-101" aria-hidden="true" tabindex="-1"></a>                                  ),</span>
<span id="cb568-102"><a href="05_plot.html#cb568-102" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># キャプションの文字サイズ</span></span>
<span id="cb568-103"><a href="05_plot.html#cb568-103" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># キャプションの書体</span></span>
<span id="cb568-104"><a href="05_plot.html#cb568-104" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># キャプションの横整列位置</span></span>
<span id="cb568-105"><a href="05_plot.html#cb568-105" aria-hidden="true" tabindex="-1"></a>                                    )</span>
<span id="cb568-106"><a href="05_plot.html#cb568-106" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb568-107"><a href="05_plot.html#cb568-107" aria-hidden="true" tabindex="-1"></a>  <span class="co"># フォント・マージン</span></span>
<span id="cb568-108"><a href="05_plot.html#cb568-108" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span> <span class="co"># 図表全体の無事サイズ</span></span>
<span id="cb568-109"><a href="05_plot.html#cb568-109" aria-hidden="true" tabindex="-1"></a>                            ),</span>
<span id="cb568-110"><a href="05_plot.html#cb568-110" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 図表の上マージン</span></span>
<span id="cb568-111"><a href="05_plot.html#cb568-111" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 図表の下マージン</span></span>
<span id="cb568-112"><a href="05_plot.html#cb568-112" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 図表の右マージン</span></span>
<span id="cb568-113"><a href="05_plot.html#cb568-113" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 図表の左マージン</span></span>
<span id="cb568-114"><a href="05_plot.html#cb568-114" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 図表マージンの単位</span></span>
<span id="cb568-115"><a href="05_plot.html#cb568-115" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb568-116"><a href="05_plot.html#cb568-116" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-260-1.png" width="672" /></p>
</div>
<div id="実例3箱ひげ図" class="section level3 hasAnchor" number="5.30.3">
<h3><span class="header-section-number">5.30.3</span> 実例3：箱ひげ図<a href="05_plot.html#実例3箱ひげ図" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>世界各国の新型コロナ死亡率の分布を年別に集計した箱ひげ図を作成します。</p>
<p>まず、外部データセット<code>data_owid</code>を用い、プロット用のデータを作成します。外部データセットの取得方法については、第2章「Rの設定」を参照してください。</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="05_plot.html#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 新規感染者数と新規死亡者数の列を選択</span></span>
<span id="cb569-2"><a href="05_plot.html#cb569-2" aria-hidden="true" tabindex="-1"></a>data_plot <span class="ot">&lt;-</span> data_owid <span class="sc">%&gt;%</span> </span>
<span id="cb569-3"><a href="05_plot.html#cb569-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(location, date, new_cases, new_deaths)</span>
<span id="cb569-4"><a href="05_plot.html#cb569-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-5"><a href="05_plot.html#cb569-5" aria-hidden="true" tabindex="-1"></a><span class="co"># 年の列を追加し年別の平均を集計</span></span>
<span id="cb569-6"><a href="05_plot.html#cb569-6" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb569-7"><a href="05_plot.html#cb569-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">year =</span> lubridate<span class="sc">::</span><span class="fu">year</span>(date)) <span class="sc">%&gt;%</span> </span>
<span id="cb569-8"><a href="05_plot.html#cb569-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(location, year) <span class="sc">%&gt;%</span> </span>
<span id="cb569-9"><a href="05_plot.html#cb569-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">c</span>(new_cases, new_deaths), mean, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb569-10"><a href="05_plot.html#cb569-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-11"><a href="05_plot.html#cb569-11" aria-hidden="true" tabindex="-1"></a><span class="co"># 年別の死亡率を計算</span></span>
<span id="cb569-12"><a href="05_plot.html#cb569-12" aria-hidden="true" tabindex="-1"></a>data_plot <span class="sc">%&lt;&gt;%</span> </span>
<span id="cb569-13"><a href="05_plot.html#cb569-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">mort_rate =</span> <span class="dv">100</span> <span class="sc">*</span> new_deaths <span class="sc">/</span> new_cases,</span>
<span id="cb569-14"><a href="05_plot.html#cb569-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">year =</span> <span class="fu">str_c</span>(year, <span class="st">&quot;年&quot;</span>)</span>
<span id="cb569-15"><a href="05_plot.html#cb569-15" aria-hidden="true" tabindex="-1"></a>                )</span></code></pre></div>
<p><code>ggplot()</code>関数でプロットを作成します。グラフを画像として保存するには、別途<code>ggsave()</code>関数を実行してください。</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="05_plot.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> data_plot,</span>
<span id="cb570-2"><a href="05_plot.html#cb570-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> mort_rate, <span class="at">color =</span> year, <span class="at">fill =</span> year)</span>
<span id="cb570-3"><a href="05_plot.html#cb570-3" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb570-4"><a href="05_plot.html#cb570-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># グラフ</span></span>
<span id="cb570-5"><a href="05_plot.html#cb570-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">outlier.shape =</span> <span class="cn">NA</span>, <span class="at">alpha =</span> <span class="fl">0.25</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb570-6"><a href="05_plot.html#cb570-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">1.0</span>, <span class="at">shape =</span> <span class="dv">21</span>) <span class="sc">+</span></span>
<span id="cb570-7"><a href="05_plot.html#cb570-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 補助線</span></span>
<span id="cb570-8"><a href="05_plot.html#cb570-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="co"># 水平線の縦軸との交点</span></span>
<span id="cb570-9"><a href="05_plot.html#cb570-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> <span class="st">&quot;gray&quot;</span>, <span class="co"># 水平線の色</span></span>
<span id="cb570-10"><a href="05_plot.html#cb570-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">size =</span> <span class="fl">0.5</span> <span class="co"># 水平線の太さ</span></span>
<span id="cb570-11"><a href="05_plot.html#cb570-11" aria-hidden="true" tabindex="-1"></a>             ) <span class="sc">+</span></span>
<span id="cb570-12"><a href="05_plot.html#cb570-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 軸</span></span>
<span id="cb570-13"><a href="05_plot.html#cb570-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="cn">NULL</span>, <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb570-14"><a href="05_plot.html#cb570-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="co"># 下限・上限値（両方指定しない場合はNULL、片側のみ指定しない場合はNA）</span></span>
<span id="cb570-15"><a href="05_plot.html#cb570-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">expand =</span> <span class="cn">TRUE</span> <span class="co"># 表示範囲を下限・上限値から小幅に拡大（拡大しない場合はFALSE)</span></span>
<span id="cb570-16"><a href="05_plot.html#cb570-16" aria-hidden="true" tabindex="-1"></a>                  ) <span class="sc">+</span></span>
<span id="cb570-17"><a href="05_plot.html#cb570-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> breaks_y <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="fl">0.5</span>), <span class="co"># 目盛</span></span>
<span id="cb570-18"><a href="05_plot.html#cb570-18" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> breaks_y <span class="sc">%&gt;%</span> <span class="fu">sprintf</span>(<span class="at">fmt =</span> <span class="st">&quot;%0.1f&quot;</span>), <span class="co"># 目盛ラベル</span></span>
<span id="cb570-19"><a href="05_plot.html#cb570-19" aria-hidden="true" tabindex="-1"></a>                     ) <span class="sc">+</span></span>
<span id="cb570-20"><a href="05_plot.html#cb570-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>(), <span class="co"># X軸のタイトル</span></span>
<span id="cb570-21"><a href="05_plot.html#cb570-21" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;新型コロナ感染者の致死率（％）&quot;</span> <span class="co"># Y軸のタイトル</span></span>
<span id="cb570-22"><a href="05_plot.html#cb570-22" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb570-23"><a href="05_plot.html#cb570-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>) <span class="co"># 軸タイトルの文字サイズ</span></span>
<span id="cb570-24"><a href="05_plot.html#cb570-24" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb570-25"><a href="05_plot.html#cb570-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># パネル目盛線</span></span>
<span id="cb570-26"><a href="05_plot.html#cb570-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="co"># 主目盛線の色</span></span>
<span id="cb570-27"><a href="05_plot.html#cb570-27" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>, <span class="co"># 主目盛線の種類（solid / dashed / dotted / dotdash / twodash / longdash）</span></span>
<span id="cb570-28"><a href="05_plot.html#cb570-28" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">size =</span> <span class="fl">0.2</span> <span class="co"># 主目盛線の太さ</span></span>
<span id="cb570-29"><a href="05_plot.html#cb570-29" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="cb570-30"><a href="05_plot.html#cb570-30" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>() <span class="co"># 補助目盛り線は表示しない</span></span>
<span id="cb570-31"><a href="05_plot.html#cb570-31" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb570-32"><a href="05_plot.html#cb570-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 凡例</span></span>
<span id="cb570-33"><a href="05_plot.html#cb570-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span> <span class="co"># 凡例の横位置・縦位置</span></span>
<span id="cb570-34"><a href="05_plot.html#cb570-34" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb570-35"><a href="05_plot.html#cb570-35" aria-hidden="true" tabindex="-1"></a>  <span class="co"># タイトル・キャプション</span></span>
<span id="cb570-36"><a href="05_plot.html#cb570-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;世界各国の新型コロナ感染者の致死率（年別）&quot;</span>, <span class="co"># 図表タイトル</span></span>
<span id="cb570-37"><a href="05_plot.html#cb570-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;（注）箱の中の横線は中央値を示す。</span><span class="sc">\n</span><span class="st">（出所）Our World in Data、@naohat23&quot;</span> <span class="co"># キャプション</span></span>
<span id="cb570-38"><a href="05_plot.html#cb570-38" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb570-39"><a href="05_plot.html#cb570-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>, <span class="co"># 図表タイトルの文字サイズ</span></span>
<span id="cb570-40"><a href="05_plot.html#cb570-40" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="co"># 図表タイトルの書体</span></span>
<span id="cb570-41"><a href="05_plot.html#cb570-41" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">hjust =</span> <span class="fl">0.5</span> <span class="co"># 図表タイトルの横整列位置</span></span>
<span id="cb570-42"><a href="05_plot.html#cb570-42" aria-hidden="true" tabindex="-1"></a>                                  ),</span>
<span id="cb570-43"><a href="05_plot.html#cb570-43" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span>, <span class="co"># キャプションの文字サイズ</span></span>
<span id="cb570-44"><a href="05_plot.html#cb570-44" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">face =</span> <span class="st">&quot;plain&quot;</span>, <span class="co"># キャプションの書体</span></span>
<span id="cb570-45"><a href="05_plot.html#cb570-45" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">hjust =</span> <span class="fl">0.0</span> <span class="co"># キャプションの横整列位置</span></span>
<span id="cb570-46"><a href="05_plot.html#cb570-46" aria-hidden="true" tabindex="-1"></a>                                    )</span>
<span id="cb570-47"><a href="05_plot.html#cb570-47" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">+</span></span>
<span id="cb570-48"><a href="05_plot.html#cb570-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># フォント・マージン</span></span>
<span id="cb570-49"><a href="05_plot.html#cb570-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">8</span> <span class="co"># 図表全体の無事サイズ</span></span>
<span id="cb570-50"><a href="05_plot.html#cb570-50" aria-hidden="true" tabindex="-1"></a>                            ),</span>
<span id="cb570-51"><a href="05_plot.html#cb570-51" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="at">t =</span> <span class="dv">1</span>, <span class="co"># 図表の上マージン</span></span>
<span id="cb570-52"><a href="05_plot.html#cb570-52" aria-hidden="true" tabindex="-1"></a>                             <span class="at">b =</span> <span class="dv">1</span>, <span class="co"># 図表の下マージン</span></span>
<span id="cb570-53"><a href="05_plot.html#cb570-53" aria-hidden="true" tabindex="-1"></a>                             <span class="at">r =</span> <span class="dv">1</span>, <span class="co"># 図表の右マージン</span></span>
<span id="cb570-54"><a href="05_plot.html#cb570-54" aria-hidden="true" tabindex="-1"></a>                             <span class="at">l =</span> <span class="dv">1</span>, <span class="co"># 図表の左マージン</span></span>
<span id="cb570-55"><a href="05_plot.html#cb570-55" aria-hidden="true" tabindex="-1"></a>                             <span class="at">unit =</span> <span class="st">&quot;mm&quot;</span> <span class="co"># 図表マージンの単位</span></span>
<span id="cb570-56"><a href="05_plot.html#cb570-56" aria-hidden="true" tabindex="-1"></a>                             )</span>
<span id="cb570-57"><a href="05_plot.html#cb570-57" aria-hidden="true" tabindex="-1"></a>        )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-262-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="04_tidyverse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="06_eda.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlights": true
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
