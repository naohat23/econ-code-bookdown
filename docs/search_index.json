[["rの設定.html", "01_setting 1 Rの設定 1.1 設定全般 1.2 パッケージのインストールとインポート 1.3 グラフの設定", " 01_setting Naoki Hattori 2022-05-04 1 Rの設定 Rを使用する際の各種設定です。パッケージのインストールやプロキシサーバーの設定（プロキシ環境のみ）など、Rの使用に欠かせない様々な設定について記載しています。 1.1 設定全般 1.1.1 Rのバージョン確認 version ## _ ## platform x86_64-w64-mingw32 ## arch x86_64 ## os mingw32 ## system x86_64, mingw32 ## status ## major 4 ## minor 1.3 ## year 2022 ## month 03 ## day 10 ## svn rev 81868 ## language R ## version.string R version 4.1.3 (2022-03-10) ## nickname One Push-Up 1.1.2 セッション情報の確認 sessionInfo() ## R version 4.1.3 (2022-03-10) ## Platform: x86_64-w64-mingw32/x64 (64-bit) ## Running under: Windows 10 x64 (build 19044) ## ## Matrix products: default ## ## locale: ## [1] LC_COLLATE=Japanese_Japan.932 LC_CTYPE=Japanese_Japan.932 ## [3] LC_MONETARY=Japanese_Japan.932 LC_NUMERIC=C ## [5] LC_TIME=Japanese_Japan.932 ## ## attached base packages: ## [1] stats graphics grDevices utils datasets methods base ## ## loaded via a namespace (and not attached): ## [1] bookdown_0.26 digest_0.6.29 R6_2.5.1 jsonlite_1.8.0 ## [5] magrittr_2.0.3 evaluate_0.15 stringi_1.7.6 rlang_1.0.2 ## [9] cli_3.2.0 rstudioapi_0.13 jquerylib_0.1.4 bslib_0.3.1 ## [13] rmarkdown_2.13 tools_4.1.3 stringr_1.4.0 xfun_0.30 ## [17] yaml_2.3.5 fastmap_1.1.0 compiler_4.1.3 htmltools_0.5.2 ## [21] knitr_1.38 sass_0.4.1 1.1.3 警告の非表示 options(warn = -1) 1.1.4 関数が出力する警告やメッセージの非表示 関数が出力する警告やメッセージはoptions(warn = -1)で非表示にできないため、suppressWarnings()関数やsuppressMessages()関数を使用します。 suppressWarnings(警告を出力する関数) suppressMessages(メッセージを出力する関数) 1.2 パッケージのインストールとインポート 1.2.1 使用するパッケージ一覧 tidyverse系 lubridate：日付処理 magrittr：パイプ処理 tidyverse：モダンなデータ分析用パッケージセット readxl：Excelファイルの読み込み 図表系 esquisse：shanyを使用したインタラクティブな図表作成 geofacet：地図形式のファセット図配置 ggpubr：論文形式の図表作成 ggsci：科学系論文の雑誌別カラーパレット ggrepel：散布図のラベル付与 lemon：ファセット図の軸・目盛り表示 RColorBrewer：カラーパレット 統計系 mgcv：一般化加法モデル（GAM） plm：パネルデータモデル sigmoid：シグモイド関数 tidyquant：金融時系列データ分析 その他 openxlsx：Excelのxlsxファイルの読み込み・編集・書き出し 1.2.2 パッケージのインストールとインポート パッケージのインストールはinstall.packages()関数、インストールしたパッケージのインポートはlibrary()で実行します。 ## ## 次のパッケージを付け加えます: &#39;lubridate&#39; ## 以下のオブジェクトは &#39;package:base&#39; からマスクされています: ## ## date, intersect, setdiff, union ## -- Attaching packages --------------------------------------- tidyverse 1.3.1 -- ## v ggplot2 3.3.5 v purrr 0.3.4 ## v tibble 3.1.6 v dplyr 1.0.8 ## v tidyr 1.2.0 v stringr 1.4.0 ## v readr 2.1.2 v forcats 0.5.1 ## -- Conflicts ------------------------------------------ tidyverse_conflicts() -- ## x lubridate::as.difftime() masks base::as.difftime() ## x lubridate::date() masks base::date() ## x tidyr::extract() masks magrittr::extract() ## x dplyr::filter() masks stats::filter() ## x lubridate::intersect() masks base::intersect() ## x dplyr::lag() masks stats::lag() ## x purrr::set_names() masks magrittr::set_names() ## x lubridate::setdiff() masks base::setdiff() ## x lubridate::union() masks base::union() ## ## 次のパッケージを付け加えます: &#39;lemon&#39; ## 以下のオブジェクトは &#39;package:purrr&#39; からマスクされています: ## ## %||% ## 以下のオブジェクトは &#39;package:ggplot2&#39; からマスクされています: ## ## CoordCartesian, element_render ## 要求されたパッケージ nlme をロード中です ## ## 次のパッケージを付け加えます: &#39;nlme&#39; ## 以下のオブジェクトは &#39;package:dplyr&#39; からマスクされています: ## ## collapse ## This is mgcv 1.8-40. For overview type &#39;help(&quot;mgcv-package&quot;)&#39;. ## ## 次のパッケージを付け加えます: &#39;plm&#39; ## 以下のオブジェクトは &#39;package:dplyr&#39; からマスクされています: ## ## between, lag, lead ## 要求されたパッケージ PerformanceAnalytics をロード中です ## 要求されたパッケージ xts をロード中です ## 要求されたパッケージ zoo をロード中です ## ## 次のパッケージを付け加えます: &#39;zoo&#39; ## 以下のオブジェクトは &#39;package:base&#39; からマスクされています: ## ## as.Date, as.Date.numeric ## ## 次のパッケージを付け加えます: &#39;xts&#39; ## 以下のオブジェクトは &#39;package:dplyr&#39; からマスクされています: ## ## first, last ## ## 次のパッケージを付け加えます: &#39;PerformanceAnalytics&#39; ## 以下のオブジェクトは &#39;package:graphics&#39; からマスクされています: ## ## legend ## 要求されたパッケージ quantmod をロード中です ## 要求されたパッケージ TTR をロード中です ## Registered S3 method overwritten by &#39;quantmod&#39;: ## method from ## as.zoo.data.frame zoo ## == Need to Learn tidyquant? ==================================================== ## Business Science offers a 1-hour course - Learning Lab #9: Performance Analysis &amp; Portfolio Optimization with tidyquant! ## &lt;/&gt; Learn more at: https://university.business-science.io/p/learning-labs-pro &lt;/&gt; 1.3 グラフの設定 レポートやスライドに掲載するためのグラフは、主にRのggplot2パッケージで作成します。 1.3.1 グラフのテーマ設定 実務上、Excelと併用することを想定しているため、Excelで出力されるグラフに似たテーマを設定します。ggplot2にデフォルトで用意されている様々なテーマについては、こちらを参照してください。 theme_set(theme_light()) 1.3.2 グラフのフォント設定 Windows上でRを使用する場合は、日本語フォントをグラフ上で表示するために以下の設定が必要です。ここでは代表的なフォントとしてMeiryo UIとYu Gothic UIを設定します。それぞれのフォントにMEIRYO、YUGOというキーを割り当て、ggplot2でグラフを作成する際にキーを指定します。 windowsFonts(&quot;MEIRYO&quot; = windowsFont(&quot;Meiryo UI&quot;)) windowsFonts(&quot;YUGO&quot; = windowsFont(&quot;Yu Gothic UI&quot;)) "],["rの基本的な使用方法.html", "2 Rの基本的な使用方法 2.1 基本操作 2.2 ベクトル 2.3 リスト 2.4 演算子と関数 2.5 制御構文 2.6 データの読み込み・書き出し 2.7 オブジェクトのセーブ・ロード", " 2 Rの基本的な使用方法 2.1 基本操作 2.2 ベクトル 2.3 リスト 2.4 演算子と関数 2.5 制御構文 2.6 データの読み込み・書き出し 2.6.1 CSVデータ data &lt;- readr::read_csv(file = &quot;directory/file.csv&quot;, # ファイルパス／URL（拡張子が必要） col_names = TRUE, # ヘッダー（列名データ）の有無 col_types = NULL, # 各列の型の指定（c：文字列型、d：数値型、D：日付型、l：論理値型） skip = 0) # 読み込み時に上からスキップする行数 2.6.2 Excelデータ readrパッケージのread_excel()関数はExcelのxls形式、xlsx形式どちらも読み込み可能です。ただし、読み込みができるのはローカルネットワーク内のファイルパスだけで、URLからの読み込みはできません。 data &lt;- readxl::read_excel(path = &quot;directory/file.xls&quot;, # ファイルパス（拡張子が必要、URLは不可） sheet = NULL, # シートインデックス／シート名 col_names = TRUE, # ヘッダー（列名データ）の有無 col_types = NULL, # 各列の型の指定（c：文字列型、d：数値型、D：日付型、l：論理値型） skip = 0) # 読み込み時に上からスキップする行数 2.6.3 Excelデータ openxlsxパッケージのread.xlsx()関数であれば、ローカルネットワーク内のファイルパスとURLどちらからでも読み込みが可能です。ただし、読み込めるファイル形式はxlsx形式のみで、xls形式には対応していません。 data &lt;- openxlsx::read.xlsx(xlsxFile = &quot;directory/file.xlsx&quot;, # ファイルパス／URL（拡張子が必要） sheet = 1, # シートインデックス／シート名 startRow = 5, # 読み込み開始行 colNames = TRUE, # 列名データの有無 rowNames = FALSE, # 行名データの有無 rows = 5:53, # 読み込む列（NULLですべて読み込み） cols = NULL) # 読み込む行（NULLですべて読み込み） 2.6.4 CSVデータの書き出し write.csv(..., # 書き出すオブジェクト名（クオーテーションは不要） file = &quot;directory/file.csv&quot;, # 書き出し先のファイルパス（拡張子が必要） row.names = FALSE) # 行番号を付与するか 2.7 オブジェクトのセーブ・ロード 2.7.1 セーブ RのオブジェクトをRData形式で保存します。 save(..., # セーブするオブジェクト名（クオーテーションは不要） file = &quot;directory/file.RData&quot;) # セーブ先のファイルパス（拡張子が必要） 2.7.2 ロード 保存したRData形式のオブジェクトを呼び出します。 load(file = &quot;directory/file.RData&quot;) # ロード元ファイルパス（拡張子が必要） "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
