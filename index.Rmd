---
title: "エコノミストのためのR"
author: "服部直樹"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: 
  bookdown::gitbook:
    #df_print: "paged"
    highlight: default
    toc_depth: 3
    config:
      toc:
        collapse: subsection
        scroll_highlights: yes
        before: |
          <li><a href="https://naohat23.github.io/econ-code-bookdown">エコノミストのためのR</a></li>
        after: |
          <li><a href="https://github.com/rstudio/bookdown">Published with bookdown</a></li>
      toolbar:
        position: fixed
      edit: null
      download: false
      sharing:
        github: yes
        facebook: yes
        linkedin: yes
        twitter: yes
github-repo: "naohat23/econ-code-bookdown"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# はじめに {.unnumbered}

本書は、エコノミストがRを使用して経済・金融データ分析を行うための方法をまとめたものです。

Rによるプログラミング、データの取り扱い、計量経済学などのデータ分析方法それぞれについて解説した書籍は、世の中に沢山あります。しかし、エコノミストがよく使用するコードや分析方法を体系的に整理し、かつ、いつでも・どこからでもコードにアクセスできるようにしたサービスが無かったので、本書を作成しました。

### なぜRを使うのか？ {.unnumbered}

データ分析を行うソフトウェアは、R以外にも、EViews、Stata、Pythonといった選択肢があります。では、なぜRを使用するのでしょうか。

**無料**：　Rは無料で使用することができます。オフィスでも、自宅でも、所属組織が変わっても同じソフトウェアを使って作業することができるため、わざわざ違うソフトウェアの使用方法を新たに覚える必要がありません。また、無料で誰でも使えるということは、世界中に多くのユーザーがいて、書籍やオンラインに情報が沢山あるということでもあります。本書もその一つです。

**豊富なパッケージ**：　Rはデータ分析を行うための追加パッケージが大量に開発されており、用途に応じてパッケージをインストールすることで、様々なデータ分析手法を使用することが可能です。オーソドックスな計量経済分析はもちろん、機械学習、自然言語処理、地理データ分析など、Rで実施可能な分析は多岐にわたります。

**データ分析に特化**：　RとPythonはよく比較されますが、Pythonが汎用プログラミング言語である一方、Rはデータ分析に特化しているという違いがあります。特に、Rの統合開発環境であるRStudioは、コードの記述と実行に加え、変数の内容を一覧表示したり、グラフをプロットしたり、ディレクトリやヘルプを表示したり、といった分析を補助する機能を一つの画面で操作することができ、ストレスなく作業できます。データ分析を行うのであれば、まずRを選択すべきでしょう。一方、高度な深層学習を行ったり、分析した結果を用いてアプリケーションを作成したりするのであれば、Pythonが向いているといえます。

**直感的なデータ操作**：　Rのパッケージの一つである`tidyverse`では、直感的かつ効率的なデータ操作（データハンドリング）を行うことができます。データセットを読み込んだ後、変数の選択、フィルタ、集計、統合、新たな変数の計算、異常値の処理といった前処理をシームレスに実施し、そのまま図表作成や分析に進むことができます。また、データセットの読み込みも、ローカルからの読み込み、ウェブからのを問わず容易に行うことができます。

**強力なグラフ作成機能**：　Rの`ggplot2`パッケージは強力なグラフ作成機能をもち、折れ線グラフ、棒グラフ、散布図といったおなじみのグラフだけでなく、ヒートマップ、QQプロット、ステップグラフ、ドットプロット、箱ひげ図、ヴァイオリングラフ、ジッターグラフ、複合グラフ（ファセット）などの高度なグラフを作成することができます。グラフは日本語表記にも対応しており、フォーマットを設定すれば、そのままレポートにも使用可能です。

### 本書で出来ること　 {.unnumbered}

エコノミストがRを使用してデータ分析を行う方法を、順序だてて学ぶことができます。Rの設定、Rの演算やオブジェクトの取り扱い方といった基本的な使用方法、`tidyverse`パッケージを使ってデータを自由に操作する方法、季節調整やトレンドなどの時系列データ特有の処理、`ggplot2`パッケージを使ったグラフ作成、データの分析方針を立てるための探索的データ分析（EDA）、計量経済学の基礎である線形単回帰・重回帰について解説しています。すべてRのコードを記載していますので、自分の環境で結果を再現することが可能です。

今後、マクロ計量経済学ではベクトル自己回帰（VAR）モデル、ミクロ計量経済学ではパネルデータ分析、操作変数法、統計的因果推論のトピックについて追加する予定です。

### 本書で出来ないこと {.unnumbered}

本書はデータ分析の手法とコードの解説を主な目的にしており、その背景にある数学的な解説は行っていません。数学的な解説が必要な場合は、参考文献を参照してください。また、データ分析の手法について、エコノミストが日常業務で使用することが比較的少ない機械学習、深層学習、自然言語処理の手法は、現時点では取り上げていません。

## 目次 {.unnumbered}

1.  Rの設定

    Rを使用するにあたり、まず必要な環境構築を行います。RとRStudioのインストール、バージョン確認、Rの機能を拡張するパッケージのインストールとインポート、グラフ作成の事前設定に加え、本書で使用するサンプルデータセットを紹介します。また、オフィスや大学などのプロキシ環境下でRを使用する際に必要なプロキシ設定についても解説します。

2.  Rの基本的な使用方法

    Rで作業をまじめる前に、プログラミング言語としてのRの基本的な使用方法を簡単に紹介します。プログラムの実行方法、ショートカットキー、演算方法、ベクトル・行列・データフレーム・リストなど各種データの取り扱い方法、if文やforループなどの制御構文、データの読み込み・書き出し方法、オブジェクトのセーブ・ロード方法について解説します。この章をまず一読したうえで次章以降へ進み、後から必要に応じてリファレンス的に使用するのが良いでしょう。

3.  tidyverseによるデータ操作

    Rで直感的なデータ操作用を行うパッケージである`tidyverse`の使用方法を紹介します。変数選択や各種条件によるフィルタ、並べ替えなどの基本的な操作に加え、新たな変数の作成、集計、重複処理、欠損地処理、補完処理、サンプリング、縦型・横型の変換といったデータ前処理の手法についても解説します。読み込んだデータを分析に「使える」ようにするために必須の内容です。

4.  時系列データ操作

    経済・金融分析に欠かせない時系列データの操作方法を紹介します。ラグ・リード系列や変化率系列の計算方法、頻度変換、季節調整（X13、STL分解）、トレンド推定（HPフィルタ、一般化加法モデル）などのトピックを取り上げています。

5.  ggplot2によるグラフ作成

    `ggplot2`パッケージを主に使用したグラフ作成方法について記載しています。最初に、GUI形式でどのようなグラフを作成するか検討する方法を紹介したうえで、`ggplot2`によるコード記述形式のグラフ作成方法を解説します。取り上げるグラフは、1次元・2次元の度数分布、密度グラフ、ヒストグラム、QQプロット、散布図、バブルチャート、棒グラフ、円グラフ、折れ線グラフ、ステップグラフ、面グラフ、箱ひげ図（ボックスプロット）、ヴァイオリングラフ、ジッターグラフ、ドットプロット、複合グラフ（ファセット）など、多岐にわたります。また、散布図や折れ線グラフに系列名などのテキストアノテーションを行う方法、グラフの見栄えを整える上で欠かせない色、軸、凡例、フォントなどの設定方法についても紹介しています。、

6.  探索的データ分析（EDA）

    本格的なデータ分析の方針を立てるために必要な、探索的データ分析（EDA）の方法を紹介します。具体的には、データの中身や分布、変数間の関係性・相関を一括して確認する方法について解説します。EDAは軽視されがちですが、極めて重要なプロセスであり、データ分析の成否はEDAが決めるといっても過言ではありません。

7.  線形回帰

    計量経済分析の最も基本的な手法である線形回帰の内容と、Rによる実行方法を紹介します。まず、前提として、統計学・計量経済学で使用される基本的な用語を説明します。次に、線形回帰の推定方法である最小2乗法と、統計的仮説検定について解説したうえで、実務で頻繁に用いる水準モデル、対数モデル、変化率モデル、多項式モデル、交互作用モデル、ダミー変数モデルについて、それぞれの内容と係数の解釈方法を説明します。この部分は、なるべく直感的に理解できるような説明を心がけました。最後に、それらのモデルをRで推定する方法を、西山 他（2019）の実証例を解く形で紹介します。

8.  ベクトル自己回帰モデル

    現在作成中です。

9.  パネルデータ分析（作成中）

    現在作成中です。

10. 統計的因果推論（作成中）

    現在作成中です。

## 参考文献・ウェブサイト {.unnumbered}

### Rの使用方法 {.unnumbered}

#### 入門・初級 {.unnumbered}

[馬場真哉 (2020) 『R言語ではじめるプログラミングとデータ分析』ソシム株式会社](https://www.socym.co.jp/book/1238)

[松村優哉・湯谷啓明・紀ノ定保礼・前田和寛 (2021) 『改訂2版 Rユーザのための RStudio［実践］入門』技術評論社](https://gihyo.jp/book/2021/978-4-297-12170-9)

#### 中級 {.unnumbered}

[Wickham, H., & Grolemund, G. (2017) 『Rではじめるデータサイエンス』オライリー・ジャパン](https://www.oreilly.co.jp/books/9784873118147/)

### 計量経済学 {.unnumbered}

#### 入門・初級 {.unnumbered}

[山本勲 (2015) 『実証分析のための計量経済学ー正しい手法と結果の読み方ー』中央経済社](https://www.biz-book.jp/isbn/978-4-502-16811-6)

[Hanck, C., Arnold, M., Gerber, A., and Schmelzer, M., (2021) "Introduction to Econometrics with R"](https://www.econometrics-with-r.org/index.html)

#### 中級 {.unnumbered}

[西山慶彦・新谷元嗣・川口大司・奥井亮 (2019) 『計量経済学』有斐閣](http://www.yuhikaku.co.jp/books/detail/9784641053854)

[北川梨津 (2020) 「西山 他『計量経済学』のためのR」](https://ritsu1997.github.io/r-for-nlas-econometrics/)

[Hyndman, R.J., & Athanasopoulos, G. (2018) "Forecasting: principles and practice, 2nd edition", OTexts: Melbourne, Australia.](https://otexts.com/fpp2/)

[McAlinn, K. (2022) 「再現性問題における統計学の役割と責任」日本評論社『経済セミナー』2022年6・7月号　通巻 726号](https://www.nippyo.co.jp/shop/magazine/8801.html)

#### 上級 {.unnumbered}

[末石直也 (2015) 『計量経済学ーミクロデータ分析へのいざないー』日本評論社](https://www.nippyo.co.jp/shop/book/6899.html)

[村尾博 (2019) 『Rで学ぶVAR実証分析ー時系列分析の基礎から予測までー』オーム社](https://www.ohmsha.co.jp/book/9784274224775/)
